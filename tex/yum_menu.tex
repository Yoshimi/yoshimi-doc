%-------------------------------------------------------------------------------
% yum_menu
%-------------------------------------------------------------------------------
%
% \file        yum_menu.tex
% \library     Documents
% \author      Chris Ahlstrom
% \date        2015-05-11
% \update      2016-06-05
% \version     $Revision$
% \license     $XPC_GPL_LICENSE$
%
%     Provides the Menu section of yoshimi-user-manual.tex.
%
%-------------------------------------------------------------------------------

\section{Menu}
\label{sec:menu}

   At last, we're now ready to describe the user-interface of \textsl{Yoshimi}!
   The \textsl{Yoshimi} menu, as seen at the top of
   \figureref{fig:yoshimi_main_screen},
   is fairly simple, but it is important to understand the
   structure of the menu entries.

\subsection{Menu / Yoshimi}
\label{subsec:menu_yoshimi}

   The \textsl{Yoshimi}
   menu entry contains the sub-items shown in
   \figureref{fig:yoshimi_menu_items}.
   The next few sub-sections discuss the sub-items in the 
   \textsl{Yoshimi} sub-menu.
   (Note that, in \textsl{ZynAddSubFX}, this menu is called the
   \textsl{File} menu.)

\begin{figure}[H]
   \centering 
%  \includegraphics[scale=0.75]{menu/yoshimi-menu-yoshimi.jpg}
   \includegraphics[scale=1.0]{1.4.0/yoshimi-menu-yoshimi.png}
   \caption{Yoshimi Menu Items}
   \label{fig:yoshimi_menu_items}
\end{figure}

   \textbf{New:}
   \index{new!Vector menu entry}
   New with version 1.4.0 of \textsl{Yoshimi} is the \textbf{Vectors} menu
   entry.
   See \sectionref{subsubsec:menu_yoshimi_vectors}, which presents this dialog
   and briefly describes it.

   \textbf{Bug:}
   \index{bugs!menu hot keys don't work}
   There seems to be a bug in that the expected menu hot-keys
   (Alt-Y, Alt-I, Alt-P, and Alt-S) do not work (Yoshimi 1.3.5).

\subsubsection{Menu / Yoshimi / About...}
\label{subsubsec:menu_yoshimi_about}

   There is no \textbf{Help} menu in \textsl{Yoshimi}.  Therefore, the
   \textbf{About} dialog appears in the \textbf{Yoshimi} menu, as shown in
   \figureref{fig:yoshimi_about_dialog}.
   These guys need some acknowledgment for their hard work!
   And they acknowledge the massive groundwork laid by the
   \textsl{ZynAddSubFX} project.

\begin{figure}[H]
   \centering 
%  \includegraphics[scale=1.0]{menu/Yoshimi/yoshimi-about.jpg}
   \includegraphics[scale=1.0]{1.3.8/yoshimi-about.jpg}
   \caption{Yoshimi Menu, About Dialog}
   \label{fig:yoshimi_about_dialog}
\end{figure}

\subsubsection{Menu / Yoshimi / New instance}
\label{subsubsec:menu_yoshimi_new_instance}

   Creates a new instance of \textsl{Yoshimi}.
   If JACK is running,
   start a normal (JACK-using) instance of \textsl{Yoshimi}.
   Then use this menu entry.  \textsl{Yoshimi} will start another instance
   of itself, with an ID of 1.
   This instance can be verified by running a JACK session manager such as
   QJackCtl.

   It is important to note that each instance of \textsl{Yoshimi} has its
   own configuration file.  Each also has its own MIDI and audio ports.
   Thus, these instances are partly independent of each other.

   Opening a new instance creates a copy that has it's own dynamic memory for
   running storage. In the future, some data (such as recent history) will be
   shared between instances. This will be done only where instances actually
   need to be in sync.

   Each instance has it's own file-store in \textsl{Yoshimi}'s configuration
   directory. The means that if one opens a numbered instance, one will get
   back all the settings that were previously used for that instance.

   Instances no longer fight for access to JACK/ALSA audio; they will simply
   try to find another route to a soundcard. Failing to find one,
   they will revert to null audio, but will nonetheless start cleanly.

\subsubsection{Menu / Yoshimi / New instance with id...}
\label{subsubsec:menu_yoshimi_new_instance_with_id}

   Creates a new instance of \textsl{Yoshimi}
   with an ID that is a number.
   See \figureref{fig:yoshimi_instance_dialog}.
   It tries to open a \textsl{Yoshimi} instance based on the configuration
   found in the file
   \texttt{\textasciitilde/.config/\-yoshimi/\-yoshimi.configXX}, where
   \textsl{XX} is the ID one supplied.

\begin{figure}[H]
   \centering 
   \includegraphics[scale=0.75]{menu/Yoshimi/yoshimi-instance-id.jpg}
   \caption{Yoshimi Menu, Instance Dialog}
   \label{fig:yoshimi_instance_dialog}
\end{figure}

   Useful when connecting devices with JACK.
   Start a normal (JACK-using) instance of \textsl{Yoshimi}.
   Then use this menu entry, supply a number as an ID.
   \textsl{Yoshimi} will start another instance
   of itself, with an ID of whatever number one specified.
   This instance can be verified by running a JACK session manager such as
   \textsl{QJackCtl}.

   In a non-JACK setup it won't fail, but in the absence of any specific
   setting, it will have null audio, but (probably) will still connect to ALSA
   MIDI.  Not too useful, but we should test that sometime.

\subsubsection{Menu / Yoshimi / Vectors}
\label{subsubsec:menu_yoshimi_vectors}

   Vectors provide a way of mixing up to four parts in a manner that can be
   automatec, saved, and loaded.  The features of vector control are presented
   in \sectionref{sec:vector}.
   Vector setup and control from the \textsl{Yoshimi} command-line are
   discussed in
   \sectionref{subsec:command_line_command_level}.
   Here, we discuss the vector configuration dialog.
   (As an exercise, one can compare the various functions of the vector dialog
   to the command-line commands one can use to set up the vector
   functionality.)
   The new \textbf{Yoshimi / Vectors} menu entry brings up the following
   dialog:

\begin{figure}[H]
   \centering 
   \includegraphics[scale=0.75]{1.4.0/yoshimi-vectors-dialog.png}
   \caption{Yoshimi Vectors Dialog}
   \label{fig:yoshimi_vectors_dialog}
\end{figure}

   The user-interface items in the vector dialog are:

   \begin{enumber}
      \item \textbf{Top Line}
      \begin{enumber}
         \item \textbf{Base Channel}
         \item \textbf{Options}
      \end{enumber}
      \item \textbf{X Vector}
      \begin{enumber}
         \item \textbf{Controller} (CC Event)
         \item \textbf{Part 1}
         \item \textbf{Part 2}
         \item \textbf{Features}
         \begin{enumber}
            \item \textbf{Feature 1} (Volume)
            \item \textbf{Feature 2} (Pan)
            \item \textbf{Feature 3} (Brightness)
            \item \textbf{Feature 4} (Modulation)
         \end{enumber}
      \end{enumber}
      \item \textbf{Y Vector}
      \begin{enumber}
         \item \textbf{Controller} (CC Event)
         \item \textbf{Part 1}
         \item \textbf{Part 2}
         \item \textbf{Features}
         \begin{enumber}
            \item \textbf{Feature 1} (Volume)
            \item \textbf{Feature 2} (Pan)
            \item \textbf{Feature 3} (Brightness)
            \item \textbf{Feature 4} (Modulation)
         \end{enumber}
      \end{enumber}
      \item \textbf{Bottom Line}
      \begin{enumber}
         \item \textbf{Vector Name}
         \item \textbf{Close}
      \end{enumber}
   \end{enumber}

   Although they are nested, for simplicity we will discuss the unique items
   serially.

   \setcounter{ItemCounter}{0}      % Reset the ItemCounter for this list.

   \itempar{Base Channel}{Vectors!base channel}
   Vector Base Channel.
   This item specifies the MIDI channel on which the vector (of parts) will be
   based.  This channel is the incoming MIDI channel to which the vector setup
   will respond to on all parts.

   Values: \texttt{1 to 16, 1*}

   \itempar{Options}{Vectors!options}
   Vector Options.

   Values: \texttt{1 to 127, 64*}

\begin{figure}[H]
   \centering 
   \includegraphics[scale=0.75]{1.4.0/yoshimi-vectors-options.png}
   \caption{Yoshimi Vectors Options}
   \label{fig:yoshimi_vectors_options}
\end{figure}

   The menu entries provide the actions described in this list:

   \begin{enumber}
      \item \textbf{Load}.
         Brings up a file dialog that let's one pick an arbitary vector file
         (extension \texttt{.xvy}) in an arbitrary directory, or select a
         "Favorites" directory in which to look for vector files.
         The base name of the file is then shown in the \textbf{Vector Name}
         field.
      \item \textbf{Save}.
         Brings up a file dialog that let's one save an arbitary vector file
         (extension \texttt{.xvy}) in an arbitrary directory, or select a
         "Favorites" directory in which to save a vector file.
         The base name of the file is then shown in the \textbf{Vector Name}
         field.
      \item \textbf{Recent}.
         Brings up a short list of the previous vector files dealt with.
      \item \textbf{Clear Chan}.
         Clears the base channel number????
      \item \textbf{Clear All}.
         Clears out the full vector setup, rendering it an "empty" vector setup
         that cannot be saved.
   \end{enumber}

   \itempar{X Vector}{Vectors!x}
   The X Vector.
   This vector provides the minimal setup for a vector.  This setup requires
   \textsl{Yoshimi} to be configured for 32 parts, to be able to fully support
   a two-part vector for every MIDI channel.  This section is disabled until
   selects a \textbf{Controller} event value for it.

   \itempar{Controller}{Vectors!controller}
   Vector Controller CC Event.
   If 0, the section (\textbf{X} or \textbf{Y}) that this value is in is
   disabled.  Otherwise, the number is the MIDI continuous controller (CC)
   event value that is to be used to control the mix of the two parts involved
   in this vector.

   Values: \texttt{1 to 119, 0*}

   \itempar{Part 1}{Vectors!part 1}
   Part 1.
   The top button in the section (\textbf{X} or \textbf{Y}) selects the first
   part to use in the two-part vector.  Clicking this button brings up the
   default bank dialog.  This dialog allows one to select a part (instrument),
   or to select an different bank from which to choose a part (instrument).

   \itempar{Part 2}{Vectors!part 2}
   Part 2.
   The bottom button in the section (\textbf{X} or \textbf{Y}) selects the
   second part to use in the two-part vector.  Clicking this button brings up
   the default bank dialog, just as for the \textbf{Part 1} button.

   \itempar{Feature 1}{Vectors!volume}
   Vector Feature 1, Volume.
   This feature can be disabled, or enabled.  Feature 1 is always fixed as MIDI
   event 7 (volume), and is not reversible.
   When enabled, the volume is traded off between the first part and second part
   as the selected MIDI CC controller event data value changes.
   While the first part increases in volume, the second part decrease in
   volume, and vice versa.

\begin{figure}[H]
   \centering 
   \includegraphics[scale=0.75]{1.4.0/yoshimi-vectors-feature-1.png}
   \caption{Yoshimi Vectors, Feature 1}
   \label{fig:yoshimi_vectors_feature_1}
\end{figure}

   Values: \texttt{Off*, Vol}

   Note that the common theme between all features is that they apply inversely
   to the two parts/instruments that are paired in an \textbf{X}
   or \textbf{Y} vector.

   \itempar{Feature 2}{Vectors!pan}
   Vector Feature 2, Pan.
   This feature can be disabled, enabled, or reversed.
   When enabled, it acts similarly to volume, panning from left to right as the
   data value increases.
   When reversed, it pans from right to left as the data value increases.

\begin{figure}[H]
   \centering 
   \includegraphics[scale=0.75]{1.4.0/yoshimi-vectors-feature-2.png}
   \caption{Yoshimi Vectors, Feature 2}
   \label{fig:yoshimi_vectors_feature_2}
\end{figure}

   Values: \texttt{Off*, Pan, Pan R}

   \itempar{Feature 3}{Vectors!brightness}
   Vector Feature 3, Brightness.
   Brightness here refers to the application of a (we presume) low-pass filter
   with a varying cutoff frequency.
   This feature can be disabled, enabled, or reversed.
   When enabled, it acts similarly to volume, changing the brightness
   from left to right as the data value increases.
   When reversed, it changes the brightness from right to left as the data
   value increases.

\begin{figure}[H]
   \centering 
   \includegraphics[scale=0.75]{1.4.0/yoshimi-vectors-feature-3.png}
   \caption{Yoshimi Vectors, Feature 3}
   \label{fig:yoshimi_vectors_feature_3}
\end{figure}

   Values: \texttt{Off*, Filt, Filt R}

   \itempar{Feature 4}{Vectors!modulation}
   Vector Feature 4, Modulation.
   Modulation here refers to the application of an (we presume) LFO
   (for amplitude or frequency) with a varying modulation depth.
   This feature can be disabled, enabled, or reversed.
   When enabled, it acts similarly to volume, changing the modulation
   from left to right as the data value increases.
   When reversed, it changes the modulation from right to left as the data
   value increases.

\begin{figure}[H]
   \centering 
   \includegraphics[scale=0.75]{1.4.0/yoshimi-vectors-feature-4.png}
   \caption{Yoshimi Vectors, Feature 4}
   \label{fig:yoshimi_vectors_feature_4}
\end{figure}

   Values: \texttt{Off*, Mod, Mod R}

   \itempar{X Vector}{Vectors!x}
   The X Vector.
   This vector provides the maximal setup for a vector.  This setup requires
   \textsl{Yoshimi} to be configured for 64 parts, to be able to fully support
   an additional two-part vector for every MIDI channel.  This section is
   disabled until selects a \textbf{Controller} event value for it.

   Other than that, the \textbf{Y} vector acts like the \textbf{X} vector, and
   all of the sub-items have the same functionality as in the
   \textbf{X} vector.

\begin{figure}[H]
   \centering 
   \includegraphics[scale=0.75]{1.4.0/yoshimi-vectors-saved.png}
   \caption{Yoshimi Vectors Saved as "My First Vector"}
   \label{fig:yoshimi_vectors_saved}
\end{figure}

   If starting a new vector setup, first
   select the base channel (1 to 16) to set the vector on. Next,
   use the \textbf{X} and \textbf{Y} \textbf{Controller}
   spin-boxes to select the incoming CC.
   If you set an invalid one strange things may happen, though it won't
   actually do any harm.

   The instrument buttons bring up the instrument list window in exactly the same
   way as the main part one does, but do not currently the right-click
   windows return feature.

   When setting up a completely new vector, if the mixer or the main part are
   visible, they may be slightly out of sync, but will correct themselves as
   soon as one changes an instrument or part.

   When one \textbf{clears} a vector it doesn't delete loaded voices, nor does
   it change the active status of the part, nor the number of parts available.
   This is because these settings may have been made independent of vector
   control. In short, vector setup will add things but not remove them.

\subsubsection{Menu / Yoshimi / Settings...}
\label{subsubsec:menu_yoshimi_settings}

   The \textsl{Yoshimi Settings} dialog contains four tabs that control the
   major and overall settings of \textsl{Yoshimi}.  At the bottom of this
   dialog are two buttons:
   \textbf{Save and Close} and \textbf{Close Unsaved}.
   \index{Save and Close}
   \index{Close Unsaved}

   Please note that the \textbf{Save and Close} and \textbf{Close Unsaved}
   buttons apply to the \textsl{whole}
   \textbf{Settings} window.
   Furthermore, the "saving" does \textsl{not} refer to preserving the changes
   that have been made
   in any of the tabs for the current \textsl{Yoshimi} session.  Any changes
   made in \textbf{Settings} always remain in place for the current
   \textsl{Yoshimi} session.
   However, the changes to the settings are saved to
   the state file \textsl{only} if \textbf{Save and Close} is clicked.

   \setcounter{ItemCounter}{0}      % Reset the ItemCounter for this list.

   \itempar{Save and Close}{Settings!Save and Close}
   This selection saves the settings made in \textbf{all} of the tabs to the
   state file, and closes the \textsl{Yoshimi} settings dialog.

   \itempar{Close Unsaved}{Settings!Close Unsaved}
   Close Unsaved, Main Settings.

   This selection closes the \textsl{Yoshimi} settings dialog.
   However, note that any changes made in the tabs
   \textsl{are preserved}.  They are preserved for the current
   \textsl{Yoshimi} session, but are not saved to the filesystem.
   
\paragraph{Menu / Yoshimi / Settings / Main Settings}
\label{paragraph:menu_yoshimi_settings_main_settings}

   The Main Settings tab controls the main configuration items that
   follow, which apply to all patches/instruments.
   The main settings are shown in
   \figureref{fig:yoshimi_main_settings_dialog}.

   Some settings only take effect after restarting the synthesizer.
   In Main settings, only items marked with an asterisk ('*')
   need a restart. 
   (This in now only the first two. Some of the other ones had
   prevously been wrongly marked.)

   The settings dialogs are quite different between \textsl{ZynAddSubFX} and
   \textsl{Yoshimi}.  There are some differences even between
   \textsl{Yoshimi} versions earlier than 1.3.5, and the current version
   (currently 1.3.9).

\begin{figure}[H]
   \centering 
%  \includegraphics[scale=0.75]{menu/Yoshimi/yoshimi-settings-main.jpg}
   \includegraphics[scale=0.75]{1.3.9/yoshimi-settings-main.png}
   \caption{Yoshimi Main Settings Tab}
   \label{fig:yoshimi_main_settings_dialog}
\end{figure}

   The following settings exist in the \textsl{Main settings} tab:

   \begin{enumber}
      \item \textbf{AddSynth Oscillator Size} (was "OscilSize")
      \item \textbf{Internal Buffer Size} (new)
      \item \textbf{PADsynth interpolation}
      \item \textbf{Virtual Keyboard Layout}
      \item \textbf{XML compression level}
      \item \textbf{Send reports to}
      \item \textbf{Hide Non Fatal Errors}
      \item \textbf{Log XML headers}
      \item \textbf{Show Splash} (new)
      \item \textbf{Save and Close}
      \item \textbf{Close Unsaved}
   \end{enumber}

   \setcounter{ItemCounter}{0}      % Reset the ItemCounter for this list.

   \itempar{AddSynth Oscillator Size}{Main Settings!oscillator size}
   ADDsynth Oscillator Size (in samples).  This item used to be called
   "OscilSize".  Sets the number of the points of the ADDsynth oscillator.
   Bigger is better, but it takes more CPU time on the start of any note, and
   it may add latency to some processes.

   The default value for \textsl{Yoshimi} is shown marked with an asterisk,
   and the default value for \textsl{ZynAddSubFX} is 512.
   \index{asterisk}
   \index{default!asterisk}
   This asterisk/plus-sign convention is used throughout this manual.
   See \figureref{fig:yoshimi_oscilsize_values},
   shown below for the AddSynth Oscillator Size drop-down element.

   Values: \texttt{256, 512*, 1024, 2048, 4096, 8192, 16384}

\begin{figure}[H]
   \centering 
   \includegraphics[scale=0.75]{menu/Yoshimi/main-oscilsize.jpg}
   \caption[OscilSize Values]{AddSynth Oscillator Size (samples)}
   \label{fig:yoshimi_oscilsize_values}
\end{figure}

   \itempar{Internal Buffer Size}{Main Settings!buffer size}
   This is a new item for version 1.3.6.  It is actually the old
   \textbf{Period Size} field from the \textbf{Alsa} tab.
   It sets the granularity of the sound generation.
   To find out the internal delay in milliseconds, divide the
   buffer-size value by the sample-rate, then multiply the result by 1000:
   For example, \(256 / 44100 * 1000 = 5.8 ms\).

   The default internal buffer size has been reduced from 1024 to 256.  One
   gets better latency that way.  Almost all modern computers can run
   \textsl{Yoshimi} with the current default (smaller) buffer-size value, and
   many will do so at 64 frames (and even 16 frames!)
   without any special precautions.
   
   Note that, for ALSA, if the audio destination is "default",
   then ALSA decides on the buffer size (among other settings), and
   \textsl{Yoshimi} will set it's internal buffer size to match,
   which always seems to be 1024.

   Values: \texttt{64, 128, 256*, 512, 1024}

\begin{figure}[H]
   \centering 
   \includegraphics[scale=0.75]{menu/Yoshimi/main-internalsize.jpg}
   \caption[Internal Size Values]{AddSynth Internal Buffer Size (samples)}
   \label{fig:yoshimi_internalsize_values}
\end{figure}

   \itempar{PADsynth interpolation}{Main Settings!PADsynth Interpolation}
   See \figureref{fig:padsynth_interpolation}, shown below,
   for the interpolation values.
   From an email conversation with Paul Nasca, Will notes that
   the sound improvement with cubic interpolation is quite subtle, and requires
   a well designed audio setup, a PADsynth instrument with a fair amount of
   high-frequency content... and good hearing!

\begin{figure}[H]
   \centering 
   \includegraphics[scale=0.75]{menu/Yoshimi/main-padsynth-interpolation.jpg}
   \caption[PADSynth Interpolation]{PADSynth Interpolation Values}
   \label{fig:padsynth_interpolation}
\end{figure}

   Values: \texttt{Linear(fast)*, Cubic(slow)}

   \itempar{Virtual Keyboard Layout}{Main Settings!Virtual Keyboard Layout}
   The virtual keyboard is useful, but it is difficult to move the mouse
   rapidly to the next key on the virtual keyboard.
   Therefore, \textsl{Yoshimi} supports using the computer keyboard
   to produce notes.

\begin{figure}[H]
   \centering 
   \includegraphics[scale=0.45]{top-panel/ascii-virtual-keyboard.png}
   \caption{QWERTY Virtual Keyboard Layout}
   \label{fig:qwerty_virtual_keyboard}
\end{figure}

   See \figureref{fig:qwerty_virtual_keyboard},
   for the mapping of the computer keyboard to the
   virtual keyboard.
   Three octaves (blue, green, and red) are available, with the dark keys of
   each color representing the "black" keys.
   Note that this is a QWERTY layout.  
   \textsl{Yoshimi} also supports other keyboard layouts.
   See \figureref{fig:virtual_kbd_layout},
   for the virtual keyboard layout settings drop-down.

   Values: \texttt{QWERTY*, Dvorak, QWERTZ, AZERTY}

\begin{figure}[H]
   \centering 
   \includegraphics[scale=0.75]{menu/Yoshimi/main-virtual-kbd-layout.jpg}
   \caption[Virtual Keyboard Layout]{Virtual Keyboard Layout Values}
   \label{fig:virtual_kbd_layout} 
\end{figure}

   \itempar{XML compression level}{Main Settings!XML compression level}
   Gzip Compression level of \textsl{Yoshimi} XML files.
   The settings and instruments of
   \textsl{Yoshimi}
   are preserved in XML files.
   The value of 0 indicates that the XML file is uncompressed.

   In general, 0 is probably the best setting for debugging only.  Setting this
   option makes the XML files a bit larger, perhaps larger by a factor of more
   than 10, making a 10K file into a 180K file.  For a little "wasted" space
   and time, one can view the XML file in a text/programmer's editor.  But, if
   one's system is tight on disk space, higher levels of compression can be
   specified.  Using XML compression can also save file access time which may
   be beneficial if one's computer is borderline on latency.  This setting
   should stay at 3 if one is going to save large patchsets that will later be
   loaded while running. Uncompressing is \textsl{much} faster than file
   loading.

   Values: \texttt{0 to 9, 3*}

   \itempar{Send reports to}{Main Settings!Send Reports Destination}
   Notices and error messages can be sent to the standard error log of
   the terminal in which 
   \textsl{Yoshimi} can be run, or, more usefully, to
   an output console window.
   Now these messages are pushed in reverse order, to avoid scrolling
   and to make the most recent statuses easily visible.
   See \figureref{fig:send_reports_to}.
   It provides a depiction of the selection drop-down.

   Values: \texttt{stderr*, Console Window}

\begin{figure}[H]
   \centering 
   \includegraphics[scale=1.0]{menu/Yoshimi/main-send-reports-to.jpg}
   \caption[Send Reports]{Send Reports To}
   \label{fig:send_reports_to}
\end{figure}

   If the \textbf{Console Window} option is chosen, then the
   \textbf{Reports} button in the effects panel is enabled.
   Pressing the \textbf{Reports} button brings up a small console dialog, as
   shown in \figureref{fig:console_window}.

\begin{figure}[H]
   \centering 
   \includegraphics[scale=1.0]{1.3.9/console-window.png}
   \caption[Yoshimi Console Window]{Console Window}
   \label{fig:console_window}
\end{figure}

   \index{reports!middle-click}
   An interesting feature of the console window is that one can identify
   user-interface elements of the \textsl{Yoshimi} configuration in this window
   by a middle-click on the user-interface element.  The console window figure
   shows the results of middle-clicking on the following bottom-panel knobs in
   order:

   \begin{enumerate}
      \item Velocity Sense (left-click)
      \item Velocity Offset
      \item Pan
      \item Volume
   \end{enumerate}

   \index{reports!middle-click}
   Information about each knob middle-clicked is pushed to the top of the
   windows in reverse order.
   \index{reports!left-click}
   \index{reports!right-click}
   Information about an earlier left-click is shown at the bottom of the figure.
   Each left-click ("Button 1") will increase the parameter represented by the
   knob, and each right-click ("Button3") will decrease the parameter
   represented by the knob, and each change is reported in the console window.
   And, of course, each middle-click changes nothing, but reports the current
   value in the console window.
   This powerful feature provides a way to gather the information needed to
   control the parameter from the command-line.
   The output can be selected, copied, and pasted to a script or archive text
   file for safe-keeping.
   \index{MIDI learn}
   Consider it a form of "MIDI learn" that will be developed in the future.
   And note that it applies to output to \texttt{stderr} as well.

   \itempar{Hide Non Fatal Errors}{Main Settings!Hide Non-Fatal Errors}
   Especially when running from the command line (with reports going there
   too), under some circumstances one can get a swamp of low-level error
   messages (such as XRUNs) that is so large that one cannot work out what is
   going on. This feature disables these error messages; it is a work in
   progress to catch the bulk of them, while still reporting top-level messages
   and ones that cause a forced exit (surely not!)

   \itempar{Log XML headers}{Main Settings!Log XML headers}
   This item sends the information to the console window
   (or \texttt{stderr}) so that
   one can then see what \textsl{ynAddSubFX}/\textsl{Yoshimi}
   version created the file.

   \itempar{Show Splash}{Main Settings!Show Splash}
   This item will speed up the start-up of \textsl{Yoshimi} slightly
   if unchecked, by not showing the splash screen while files are being loaded.

\paragraph{Menu / Yoshimi / Settings / Jack}
\label{paragraph:menu_yoshimi_settings_jack}

   JACK is the "Jack Audio Connection Kit", very useful for increasing audio
   performance and configurability.
   When using the JACK audio backend, instruments can be individually routed
   and sent to the main L/R outputs. This is controlled from the
   panel window,
   \sectionref{subsec:mixer_panel_window},
   and the settings are saved with all the other parameters.

   Direct part outputs carry the Part and Insertion effects, but not the
   System ones.

\begin{figure}[H]
   \centering 
%  \includegraphics[scale=0.75]{menu/Yoshimi/yoshimi-settings-jack.jpg}
%  \includegraphics[scale=0.75]{1.3.8/yoshimi-settings-jack.jpg}
   \includegraphics[scale=0.75]{1.3.9/yoshimi-settings-jack.png}
   \caption[JACK Settings]{JACK Settings Dialog}
   \label{fig:yoshimi_settings_jack}
\end{figure}

   The following items are provided by the Jack settings:

   \begin{enumber}
      \item \textbf{Jack Midi Source}
      \item \textbf{Set as preferred MIDI}
      \item \textbf{Jack Server}
      \item \textbf{Set as preferred audio}
      \item \textbf{Autoconnect audio} (new, 1.3.9)
      \item \textbf{Save and Close}
      \item \textbf{Close Unsaved}
   \end{enumber}

   \setcounter{ItemCounter}{0}      % Reset the ItemCounter for this list.

   \itempar{Jack Midi Source}{JACK!MIDI source}
   Jack MIDI Source.
   It is possible to have more than one JACK MIDI source.  This option
   tells this instance of \textsl{Yoshimi} which JACK
   client to try to auto-connect to for MIDI input.
   This option corresponds to the \textsl{Yoshimi} command line option
   \texttt{--jack-midi(=device)}.

   Values: \texttt{default*, name} name, as in "jackd --name"

   \itempar{Set as preferred MIDI}{JACK!set as preferred MIDI}
   Set as preferred MIDI for JACK.
   This setting determines which MIDI connections a particular instance will
   first attempt. The switches are mutually exclusive across JACK and ALSA,
   so if one checks ALSA for MIDI, it automatically unchecks JACK for MIDI.
   As well as from the GUI, this setting can be set (for instance 0) from the
   command line, both at start-up and once running.

   \itempar{Jack Server}{JACK!server name}
   Jack Server Name.
   It is possible to have more than one JACK server running.  This option
   tells this instance of \textsl{Yoshimi} which JACK server to use.
   This option corresponds to the \textsl{Yoshimi} command line option
   \texttt{--jack-audio(=server)}.

   Values: \texttt{default*, name} name, as in
   \texttt{jackd --name}.

   \itempar{Set as preferred audio}{JACK!set as preferred audio}
   Set as preferred audio for JACK.
   This setting determines which audio connections a particular instance will
   first attempt. The switches are mutually exclusive across JACK and ALSA,
   so if one checks ALSA for audio, it automatically unchecks JACK for audio.
   As well as from the GUI, this setting can be set (for instance 0) from the
   command line, both at start-up and once running.
   Note that any of these setting changes require a restart of \textsl{Yoshimi}
   to take effect.

   \itempar{Autoconnect audio}{JACK!autoconnect audio}
   Sets \textsl{Yoshimi} to connect automatically to the JACK server, just like
   the \texttt{-K} command-line option does.  (However, note that the
   command-line has no way to disable this feature it the configuration has been
   saved.)

\paragraph{Menu / Yoshimi / Settings / ALSA}
\label{paragraph:menu_yoshimi_settings_alsa}

   A significant improvement is to the handling of ALSA audio, which is still
   very important for some people. Until now, \textsl{Yoshimi} has insisted
   on a 2-channel, 16-bit format. Tests have shown that virtually all
   motherboard sound chipsets will handle this, but many external ones don't.

   From \textsl{Yoshimi} 1.3.6 onwards, when using ALSA audio,
   \textsl{Yoshimi} first tries to connect 2 channels at 32 bit depth.  If
   that connection does not succeed, then \textsl{Yoshimi} negotiates
   whatever the soundcard will support.  For example, a card might support
   only 24 bits, and 6 channels.  So \textsl{Yoshimi} will fall back to
   24 bit, and, due to its own limits, will use only channels 1 and 2.
   With external sound modules in mind, endian swaps are also implemented.

   To be able to reliably use ALSA audio, one needs to set a card name, not just
   "Default".  In a terminal window enter the following command:

   \begin{verbatim}
      $ cat /proc/asound/card*/id
   \end{verbatim}

   The result of this command should be something like:

   \begin{verbatim}
      PCH
      K6
   \end{verbatim}

   Go to the ALSA settings tab illustrated below, and in 
   \textsl{Alsa Audio Device} enter, for example, "hw:PCH".
   This ensures one will always connect to this card at startup regardless of
   the order this and other ones.  Another benefit of using this hardware name
   is that ALSA will now use \textsl{Yoshimi}'s internal
   buffer size (256), otherwise ALSA will force \textsl{Yoshimi} to accept its
   default size (usually 1024).

   One can also set the sample rate, but bear in mind that not all cards can use
   all of these.  The sample rates 44100 and 48000 are almost always available.
   If one sets a Midi Device as well (such as a keyboard) Yoshimi will try to
   find and connect to this device at startup.

   To find the MIDI devices available, try:

   \begin{verbatim}
      $ grep Client /proc/asound/seq/clients
   \end{verbatim}

   The result of this command should be something like:

   \begin{verbatim}
      Client info
      Client   0 : "System" [Kernel]
      Client  14 : "Midi Through" [Kernel]
      Client 128 : "TiMidity" [User]
   \end{verbatim}

   It is not obvious how ALSA audio is controlled and who takes command.  If
   one sets a specific audio destination, then \textsl{Yoshimi} makes a
   request.  It's often a negotiation on bit depth and channel count, but
   \textsl{Yoshimi} nearly always gets to decide the buffer size, which is the
   internal buffer size.  However, if the destination is 'default' then ALSA
   decides on the sound card, bit depth, number of channels and the buffer
   size, and \textsl{Yoshimi} will set it's internal buffer size to match.  On
   most machines this seems to be 1024.

\begin{figure}[H]
   \centering 
%  \includegraphics[scale=0.75]{menu/Yoshimi/yoshimi-settings-alsa.jpg}
   \includegraphics[scale=0.75]{1.3.8/yoshimi-settings-alsa.png}
   \caption[ALSA Settings]{ALSA Settings Dialog}
   \label{fig:yoshimi_settings_alsa}
\end{figure}

   \setcounter{ItemCounter}{0}      % Reset the ItemCounter for this list.

   \itempar{Alsa Midi Source}{ALSA!MIDI Source}
   ALSA MIDI Source.
   The purpose of this setting is the same as the command line option
   \texttt{--alsa-midi="name"}.
   It is used so that \textsl{Yoshimi} can auto connect to a MIDI source
   such as a keyboard.  For example, the one that Will has identifies itself
   as name = "Hua Xing".
   A port name, such as "128:0" (for one of the ports provided by
   \textsl{TiMidity}) should work as well.
   If the destination is "default",
   then ALSA decides on the sound card, bit depth, number of channels and the
   buffer size, and \textsl{Yoshimi} will set it's internal buffer size to
   match.  On most machines this always seems to be 1024.

   Values: \texttt{default*}

   \itempar{Set as preferred MIDI}{ALSA!Set as preferred MIDI}
   Set as preferred MIDI for ALSA.
   This setting determines which MIDI connections a particular instance will
   first attempt. The switches are mutually exclusive across JACK and ALSA,
   so if one checks ALSA for MIDI, it automatically unchecks JACK for MIDI.
   As well as from the GUI, this setting can be set (for instance 0) from the
   command line, both at start-up and once running.

   \itempar{Alsa Audio Device}{ALSA!audio device}
   ALSA Audio Device.
   This specifies the sound card to which \textsl{Yoshimi} can connect.
   Normally, this will be an ALSA hardware specification such as
   "hw:0".
   ALSA audio also lets one connect to a sound card by name. For example,
   with a Komplete Audio KA 6 sound card, the device specification is
   "hw:K6". This feature is particularly useful for USB modules, as one can
   never be sure where they appear numerically.

   Values: \texttt{default*}

   \itempar{Set as preferred audio}{ALSA!Set as preferred audio}
   Set as preferred audio for ALSA.
   This setting determines which audio connections a particular instance will
   first attempt. The switches are mutually exclusive across JACK and ALSA,
   so if one checks ALSA for audio, it automatically unchecks JACK for audio.
   As well as from the GUI, this setting can be set (for instance 0) from the
   command line, both at start-up and once running.

   \itempar{Samplerate}{ALSA!sample rate}
   Sample Rate.
   Sets the quality of the sound, higher is better, but it uses more CPU.  One
   can select from a list.  Note that both ALSA and JACK will support the
   192000 rate, if the sound-card supports it.  To find out the internal delay
   in milliseconds, divide the buffer-size value by the Sample Rate and
   multiply the result by 1000 (256 / 44100 * 1000 = 5.8 ms).

   Note that, as of version 1.3.6, the \textbf{Period Size} field has been
   removed from the \textbf{Alsa} tab, and is replaced by the 
   \textbf{Internal Buffer Size} field in the \textbf{Main Settings} tab.
   Note that any of these setting changes require a restart of \textsl{Yoshimi}
   to take effect.
   
   \textsl{ZynAddSubFX}: if one wants a sample-rate that
   is not in the list, select "Custom" and change the value from the right.
   Default is 44100.

   Values: \texttt{192000, 96000, 48000*, 44100}

\paragraph{Menu / Yoshimi / Settings / MIDI}
\label{paragraph:menu_yoshimi_settings_ccs}

   The CC settings tab has been renamed the "MIDI" tab.
   This tab, shown in
   \figureref{fig:yoshimi_settings_cc},
   presents MIDI bank-root, bank, program change, and extended program
   change settings, plus some new values.

   A new feature as of version 1.3.6 is that some changes to the items in this
   tab cause a red \textbf{Pending} button to appear.  Pressing this
   button saves that particular change.

\begin{figure}[H]
   \centering 
%  \includegraphics[scale=0.75]{menu/Yoshimi/yoshimi-settings-ccs.jpg}
%  \includegraphics[scale=0.75]{1.3.8/yoshimi-settings-midi.png}
   \includegraphics[scale=0.75]{1.3.9/yoshimi-settings-ccs.jpg}
   \caption[MIDI Preferences]{MIDI Preferences}
   \label{fig:yoshimi_settings_cc}
\end{figure}

%  TODO:  Could add a figure showing the red Pending button.

   The following items are provided by the MIDI settings tab:

   \begin{enumber}
      \item \textbf{Enable Bank Root Change}
      \item \textbf{Bank Root Change}
      \item \textbf{Bank Change}
      \item \textbf{Enable Program Change}
      \item \textbf{Enable Part On Program Change}
      \item \textbf{Enable Extended Program Change}
      \item \textbf{Extended Program Change}
      \item \textbf{Ignore Reset all CCs}
      \item \textbf{Log incoming CCs}
      \item \textbf{Save and Close}
      \item \textbf{Close Unsaved}
   \end{enumber}

   \setcounter{ItemCounter}{0}      % Reset the ItemCounter for this list.

   The concepts of banks and roots is very useful.
   See \sectionref{subsec:concepts_banks_and_roots}.
   The settings in this tab affect the usage of banks and root changes
   controlled by MIDI messages, thereby making \textsl{Yoshimi} able to
   implement MIDI automation.

   \itempar{Enable Bank Root Change}{MIDI preferences!enable bank root change}
   Enable Bank Root Change.

   Values: \texttt{Off*, On}

   \itempar{Bank Root Change}{MIDI preferences!bank root change}

   Values: \texttt{0*, to 127}

   If enabled, a new reddish button, \textbf{Pending}, appears.
   Once the change has been made in the scroll list, click this button
   to set the change.
   \textbf{Warning:}
   The \textbf{Save and Close} button will not result in the removal of the
   \textbf{Pending} button.
   This result seems counter-intuitive, but the pending button is not removed
   here because, at that point, it still hasn't actually been either set or
   abandoned. It remains available for when the user actually makes up his/her
   mind.

   \itempar{Bank Change}{MIDI preferences!bank change}
   Bank Change.
   Defines which MIDI preferences one wants to use.
   Note that MIDI Controller 0 = CC0 = Bank Select MSB, and MIDI Controller
   32 = CC32 = Bank Select LSB.
   When combined, these Bank Select messages provide \[128*128 = 16384\]
   banks.

   But note that all a Bank Select does is selects the bank for the next
   Program Change event.  The program doesn't change after changing a bank,
   until a Program Change is sent.

   Bank changes can be completely disabled; some hardware
   synthesizers don't play nice with banks.

   Values: \texttt{LSB, MSB*, Off}

   \itempar{Enable Program Change}{MIDI preferences!enable program change}

   Values: \texttt{Off*, On}

   Enables/disables MIDI program change.
   Program changes can be completely disabled, but some hardware synths don't
   play nice!

   \itempar{Enable Part On Program Change}{MIDI preferences!enable part change}

   Values: \texttt{Off*, On}

   The part is automatically enabled if the MIDI program was changed on this
   part.

   \itempar{Enable Extended Program Change}{MIDI preferences!enable extended program change}

   Values: \texttt{Off*, On}

   \itempar{Extended Program Change}{MIDI preferences!extended change}
   If enabled, a new reddish button, \textbf{Pending}, appears.
   Once the change has been made in the scroll list, click this button
   to set the change.

   Values: \texttt{0-127, 110*}

   \itempar{Ignore Reset all CCs}{MIDI preferences!Ignore Reset all CCs}
   Causes \textsl{Yoshimi} to ignore this message.
   \index{CC monitor}
   For example, using \textsl{Yoshimi}'s fairly new CC monitor (see the next
   item), Will found that \textsl{Rosegarden} was sending CC 121 (reset all
   controllers) at the start of some song segments.  Checking this option
   prevents unwanted resets.

   Values: \texttt{Off*, On}

   \itempar{Log incoming CCs}{MIDI preferences!Log incoming CCs}
   This setting is is about the only setting that is never saved. It is there
   solely as an aid for when \textsl{Yoshimi} appears to ignore MIDI commands,
   as it tells one exactly what \textsl{Yoshimi} thinks it received.

   Values: \texttt{Off*, On}

\subsubsection{Menu / Yoshimi / Exit}
\label{subsubsec:menu_yoshimi_exit}

   Simply exits from \textsl{Yoshimi}.
   The user is prompted if unsaved changes exist, as shown in
   \figureref{fig:yoshimi_change_exit}.

   One can sometimes get a false parameters-changed warning if one
   scrolls through one of the menu type entries without actually changing it.
   Better safe than sorry!

\begin{figure}[H]
   \centering 
   \includegraphics[scale=0.75]{menu/Yoshimi/yoshimi-menu-exit-parameters-changed.jpg}
   \caption[Yoshimi Menu, Exit]{Yoshimi Menu, Exit}
   \label{fig:yoshimi_change_exit}
\end{figure}

% We moved some out-of-date menu entries into the following document, and
% created additional sub-sections to include, with up-to-date information.
%
% \include{yum_menu_instruments_old}

\input{yum_menu_instruments}

\input{yum_menu_patch_sets}

% Removed.  Basically replaced by the Patch Sets menu.
%
% \subsection{Menu / Parameters}

\subsection{Menu / Paths}
\label{subsec:menu_paths}

   This menu entry provides a more direct way to set up the Bank Root and
   the Presets directories.  It contains the following items:

   \begin{enumber}
      \item \textbf{Bank Root Dirs...}
      \item \textbf{Preset Dirs...}
   \end{enumber}

   \paragraph{Bank Root Dirs...}
   The Paths Bank Root Dirs dialog is described in
   \sectionref{subsubsec:menu_patch_sets_patch_bank_roots},
   which shows
   \figureref{fig:bank_root_paths}, and describes this dialog in full.

   \paragraph{Preset Dirs...}
   The \textsl{Yoshimi} preset directories are the locations where
   presets can be found.  When first installed, the system
   preset directory is one of the following, depending on whether
   \textsl{Yoshimi} was installed via a package manager or via source code:

   \begin{verbatim}
      /usr/share/yoshimi/presets
      /usr/local/share/yoshimi/presets
   \end{verbatim}
   
   The user can provide additional directories for the presets, up to a limit
   of 128 directories (the same limit as for roots and banks).
   These directories are useful for containing copies of the system
   presets that one can modify safely, and for providing custom
   presets designed by the user.

   The following items are provided by the preset directory settings:

   \begin{enumber}
      \item \textbf{Preset list}
      \item \textbf{Add preset directory...}
      \item \textbf{Remove preset directory...}
      \item \textbf{Make default}
      \item \textbf{Save and Close}
      \item \textbf{Close Unsaved}
   \end{enumber}

\begin{figure}[H]
   \centering 
   \includegraphics[scale=0.75]{menu/Yoshimi/yoshimi-settings-presets-dirs.jpg}
   \caption[Preset Dirs Tab]{Yoshimi Preset Dirs Dialog}
   \label{fig:yoshimi_presets_dirs_tab}
\end{figure}

   \setcounter{ItemCounter}{0}      % Reset the ItemCounter for this list.

   \itempar{Preset list}{Yoshimi Presets!Preset List}
   This interface element contains a list of preset directories.
   By default, the only directory present is the installed preset directory.
   For example, \texttt{/usr/share/yoshimi/presets}.
   
   \textbf{Tip:}
   \index{tip!preset directory}
   If there is no directory in this dialog, then one must
   add one, otherwise there is no place to store the presets.
   So make this one of the first items specified when first running
   \textsl{Yoshimi}!

   Another example would be this project; let YOSHIMI-DOC be the directory
   where this project is stored.  Then one can add
   \texttt{YOSHIMI-DOC/config/yoshimi/presets} to this list, using the
   button described next.

   \itempar{Add preset directory...}{Yoshimi Presets!Add Directory}
   Use this button and dialog to add a preset directory to the list, for
   easy access.

   Press the \textbf{Add preset directory...} button, revealing the
   following dialog.

\begin{figure}[H]
   \centering 
   \includegraphics[scale=0.75]{menu/Yoshimi/presets-add-a-preset-directory.jpg}
   \caption[Add Preset Directory]{Add a Preset Directory}
   \label{fig:presets_add_a_preset_directory}
\end{figure}

   Navigate to the desired directory, select it, and press the \textbf{Ok}
   button.  (There is no need to press the \textbf{Save and Close} button;
   the directory is added as soon as \textsl{OK} is clicked.  However, one
   tends to want to click it anyway, to be sure.)
   \textsl{Important}:  Restart \textsl{Yoshimi} to use the preset directory.

   \itempar{Remove preset directory...}{Yoshimi Presets!Remove Directory}
   Select one of the preset directories in the preset list, then press this
   button to remove the preset directory from the list of preset
   directories.  It is removed immediately, with no need to confirm the
   deletion, click an OK button, or click a Save button.

   \itempar{Make default presets}{Yoshimi Presets!Make Default}
   Make Default Presets Directory.
   Select one of the preset directories in the preset list, then press this
   button to make the preset directory the default preset directory.
   It should be a directory for which one has write permissions.
   By default, it is \texttt{\textasciitilde/.config/yoshimi/presets}.

\subsection{Menu / Scales}
\label{subsec:menu_scales}

   \textsl{Yoshimi} is a microtonal synthesizer, and is capable of a wide
   range of microtonal scales.

   At present, we're not too experienced with this feature.

\begin{figure}[H]
   \centering 
   \includegraphics[scale=0.9]{menu/yoshimi-menu-scales.jpg}
   \caption{Yoshimi Menu, Scales}
   \label{fig:yoshimi_menu_scales}
\end{figure}

   \begin{enumber}
      \item \textbf{Show Settings...}
      \item \textbf{Load...}
      \item \textbf{Save...}
      \item \textbf{Recent Scales...}
      \item \textbf{Clear}
   \end{enumber}

\subsubsection{Menu / Scales / Show Settings}
\label{subsec:menu_scales_show}

\begin{figure}[H]
   \centering 
   \includegraphics[scale=0.75]{menu/Scales/scale-settings-microtonal.jpg}
   \caption{Yoshimi Menu, Scales Settings}
   \label{fig:yoshimi_menu_scales_settings}
\end{figure}

\paragraph{Scales Basic Settings}
\label{paragraph:menu_scales_basic_settings}

   This item controls the micro-tonal capabilities of \textsl{Yoshimi} and
   some other settings related to tuning. 
   The last entry in the tunings list represents one octave.
   All other notes are deduced from these settings.

   \setcounter{ItemCounter}{0}      % Reset the ItemCounter for this list.

   \itempar{Microtonal}{Enable Microtonal}
   Enable Microtonal Scales.
   When disabled, the synthesizer will use equal-temperament, 12 notes per
   octave.  Otherwise, one can input any scale one desires.

   Values: \texttt{Off*, On}

   \itempar{"A" Freq}{"A"}
   Frequency of the "A" Note.
   Sets the frequency of the "A" key. The standard is 440.0 Hz.

   Values: \texttt{440*}

   \itempar{"A" Note}{"A" MIDI}
   Sets the MIDI Value of the "A" Note.

   Values: \texttt{0 to 127, 69*}

   \itempar{Invert Keys}{keys}
   Allows the keys to be inverted, so that higher-valued keys play lower
   notes.

   Values: \texttt{Off*, On}

   \itempar{Center}{center}
   Center for Inverted Keys.
   This is the center where the notes frequencies are turned upside-down if
   \textbf{Invert keys} is enabled.
   If the center is 60, the note 59 will become 61, 58 will become 62, 61
   will become 59, and so on.

   Values: \texttt{0 to 127, 60*}

   \itempar{Name}{mapping}
   Name of the Mapping.
   For example, the default mapping is called "12tET".

   \itempar{Shift}{key shift}
   Key Shift.
   Shift the scale. If the scale is tuned to A, one can easily tune it to
   another key.

   Values: \texttt{-63 to 64, 0*}

   \itempar{Comment}{comment}
   Comment for Key Mapping.
   Provides a comment or a description of the scale.
   By default, this is "Equal Temperament 12 notes per octave".

   \itempar{Tunings}{tuning}
   Tunings.
   Here one can input a scale by entering all the tunings for one octave. 
   One can enter the tunings in two ways: 

   \begin{enumber}
      \item As the number of cents (1200 cents=1 octave) as a float number
         like "100.0", "123.234"
      \item As a proportion like "2/1" which represents one octave, "3/2" a
         perfect fifth, "5734/6561".  "2/1" is equal to "1200.0" cents.
   \end{enumber}

   The default is a series of values:
   \texttt{0100.0, 0200.0, ..., 1100.0, 2/1}.

   \itempar{Retune}{retune}
   Retune button.
   This button retunes the synthesizer according to the settings of
   the \textbf{Tunings} and \textbf{Keyboard Mapping} lists.
   All other changes operate immediately.

   \itempar{nts./oct}{Notes per Octave}
   Notes Per Octave.

   Values: \texttt{12*} (range not yet known)

   \itempar{Import .SCL file}{scale file}
   Import Scala files.
   Scala is a powerful application for experimentation with musical tunings
   (intonation scales, micro-tonal,...etc.). From its home page \cite{scala},
   one can download more than 2800 scales which one can import directly into
   \textsl{Yoshimi}.  Note that the zip file \textsl{must} be unzipped with
   the \texttt{-aa} ("autoconvert") option.  However, we have converted it to a
   a much smaller tar file (it crams 18 Mb of files into an sub-500 Kb file),
   which can be untarred directly into
   one's configuration directory to create a
   \texttt{\textasciitilde/.config/yoshimi/scales} directory chock full of
   scales.

    \begin{verbatim}
      $ cd ~/.config/yoshimi/
      $ tar xf yoshimi-scales.tar.xz
    \end{verbatim}

    Note that a Scala file cannot be loaded directly.  It must be imported.

\begin{figure}[H]
   \centering 
   \includegraphics[scale=0.75]{menu/Scales/import-scl-file.jpg}
   \caption{Yoshimi Menu, Scales, Import File}
   \label{fig:yoshimi_menu_scales_import_file}
\end{figure}

   \itempar{Import .scl file}{scl file}
   This item is a standard file dialog for reading
   a \texttt{*.scl} file.

\begin{figure}[H]
   \centering 
   \includegraphics[scale=0.75]{menu/Scales/import-kbm-file.jpg}
   \caption{Yoshimi Menu, Scales, Import Keyboard Map}
   \label{fig:yoshimi_menu_scales_import_keyboard_map}
\end{figure}

   \itempar{Import .kbm file}{kbm file}
   This item is a standard file dialog for reading
   a \texttt{*.kbm} file.

   \itempar{Close, Scales Dialog}{close scales}

   The items related to the \textbf{Keyboard Mapping} are discussed
   separately in the next section.

\paragraph{Keyboard Mapping}
\label{paragraph:menu_scales_keyboard_mapping}

   One can set the MIDI keyboard mapping to scale-degree mapping.
   This is used if the scale has more or less than 12 notes/octave.
   One can enable the mapping by pressing the \textbf{ON} check-box.

   \begin{enumber}
      \item \textbf{ON}
      \item \textbf{First Note}
      \item \textbf{Last Note}
      \item \textbf{Midle Note}
      \item \textbf{Map}
      \item \textbf{Map Size}
   \end{enumber}

   \setcounter{ItemCounter}{0}      % Reset the ItemCounter for this list.

   \itempar{ON}{scales!on}

   Values: \texttt{Off*, On}

   \itempar{First Note}{scales!first note}
   First MIDI Note Number.
   Keys below this value are ignored.

   Values: \texttt{0* to 127}

   \itempar{Last Note}{scales!last note}
   Last MIDI Note Number.
   Keys above this value are ignored.

   Values: \texttt{0 to 127*}

   \itempar{Middle Note}{scales!middle note}
   Middle note where scale-degree 0 is mapped to;
   the middle note represents the note where the formal octave starts.
   Note the misspelling of "middle".

   Values: \texttt{0 to 127*}

   \itempar{Map}{scales!map}
   Scales map.  This is the input field where the mappings are entered.
   The numbers represent the order (degree) entered on
   \textbf{Tunings Input} field, with the first value being 0.
   This number must be less than the number of notes per octave (since
   the values start at 0).
   If one doesn't want a key to be mapped, one enters an "x" instead of a
   number.

   Values: \texttt{0 to 11}

   \itempar{Map Size}{scales!map size}
   Provides the size of the scale-map.

   Values: \texttt{12}

   In the current version of \textsl{Yoshimi}, up to 25 recently used scales are
   now stored in the new history file
   (\texttt{yoshimi.history}), and can be quickly reinstalled with a
   mini-browser in exactly the same way as patch sets.

\subsubsection{Menu / Scales / Load}
\label{subsec:menu_scales_load}

\begin{figure}[H]
   \centering 
   \includegraphics[scale=0.75]{menu/Scales/open-scales.jpg}
   \caption{Yoshimi Menu, Open Scales}
   \label{fig:yoshimi_menu_open_scales}
\end{figure}

   If the format of the scales file is not correct, then the following prompt
   will appear.

\begin{figure}[H]
   \centering 
   \includegraphics[scale=0.75]{menu/Scales/failed-to-load-scl-file-vice-xsz.jpg}
   \caption{Yoshimi Menu, Failed to Load Scales}
   \label{fig:yoshimi_menu_failed_to_load_scales}
\end{figure}

\subsubsection{Menu / Scales / Save}
\label{subsec:menu_scales_save}

   This dialog opens a stock file-dialog to allow the saving of
   \texttt{*.xsz} files.
   If one has imported a scale from an \texttt{*.scl} file, and one
   wants direct access to it from the \textbf{Scales / Recent Scales} menu, one
   must first save the imported file as an \texttt{*.xsz} files.

\subsubsection{Menu / Scales / Recent Scales...}
\label{subsec:menu_scales_recent_scales}

   Once some scale file has been loaded (or imported and saved), then it
   becomes available in this list, for more convenient access to it.

\begin{figure}[H]
   \centering 
   \includegraphics[scale=0.75]{menu/Scales/recent-scales.png}
   \caption{Yoshimi Menu, Recent Scales}
   \label{fig:yoshimi_menu_recent_scales}
\end{figure}

\subsubsection{Menu / Scales / Clear}
\label{subsec:menu_scales_clear}

   This menu entry simply resets the \textsl{Yoshimi} scale back to it default,
   the twelve-tone equally-tempered scale.

\subsection{Menu / State}
\label{subsec:menu_state}

   \textsl{Yoshimi} state is saved in files with the extension
   \texttt{.state}.  These files are also XML files.

   \textsl{Yoshimi} "state" will include the system settings, as well as all
   patches. Some of these settings (such as Oscillator Size) can only be
   realised on a reload if loading via the command line at startup. However,
   the ones that can't be dynamically changed will be set, and if the
   configuration is then saved, will be set on the next load -- this is not
   ideal. We are working on it, but don't expect improvements soon!

   \begin{enumber}
      \item \textbf{Load}
      \item \textbf{Save}
      \item \textbf{Recent States...}
   \end{enumber}

   As the following figures show, state files are normally stored in the
   user's \texttt{.config/yoshimi/yoshimi.state} file.

   \setcounter{ItemCounter}{0}      % Reset the ItemCounter for this list.

   \itempar{State Load}{State!Load}
   Provides a way to load a previously-saved \textsl{Yoshimi} state file.

\begin{figure}[H]
   \centering 
   \includegraphics[scale=0.75]{menu/State/load-state-file.jpg}
   \caption{Yoshimi Menu, State Load}
   \label{fig:yoshimi_menu_state_load}
\end{figure}

   This item is a standard \textsl{Yoshimi} file dialog.
   Note that XML text is shown in the preview pane, but, if XML compression is
   set, then a large question mark is all that would be shown.

   \itempar{State Save}{State!Save}
   Provides a way to save a new or modified \textsl{Yoshimi} state file.

\begin{figure}[H]
   \centering 
   \includegraphics[scale=0.75]{menu/State/save-state-file.jpg}
   \caption{Yoshimi Menu, State Save}
   \label{fig:yoshimi_menu_state_save}
\end{figure}

   This item is a standard \textsl{Yoshimi} file dialog.

   \itempar{Recent States}{State!Recent}
   This item brings up a list of states to select.
   The Recent States dialog will not come up if there are no states that have
   yet been managed.

%-------------------------------------------------------------------------------
% vim: ts=3 sw=3 et ft=tex
%-------------------------------------------------------------------------------
