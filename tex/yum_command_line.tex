%-------------------------------------------------------------------------------
% yum_command_line
%-------------------------------------------------------------------------------
%
% \file        yum_command_line.tex
% \library     Documents
% \author      Chris Ahlstrom
% \date        2015-09-06
% \update      2017-08-12
% \version     $Revision$
% \license     $XPC_GPL_LICENSE$
%
%     Provides the description of the no-gui mode of Yoshimi.
%
%-------------------------------------------------------------------------------

\section{The Yoshimi Command Line Interface}
\label{sec:command_line}

   \index{CLI}
   \index{cmd}
   \index{command line}
   \textsl{Yoshimi} provides a "no GUI" or "command-line" mode of operation
   where many aspects of the application can be controlled via text commands.
   This mode is useful for blind people and for programmers, for example.  To
   access this mode, add the \texttt{-i} or \texttt{--no-gui} command-line
   option when starting \textsl{Yoshimi} on the command-line.  But note that,
   when starting \textsl{Yoshimi} on the command-line, the "command-line" mode
   of operation is available at the same time as the GUI, as well.

   One of the main features of recent \textsl{Yoshimi} releases
   is improved non-GUI accessibility.  In fact,
   \textsl{Yoshimi} can run with neither GUI nor CLI input access. Working
   purely as a hidden MIDI device, a daemon of sorts. To enable a tidy close,
   there is a new short-form NRPN. Just send 68 to both MSB and LSB (CC 99 and
   CC98).

   In a command line environment, almost all the 'running' commands are
   available, but none of the instrument editing ones are... yet!  One can
   decide what MIDI/audio setup is wanted, list and set roots and banks, load
   instruments into any part, change a part's channel, set main volume and key
   shift, and set up vector control.  A number of first-time defaults have been
   changed to make this feature easier.

   When starting from the command line, an argument can be included for a new
   root path to be defined to point to a set of banks fetched from elsewhere.
   This will be given the next free ID. A future upgrade will allow the ID to
   be set to any valid one when it is created, mirroring the GUI behaviour.

   Once running, almost all configuration can be done within the terminal
   window.  There is also extensive control of roots, banks, parts and
   instruments including the ability to list and set all of these.

   Additional controls that are frequently taken for granted in the GUI, but
   otherwise get forgotten, are \textsl{master key shift} and \textsl{master
   volume}.

   The whole of vector control, and much of MIDI-learn, is also exposed to the
   command line.

   The command-line mode provides extensive error checking and feedback.
   Note the change in nomenclature from "Parameters" to "Patch Set", which is
   visible in the main screen, and also reflected in the command line.
   \index{command level}
   The prompt will always show what \textsl{command level}
   one is on, along with relevant information.
   At the CLI prompt, when effects are being managed, the preset number is also
   shown on the prompt so you'll typically see something like:

   \begin{verbatim}
      yoshimi part 2 FX 1 Rever-7 >
   \end{verbatim}

   One will also get a confirmation message, but, for clarity,
   those are not included in the examples below.
   Here is an example session:

   Starting from the \texttt{yoshimi} prompt:

   \begin{verbatim}
      yoshimi> s p 2 pr 107
      yoshimi part 2 >
   \end{verbatim}

   This command \textbf{s}ets \textbf{p}art number 2 to \textbf{pr}ogram
   number 107 from the \textsl{current} instrument bank.
   \textsl{Yoshimi} is now on part 2 as the current part (indicated by the
   prompt), and all subsequent commands will relate to this "level".
   At this level, one can change the current part simply with:

   \begin{verbatim}
      yoshimi part 2 > s 4
      yoshimi part 4 >
   \end{verbatim}

   \textsl{Yoshimi} is now on part number 4. Now set an effect:

   \begin{verbatim}
      yoshimi part 4 > s ef ty re
      yoshimi part 4 FX 1 rever-1 >
   \end{verbatim}

   This command \textbf{s}ets the part's \textbf{ef}fect 1 (implicit) to
   \textbf{ty}pe \textbf{re}verb.

   Note that many settings parameters are optional, and if you omit them,
   either a default or last-used value will be assumed. Also, names are
   truncated to 5 characters so the prompt line doesn't get unmanageably long.

   From here you can set a preset for this effect:

   \begin{verbatim}
      yoshimi part 4 FX 1 rever > s pre 3
   \end{verbatim}

   Since V 1.5.0 the \textbf{pre}sets have been shown in the prompt, and one
   will still get a confirmation message.

   Settings that follow in a direct command "path" through several levels
   can be made all at once, and one will be left at the appropriate level.
   Thus, summarizing some of the above commands:

   \begin{verbatim}
      s p 4 ef 2 ty re
      yoshimi part 4 FX 2 rever >
   \end{verbatim}

   One cannot combine \texttt{type} and \texttt{preset} as they
   are both at the same level.  To go back one level, use the
   ".." command:

   \begin{verbatim}
      yoshimi part 4 FX 2 rever > ..
      yoshimi part 4 >
   \end{verbatim}

   To go back to the top command level, use the "/" command:

   \begin{verbatim}
      yoshimi part 4 > /
      yoshimi >
   \end{verbatim}

   These two special level-movement commands can also be put on the front of
   any other command.  Starting where we were before:

   \begin{verbatim}
      yoshimi part 4 FX 2 rever > .. s vol 70
      yoshimi part 4 >
   \end{verbatim}

   Part 4 volume is now at 70, and \textsl{Yoshimi} is once again at the
   "part level", not the "part FX level".  Also note that the space after
   the ".." is optional.

   The help menus and lists are also partially context sensitive. This
   feature should help avoid clutter and confusion.

   As well as an immediate history, \textsl{Yoshimi} maintains a single command
   history file for all instances of \textsl{Yoshimi} that records any
   non-duplicated loads or save.  Thus, provided one makes a normal
   command-line exit, the last commands will be available on the next run of
   \textsl{Yoshimi}.

   When loading external files from the command line, there is an alternative
   to entering the full name if \textsl{Yoshimi} has already seen this file and
   it is in the history list. In this situation you enter '@' followed by the
   list number.

   \begin{verbatim}
      yoshimi> l h v
       
      Recent Vectors:
      1  /home/will/another.xvy
      2  /home/will/Subtle.xvy
      3  /home/will/excellent.xvy
      4  /home/will/yoshimi-code/examples/CoolSound.xvy

      yoshimi> lo ve @4
      Main Vector Loaded /home/will/yoshimi-code/examples/CoolSound.xvy to chan 1
   \end{verbatim}

   \index{cmd!at-sign}
   The 'recent history' lists can now load MIDI-learned files, patchsets, or
   vector files numerically from the associated list instead of having to type
   the names out.  This uses the '@' (list number) operator.

   Originally this section described the currently implemented commands,
   but as the command set is very much a moving target, it is simpler to just
   ask one to run \textsl{Yoshimi} and type the "?" command.

   Commands with "*" in the description need the setup to be saved,
   and \textsl{Yoshimi} restarted to be activated. 

   Note that \textsl{Yoshimi}'s command-line can also load and save states,
   patchsets, and scales, and can list recent histories.
   Vector load and save is also supported from the command-line.
   That's a complete vector set, with all mappings, instruments, etc.
   One can independently decide which
   channel to load and save from, so that one
   can actually build up a vector set in
   (say) channel 3, then later decide to use it in channel 7.
   It has the extension \texttt{.xvy}, standing for "Xml/Vector/Yoshimi".
   It will eventually be integrated with the saved states.

   Another small detail is that all of the minimum command-line
   abbreviations are now \textbf{C}apitalised in the help list.     

   More features will be added, and the organisation of them may be changed
   slightly.  If any configuration settings are changed, either at the
   command-line or in the graphical user-interface, one will be given a warning
   when exiting, with the option to continue running so one can save the
   changes.

\subsection{Command Level}
\label{subsec:command_line_command_level}

   A command level is simply a position in the hierarchy of commands that cover
   some aspect of \textsl{Yoshimi} functionality.

   The levels that currently exist are:

   \begin{itemize}
      \item \textbf{Top Level}
      \item \textbf{System Effects}
      \item \textbf{Insertion Effects}
      \item \textbf{Part}
      \item \textbf{Part Effects}
      \item \textbf{Scales (microtonal)}
      \item \textbf{Vector}
   \end{itemize}

Ones that we're pretty sure will be added are:

   \begin{itemize}
      \item \textbf{Controllers}
      \item \textbf{Addsynth}
      \item \textbf{Addsynth Voice}
      \item \textbf{Subsynth}
      \item \textbf{Padsynth Harmonics}
      \item \textbf{Padsynth Envelopes}
   \end{itemize}

   Any level that has a direct numerical content will be changeable simply with
   "set (n)" once you are at that level.  The level will, of course, be
   indicated by the text in the \textsl{Yoshimi} prompt.

   For example, one can have 1 to 16 vector channels, so from the
   \textsl{Top} level, the following command
   will return the default  (1 or the last-used number):

   \begin{verbatim}
      set vector
      s ve
   \end{verbatim}

   Given this level (the \textsl{Vector} level), the following commands...

   \begin{verbatim}
      set 5 
      s 5
   \end{verbatim}

   ...will then switch to vector channel 5.
   However, at the start, one could have gone straight there with:

   \begin{verbatim}
      set vector 5
      s ve 5
   \end{verbatim}

   A more detailed discussion of command-line vector control is presented in
   \sectionref{subsection:vector_command_line}.

\subsection{Command Tables}
\label{subsec:command_line_command_table}

   When running from the command line, these commands
   (see \tableref{table:yoshimi_text_commands_part_1}
   and \tableref{table:yoshimi_text_commands_part_2})
   can be entered after the 'up and running' message.
   The commands are \textsl{not} case-sensitive.
   The commands can be abbreviated to the first three letters of each command,
   or, in some cases, just one letter.
   The commands that are available depend on the current "context" of the
   command line.
   There are a group of commands that are always available. These are

   \begin{itemize}
      \item \texttt{\textbf{?}} or \texttt{\textbf{help}}
      \item \texttt{\textbf{L}ist}
      \item \texttt{\textbf{RES}et}
      \item \texttt{\textbf{EX}it}
   \end{itemize}

   Apart from these basic commands, the command line works on a system of
   context levels, and normally only the commands relevant to that "level"
   will be available.

   This whole section needs a rewrite unfortunately, as it has changed
   dramatically. The good news is that the new format has the seal of approval
   from blind users, and so is very unlikely to change. However, new list and
   context levels will be added once Will starts implementing the part engine
   controls in a near-future version.

   We will describe the new command lists here. These lists are all relative to
   a particular context, and are what one will get if one simply enters
   \textbf{?} while at that level.
   However the command lists can all be called \textsl{specifically} from any
   level. From any higher level, \textbf{? ?} will show the top level one.

%  ------------------------------------------------------------------------
%     START OF REPLACEMENT SECTION
%  ------------------------------------------------------------------------

\subsubsection{Top Command List}
\label{subsec:command_line_top_command_list}

   Top level. First, one gets the default options, always available.
   Then there are several options that have ellipsis (...);
   these are the context submenus.
   After that come all the actual top level controls; there are still a lot!

   \begin{verbatim}
      yoshimi> ?
   \end{verbatim}

   First, note that there are a number of commands common to all command levels.
   We describe them only here.

   \begin{table}[H]
      \centering
      \caption{Yoshimi Common Commands}
      \label{table:yoshimi_text_common_commands}
      \begin{tabular}{l l}

\texttt{?,  Help} &
   Show commands.  Also note specialized versions such as \textbf{? list}. \\
\texttt{STop} &
   All sound off.  Stop!  Panic! \\
\texttt{RESet} &
   Return to start-up conditions (if answering 'y' to the prompt). \\
\texttt{EXit} &
   Tidy up and close Yoshimi (if 'y' to the prompt). \\
\texttt{..} &
   Step back one command level. \\
\texttt{/} &
   Step up to top command level. \\

      \end{tabular}
   \end{table}

   \begin{table}[H]
      \centering
      \caption{Yoshimi Top-Level Commands}
      \label{table:yoshimi_text_toplevel_commands}
      \begin{tabular}{l l}

\texttt{Part [n1] ...} &
   Start part operations.  \\
\texttt{VEctor [n1] ...} &
   Start vector operations. \\
\texttt{SCale ...} &
   Scale (microtonal) operations. \\
\texttt{LIst ...} &
   Show various available parameters. \\
\texttt{LOad ...} &
   Load various files. \\
\texttt{SAve ...} &
   Save various files. \\
\texttt{COnfig ...} &
   Engage configuration settings. \\
\texttt{ADD} &
   Add paths and files. \\
\texttt{ADD Root [s]} &
   Add a root path [s] to the root list. \\
\texttt{ADD Bank [s]} &
   Add a bank [s] to the current root. \\
\texttt{REMove} &
   Remove paths, files, and entries. \\
\texttt{REMove Root [n]} &
   De-list root path ID [n]. \\
\texttt{REMove Bank [n]} &
   Delete bank ID [n] (and all its contents) from the current root. \\
\texttt{REMove MLearn [s] [n]} &
   Delete MIDI learned values: 'ALL' removes the whole list, or select a line
   using the '@n' construct. \\
\texttt{Set / Read} &
   Set or read all main parameters. \\
\texttt{Set/read Root [n]} &
   Read the current root path or set it to ID [n]. \\
\texttt{Set/read Bank [n]} &
   Read the current bank or set the current bank to ID [n]. \\
\texttt{Set/read MLearn [n] [s]} &
   MIDI learned line [n] control
   ([s] = MUte, CC, CHan, MIn, MAx, LImit, BLock) Enable (other). \\
\texttt{SYStem effects [n]} &
   System effects for editing. \\
\texttt{SYStem effects SEnd [n2] [n3]} &
   Send system effect to effect [n2] at volume [n3]. \\
\texttt{SYStem effects preset [n2]} &
   Set effect preset to number [n2]. \\
\texttt{INSert effects [n1]} &
   Add an nsertion effect [n1] for editing. \\
\texttt{INSert effect SEnd [s]/[n2]} &
   Set effect [s] where [n2] = (Master, Off or part number). \\
\texttt{Insert effect PREset [n2]} &
   Set numbered effect preset to [n2]. \\
\texttt{AVailable [n]} &
   List the available parts for given [n] (16, 32, 64). \\
\texttt{Volume [n]} &
   Set Master volume to [n]. \\
\texttt{SHift [n]} &
   Master key shift in semitones [n] (0 no shift). \\
\texttt{DEtune [n]} &
   Set the master fine detune to [n]. \\
\texttt{SOlo [n]} &
   Set the channel 'solo' switcher t [n]
   (0 = off, 1 = row, 2 = col, 3 = loop) \\
\texttt{SCC [n]} &
   Set incoming 'solo' channel number to [n]. \\
\texttt{TIMes [s]} &
   Time display on instrument load message (ENable / other). \\
\texttt{'...'} &
   Help sub-menu. \\

      \end{tabular}
   \end{table}


\subsubsection{Part Command List}
\label{subsec:command_line_part_command_list}

   Next we have the part list. It's now much clearer than it was! Notice it was
   called from the top level with '? part':

   \begin{verbatim}
      yoshimi> ? part
   \end{verbatim}

   In the table that follow, we leave off the following commands, already noted
   above in the first table
   (see \sectionref{subsec:command_line_top_command_list}):
   \textbf{?}, \textbf{Help}, \textbf{STop}, \textbf{RESet},
   \textbf{EXit}, \textbf{..}, and \textbf{/}.

   Part: [n1] = part number

   \begin{table}[H]
      \centering
      \caption{Yoshimi Part Commands}
      \label{table:yoshimi_text_part_commands}
      \begin{tabular}{l l}

\texttt{ENable} &
   Enables the part. \\
\texttt{DIsable} &
   Disables the part. \\
\texttt{Volume [n2]} &
   Set the part volume to [n2]. \\
\texttt{Pan [n2]} &
   Set part panning to [n2]. \\
\texttt{VElocity [n2]} &
   Set part velocity sensing sensitivity to [n2]. \\
\texttt{OFfset [n2]} &
   Set velocity sense offest to [n2]. \\
\texttt{POrtamento [s]} &
   Set portamento. ([s] = Enable, other values disable it). \\
\texttt{Mode [s]} &
   Set key mode ([s] = Poly, Mono, Legato). \\
\texttt{Note [n2]} &
   Set note polyphony value to [n2]. \\
\texttt{SHift [n2]} &
   Set key shift semitones to [n2] (0 no shift). \\
\texttt{MIn [n2]} &
   Set the minimum MIDI note value to [n2]. \\
\texttt{MAx [n2]} &
   Set the maximum MIDI note value to [n2]. \\
\texttt{EFfects [n2]} &
   Set effects for editing to [n2]. Sets the effect number? \\
\texttt{Effects Type [s]} &
   Set the effect type to [s]. \\
\texttt{Effects PREset [n3]} &
   Set the numbered effect preset to [n3]. \\
\texttt{Effects Send [n3] [n4]} &
   Send part to system effect [n3] at volume [n4]. \\
\texttt{PRogram [n2]} &
   Loads instrument ID [n2]. \\
\texttt{NAme [s]} &
   Sets the display name the part can be saved with to [s]. \\
\texttt{Channel [n2]} &
   Set the part's MIDI channel ([n2] > 31 disables, [n2] > 15 note off only). \\
\texttt{Destination [s2]>} &
   JACK audio destination ([s2] = Main, Part, Both) \\

      \end{tabular}
   \end{table}

\subsubsection{Vector Command List}
\label{subsec:command_line_vector_command_list}

   The vector list is called from the part level with '? ve'.

   \begin{verbatim}
      yoshimi part 1 on> ? ve
   \end{verbatim}

   In the table that follows, we leave off the commands already noted
   above in the first table
   (see \sectionref{subsec:command_line_top_command_list}).

   Vector: [n1] = base channel:

   \begin{table}[H]
      \centering
      \caption{Yoshimi Vector Commands}
      \label{table:yoshimi_text_vector_commands}
      \begin{tabular}{l l}

\texttt{VEctor [n1]} &
   Vector channel operations. \\
\texttt{[X/Y] CC [n2]} &
   CC [n2] is used for theX or Y axis sweep. \\
\texttt{[X/Y] Features [n2] [s]} &
   Sets X or Y features [n2] = 1 to 4 ([s] = Enable, Reverse, other yields off).  \\
\texttt{[X] PRogram [l/r] [n2]} &
   Sets X program change ID [n2] for left or right part. \\
\texttt{[Y] PRogram [d/u] [n2]} &
   Sets Y program change ID [n2] forL DOWN or UP part. \\
\texttt{[X/Y] Control [n2] [n3]} &
   Sets [n3] CC to use for X or Y feature [n2] = 2 to 4. \\
\texttt{Off} &
   Disables vector control for this channel. \\
\texttt{Name [s]} &
   Text name for this complete vector.  \\

      \end{tabular}
   \end{table}

\subsubsection{Scales Command List}
\label{subsec:command_line_scales_command_list}

   A completely new one is the scales list:

   \begin{verbatim}
      yoshimi> ? sc
   \end{verbatim}

   In the table that follow, we leave off the following commands, already noted
   above in the first table
   (see \sectionref{subsec:command_line_top_command_list}):
   \textbf{?}, \textbf{Help}, \textbf{STop}, \textbf{RESet},
   \textbf{EXit}, \textbf{..}, and \textbf{/}.

   \begin{table}[H]
      \centering
      \caption{Yoshimi Scales Commands}
      \label{table:yoshimi_text_scales_commands}
      \begin{tabular}{l l}

\texttt{FRequency [n]} &
   Set the 'A' note's actual frequency to [n]. \\
\texttt{NOte [n]} &
   Set the 'A' note's number to [n]. \\
\texttt{Invert [s]} &
   Invert the entire scale ([s] = enable, other values = off) \\
\texttt{CEnter [n]} &
   Set the note number of the key's center to [n]. \\
\texttt{SHift [n]} &
   Shift the entire scale up or down by [n]. \\
\texttt{SCale [s]} &
   Activate microtonal scale ([s] = enable, other values = off). \\
\texttt{MApping [s]} &
   Activate keyboard mapping ([s] = enable, other values = off). \\
\texttt{FIrst [n]} &
   Set the first note number to be mapped to [n]. \\
\texttt{MIddle [n]} &
   Set the middle note number to be mapped to [n]. \\
\texttt{Last [n]} &
   Set the last note number to be mapped to [n]. \\
\texttt{Tuning [s] [s2]} &
   Set the CSV tuning values (n1.n1 or n1/n1, n2.n2 or n2/n2, etc.);
   s2 = 'IMPort' from named file. \\
\texttt{Keymap [s] [s2]} &
   Set the CSV keymap (n1, n2, n3, etc.); s2 = 'IMPort' from named file. \\
\texttt{NAme [s]} &
   Internal name for this scale. \\
\texttt{DEscription [s]} &
   Description of this scale. \\
\texttt{CLEar} &
   Clear all settings and revert to the standard scale. \\

      \end{tabular}
   \end{table}

\subsubsection{Help List}
\label{subsec:command_line_help_list}

   You can now clearly see which items can be listed with:

   \begin{verbatim}
      yoshimi> ? li
      yoshimi> ? list
      yoshimi> help
   \end{verbatim}

   In the table that follow, we leave off commands noted above
   (see \sectionref{subsec:command_line_top_command_list}).

   \begin{table}[H]
      \centering
      \caption{Yoshimi Help Commands}
      \label{table:yoshimi_text_help_commands}
      \begin{tabular}{l l}

\texttt{Roots} &
   List all available root paths. \\
\texttt{Banks [n]} &
   List the banks in root ID [n] or the current root. \\
\texttt{Instruments [n]} &
   List instruments in bank ID [n] or current bank. \\
\texttt{Parts} &
   List parts with instruments installed. \\
\texttt{Vectors} &
   List settings for all enabled vectors. \\
\texttt{Settings} &
   List dynamic settings. \\
% Moved to new Scales section:
% \texttt{Tuning} &
%    Microtonal scale tunings. Scales? \\
% \texttt{Keymap} &
%    Microtonal scale keyboard map.  Scales? \\
\texttt{Config} &
   current configuration \\
\texttt{MLearn [s[n]]} &
   MIDI learned controls ('@n' for full details on one line). \\
\texttt{History [s]} &
   Show recent files ([s] = Patchsets, SCales, STates, Vectors, MLearn). \\
\texttt{Effects [s]} &
   Show effect types ([s] = 'all' includes preset numbers and names). \\
\texttt{PREsets} &
   Show all the presets for the currently selected effect. \\

      \end{tabular}
   \end{table}

\subsubsection{Load/Save List}
\label{subsec:command_line_loadsave_list}

   And the same for load and save:

   \begin{verbatim}
      yoshimi> ? lo
      yoshimi> ? sa
   \end{verbatim}

   In the table that follow, we leave off the commands noted above
   (see \sectionref{subsec:command_line_top_command_list}).

   \begin{table}[H]
      \centering
      \caption{Yoshimi Load Commands}
      \label{table:yoshimi_text_load_commands}
      \begin{tabular}{l l}

\texttt{Instrument [s]} &
   Load instrument to current part from a named file [s]. \\
\texttt{SCale [s]} &
   Load scale settings from named file [s]. \\
\texttt{VEctor [n] [s]} &
   Load vector to channel n (or saved) from named file [s]. \\
\texttt{Patchset [s]} &
   Load complete set of instruments from named file [s]. \\
\texttt{MLearn [s]} &
   Load MIDI learned list from named file [s]. \\
\texttt{STate [s]} &
   Load all system settings and patch sets from named file [s]. \\

      \end{tabular}
   \end{table}

   \begin{table}[H]
      \centering
      \caption{Yoshimi Save Commands}
      \label{table:yoshimi_text_loadsave_commands}
      \begin{tabular}{l l}

\texttt{Instrument [s]} &
   Save current part to named file [s]. \\
\texttt{SCale [s]} &
   Save current scale settings to named file [s]. \\
\texttt{VEctor [n] [s]} &
   Save vector on channel n to named file [s]. \\
\texttt{Patchset [s]} &
   Save complete set of instruments to named file [s]. \\
\texttt{MLearn [s]} &
   Save midi learned list to named file [s]. \\
\texttt{STate [s]} &
   Save all system settings and patch sets to named file [s]. \\
\texttt{Config} &
   Save current configuration. \\

      \end{tabular}
   \end{table}

\subsubsection{Config List}
\label{subsec:command_line_config_list}

   Finally there is the new and shiny (and quite big) config:

   \begin{verbatim}
      yoshimi> ? con
   \end{verbatim}

   In the table that follow, we leave off the commands noted above
   (see \sectionref{subsec:command_line_top_command_list}).

   \begin{table}[H]
      \centering
      \caption{Yoshimi Config Commands}
      \label{table:yoshimi_text_config_commands}
      \begin{tabular}{l l}

\texttt{Oscillator [n]} &
   * Add/Pad size (power 2 256-16384). \\
\texttt{BUffer [n]} &
   * Internal size (power 2 16-4096). \\
\texttt{PAdsynth [s]} &
   Interpolation type (Linear, other = cubic). \\
\texttt{Virtual [n]} &
   Keyboard layout (0 = QWERTY, 1 = Dvorak, 2 = QWERTZ, 3 = AZERTY). \\
\texttt{Xml [n]} &
   Set the XML compression level to [n] (0-9). \\
\texttt{REports [s]} &
   Destination for reporting (Stdout, other = console). \\
\texttt{STate [s]} &
   * Autoload default at start (Enable; other = disable). \\
\texttt{Hide [s]} &
   Hide non-fatal errors (Enable; other = disable). \\
\texttt{Display [s]} &
   GUI splash screen (Enable; other = disable). \\
\texttt{Time [s]} &
   Add to instrument load message (Enable; other = disable). \\
\texttt{Include [s]} &
   Include XML headers on file load (Enable; other = disable). \\
\texttt{Keep [s]} &
   Include inactive data on all file saves (Enable; other = disable). \\
\texttt{Gui [s]} &
   * Run with GUI (Enable, Disable). \\
\texttt{Cli [s]} &
   * Run with CLI (Enable, Disable). \\
\texttt{MIdi [s]} &
   * Connection type (Jack, Alsa). \\
\texttt{AUdio [s]} &
   * Connection type (Jack, Alsa). \\
\texttt{ALsa Midi [s]} &
   * Name of ALSA MIDI source. \\
\texttt{ALsa Audio [s]} &
   * Name of ALSA audio hardware device. \\
\texttt{ALsa Sample [n]} &
   * ALSA sampling rate (0 = 192000, 1 = 96000, 2 = 48000, 3 = 44100). \\
\texttt{Jack Midi [s]} &
   * Name of JACK MIDI source. \\
\texttt{Jack Server [s]} &
   * Name of JACK server. \\
\texttt{Jack Auto [s]} &
   * Connect JACK on start (Enable; other = disable). \\
\texttt{ROot [n]} &
   Root CC (0 - 119, other disables). \\
\texttt{BAnk [n]} &
   Bank CC (0, 32, other disables). \\
\texttt{PRogram [s]} &
   MIDI program change enabling (0 is disable, other is enable). \\
\texttt{ACtivate [s]} &
   MIDI program change activates part (0 is off, other is on). \\
\texttt{EXtended [s]} &
   Extended program change (0 is off, other is enable). \\
\texttt{Quiet [s]} &
   Ignore 'reset all controllers' (Enable other). \\
\texttt{Log [s]} &
   Log incoming MIDI CCs (Enable other). \\
\texttt{SHow [s]} &
   GUI MIDI learn editor (Enable other). \\

      \end{tabular}
   \end{table}

'*' entries need to be saved and Yoshimi restarted to activate

%  ------------------------------------------------------------------------
%     END OF REPLACEMENT SECTION
%  ------------------------------------------------------------------------

%  ------------------------------------------------------------------------
%     START OF OBSOLETE SECTION
%  ------------------------------------------------------------------------

\iffalse
   The brief descriptions in the following table can be obtained using the
   "help" command in the \textsl{Yoshimi} command-line mode.  More detailed
   descriptions are given in the section following the table.

   The \texttt{paths} command no longer exists. Instead we have \texttt{add}
   and \texttt{remove}, so instead of \texttt{path add} it's \texttt{add root}.
   Also, one can now add and remove banks using the same structure.
   \texttt{paths show} has now been moved into lists as \texttt{list roots}.
   These changes make roots/banks/instruments more consistent.

   \begin{table}[H]
      \centering
      \caption{Yoshimi Text Commands, Part 1}
      \label{table:yoshimi_text_commands_part_1}
      \begin{tabular}{l l}

         \texttt{..} &
            Step back up one command level. \\

         \texttt{/} &
            Step back up to the top command level. \\

         \texttt{add bank [s]} &
            Add a new bank to the current root. \\

         \texttt{add root [s]} &
            Define a new root path and add it to the list. \\

         \texttt{remove bank [s]} &
            Delete the bank from the current root. \\

         \texttt{remove root [s]} &
            De-list the given root path. \\

         \texttt{list banks [n]} &
            List instruments in bank \textsl{n} or the current bank. \\

         \texttt{list effects [n]} &
            List effect types for \textsl[n] or for 'all'.  \\

         \texttt{list instruments [n]} &
            List all instruments in bank \textsl{n} or current bank. \\

         \texttt{list parts} &
            List number of parts available, and more. \\

         \texttt{list roots} &
            List all available root paths. \\

         \texttt{list setup} &
            Displays the dynamic system settings. \\

         \texttt{list history [s]} &
            Lists recent files (patchsets, scales, and states).
            If no parameter is given, it lists all three in sequence. \\

         \texttt{list vectors [n]} &
            Lists the settings for enabled vectors, channel \textsl{n}. \\

         \texttt{load instrument s} &
            Loads an instrument to the current part from a named file.
            The parameter \textsl{s} is compulsory. \\

         \texttt{load patchset [s]} &
            Load a complete patch set from the file. \\

         \texttt{load vector [s]} &
            Loads a vector setup from a file. \\

         \texttt{save patchset [s]} &
            Save the patch set to a named file. \\

         \texttt{save instrument s} &
            Saves the current part to a named instrument file.
            The parameter \textsl{s} is compulsory. \\

         \texttt{save setup} &
            Save the current dynamic system settings. \\

         \texttt{save vector [s]} &
            Saves the current vector setup to a named vector file. \\

         \texttt{set activate [n]} &
            Set part-activate on MIDI program change (0 on, 1 off). \\

         \texttt{set alsa audio [s]} * &
            Sets the name of the audio device to look for. \\

         \texttt{set alsa midi [s]} * &
            Sets the name of the MIDI source to look for. \\

         \texttt{set available [n]} &
            Set the number of available parts (16, 32, 64). \\

         \texttt{set bank [n]} &
            Set current bank to ID \textsl{n}. \\

         \texttt{set ccbank [n]} &
            Set MIDI CC for bank changes (non-0 or -32 disables). \\

         \texttt{set ccroot [n]} &
            Set MIDI CC for root path changes (above 119 disables). \\

         \texttt{set extend [n]} &
            Set MIDI CC for extended program change (above 119 disables). \\

         \texttt{set insert effects [n]} &
            Set insertion effects for editing. \\

         \texttt{set jack midi [s]} * &
            Sets the name of the JACK MIDI source for Yoshimi. \\

         \texttt{set jack server [s]} * &
            Sets the name of the JACK server for Yoshimi. \\

         \texttt{set part [n1] program [n2]} &
            Load instrument \textsl{n2} into part \textsl{n1}. \\

         \texttt{set part [n1] channel [n2]} &
            Set the MIDI channel \textsl{n2} for part \textsl{n1}. \\

         \texttt{set part [n1] destination [n2]} &
            Set audio destination of part \textsl{n1}
            to main, part, or both. \\

         \texttt{set preferred audio [s]} * &
            Set audio connection type (jack/alsa). \\

         \texttt{set preferred midi [s]} * &
            Set MIDI connection type (jack/alsa). \\

      \end{tabular}
   \end{table}

   \begin{table}[H]
      \centering
      \caption{Yoshimi Text Commands, Part 2}
      \label{table:yoshimi_text_commands_part_2}
      \begin{tabular}{l l}

         \texttt{set - preset [n]} &
            Set effect preset. \\

         \texttt{set - preset [n]} &
            Set numbered effect preset. \\

         \texttt{set program [n]} &
            Set MIDI program change (0 disables, otherwise enables). \\

         \texttt{set reports [n]} &
            Set report destination (gui, stderr, show, and hide). \\

         \texttt{set root [n]} &
            Set current root path to ID \textsl{n}. \\

         \texttt{set shift [n]} &
            Set master key shift for notes, semitones. \\

         \texttt{set system effects [n]} &
            Set System Effects for editing. \\

         \texttt{set vector [n1] x/y cc [n2]} &
            Sets and enables vector CC.  See section below. \\

         \texttt{set vector [n1] x/y features [n2]} &
            Sets channel \textsl{n1} X or Y features to \textsl{n2}. \\

         \texttt{set vector [n1] x/y program [l/r] [n2]} &
            Loads program \textsl{n2} to ch. \textsl{n1} X or Y
            \textsl{left} or \textsl{right} part. \\

         \texttt{set vector [n1] x/y control [n2] [n3]} &
            Sets \texttt{n3} CC to use for X or Y feature \texttt{n2}
            (2, 4, 8). \\

         \texttt{set vector [n] [off]} &
            Disables vector control for channel \textsl{n}. \\

         \texttt{set volume [n]} &
            Set the master volume. \\

         \texttt{reset} &
            Return to the start-up conditions, if 'y' selected. \\

         \texttt{stop} &
            Cease all sound immediately! \\

         \texttt{?} or \texttt{help} &
            List all commands. \\

         \texttt{exit} &
            Tidy up and close Yoshimi down, if 'y' selected. \\

      \end{tabular}
   \end{table}

   Entries marked with an asterisk need to be saved, and \textsl{Yoshimi}
   restarted, to activatate.

   Commands are not case sensitive, and an invalid one will print a reminder.
   Often one needs only the first letter of a command, as long as it is
   unambiguous. The examples above show their minimum abbreviations in capitals.
   However, Yoshimi is quite pedantic, and if you type the command in full it
   must be exactly correct!

   Since V 1.5.1 all number ranges start from one. This is for compatibility
   with the GUI.

   More commands will be added, and the organisation of the commands
   may change slightly.

\fi

%  ------------------------------------------------------------------------
%     END OF OBSOLETE SECTION
%  ------------------------------------------------------------------------

\subsection{Command Descriptions}
\label{subsec:command_line_command_descriptions}

   This section describes the command-line commands in more detail.
   Obviously, some more needs to be written about some of the commands.
   Note that all the parameters for the \texttt{load} and \texttt{save}
   parameters are strings, and the parameters are compulsory, not optional.

   \setcounter{ItemCounter}{0}      % Reset the ItemCounter for this list.

   \itempar{..}{cmd!up one level}
      \index{cmd!..}
      Step back up one command context level.
      This command can immediately precede another command, so that the second
      command takes places at the context above the current context.

   \itempar{/}{cmd!to top level}
      \index{cmd!/}
      Step back up to the top command context level.
      This command can immediately precede another command, so that the second
      command takes places at the top context.

   \itempar{add bank [s]}{cmd!add bank}
      Define a new bank, \textsl{s}, where \textsl{s} is a bank name,
      and add it to the current root.

   \itempar{add root [s]}{cmd!add root}
      Define a new root path, \textsl{s}, and add it to the list of root paths.

   \itempar{remove bank [s]}{cmd!remove bank}
      Delete the bank named \textsl{s}, and all its contents,
      from the current root path.

   \itempar{remove root [s]}{cmd!remove root}
      De-list the root path named \textsl{s}.

   \itempar{list banks [n]}{cmd!list banks}
      List the instruments and IDs in bank \textsl{n} or the
      current bank/root.

   \itempar{list effects [n]}{cmd!list effects}
      List effect types for \textsl[n].
      If the parameter is the word \textsl{all},
      then list every effect and all its
      presets along with the preset number.

   \itempar{list history [s]}{cmd!list history}
      Displays the recently-used files, including patchsets, scales, and
      states.  If no parameter is given, then this command lists all three
      files in sequence.  The shortest version of this command is
      \texttt{l h p} (for patchsets, which returns the last-seen patchset list).

      \index{at-sign}
      \index{cmd!at-sign}
      \index{cmd!list operator}
      Once that list is displayed,
      the \texttt{@} operator can be used to access
      the item by number.  For example, to load the patch set at location 4 in
      the list:

      \begin{verbatim}
         yoshimi> lo p @4
      \end{verbatim}

   \itempar{list instruments [n]}{cmd!list instruents}
      List all instruments and IDs in bank \textsl{n}
      or the current bank/root.
      Listing instruments will identify the current one with an asterisk, and
      shows the current bank and root one is listing from, and adds a suffix to
      the entry with \textbf{A}, \textbf{S}, or \textbf{P}
      depending on the combination of AddSynth, SubSynth, and PadSynth.

   \itempar{list parts}{cmd!list parts}
      Lists the number of parts available and parts with instruments
      currently installed along with any enabled with the default sound.
      Also shows their audio destination:
      \textsl{M} = main L/R, \textsl{P} = part L/R, \textsl{B} = both, and
      \textsl{-} = disabled or unavailable.
      This way one can tell if an instrument patch is installed even if it is
      not currently usable.
      To avoid unnecessary list length, the default "Simple Sound" is not shown
      unless it is enabled.

   \itempar{list roots}{cmd!list roots}
      Displays all defined root paths.
      Listing roots will identify the current ones with an asterisk.

   \itempar{list setup}{cmd!list setup}
      Displays the current dynamic system settings.

   \itempar{list vector [n]}{cmd!list vector}
      Lists the settings for vector on channel \textsl{n}.

   \itempar{load instrument [s]}{cmd!load instrument}
      Loads an instrument into the current part from the named file.
%     The file-name parameter \textsl{s} is mandatory.

   \itempar{load patchset [s]}{cmd!load instrument}
      Load a complete patch set from a named file, \textsl{s}.
      A variation on this command is \texttt{load patchset @4}, which
      loads the patchset at location 4, the 4th item in the list.

   \itempar{load vector [s]}{cmd!load vector}
      Loads an vector setup from the named file.
      The file-name parameter \textsl{s} is mandatory.

   \itempar{save patchset [s]}{cmd!save patchset}
      Saves the current patchset to the file named \textsl{s}.

   \itempar{save instrument [s]}{cmd!save instrument}
      Saves the instrument of the current part to the named file.
      The file-name parameter \textsl{s} is mandatory.

   \itempar{save setup}{cmd!save setup}
      Save the current dynamic system settings.
      These settings get saved to the state file (we think).

   \itempar{save vector [s]}{cmd!save vector}
      Saves the vector setup to the named file.
      The file-name parameter \textsl{s} is mandatory.

   \itempar{set activate [n]}{cmd!set activate}
      Set part-activate on MIDI program change.
      \textsl{n}=0 disables this feature, and
      1 or any non-zero value enables this feature.
      This feature applies to command line program change as well.

   \itempar{set alsa audio [s]}{cmd!set alsa audio}
      Sets the name of the audio hardware device ALSA looks for.
      Requires a restart of \textsl{Yoshimi}.

   \itempar{set alsa midi [s]}{cmd!set alsa midi}
      Sets the name of the MIDI source ALSA looks for.
      Requires a restart of \textsl{Yoshimi}.

   \itempar{set available [n]}{cmd!set available}
      Set the number of available parts (16, 32, 64).
      Note that 32 and 64 are supported in the newest versions of
      \textsl{Yoshimi}.  Also note that a single two-part vector setup (the
      \textbf{X} vector) requires 32 parts, while the dual two-part vector
      setup (both \textbf{X} and \textbf{Y}) requires 64 parts.

   \itempar{set bank [n]}{cmd!set bank}
      Set current bank to ID \textsl{n}.

   \itempar{set ccbank [n]}{cmd!set ccbank}
      Set the MIDI CC for bank changes (anything other than 0 or 32
      disables MIDI CC).

   \itempar{set ccroot [n]}{cmd!set ccroot}
      Set the MIDI CC for root path changes (values above 119 disable this
      feature).

   \itempar{set extend [n]}{cmd!set extend}
      Set CC value for extended program change (values above 119 disables this
      feature).

   \itempar{set insert effects [n]}{cmd!set insert effects}
      Set insertion effects for editing.
      What are the possible values of \textsl{n}?

   \itempar{set jack midi [s]}{cmd!set jack midi}
      Sets the name of the JACK MIDI source for Yoshimi.
      Requires a restart of \textsl{Yoshimi}.

   \itempar{set jack server [s]}{cmd!set jack server}
      Sets the name of the JACK server Yoshimi tries to connect to.
      Requires a restart of \textsl{Yoshimi}.

   \itempar{set part [n1] program [n2]}{cmd!set part program}
      Load instrument \textsl{n2} into part \textsl{n1}.
      Example: \texttt{set part 4 program 130}

   \itempar{set part [n1] channel [n2]}{cmd!set part channel}
      Set the MIDI channel \textsl{n2} for part \textsl{n1}.
      If the channel number is greater than 15, no further MIDI
      messages will be accepted by that part.

   \itempar{set part [n1] destination [n2]}{cmd!set part destination}
      Set the audio destination of part \textsl{n1}
      to main (\textsl{1}), part (\textsl{2}), both (\textsl{3}).
      Also enables the part if not already enabled.

   \itempar{set preferred audio [s]}{cmd!set preferred audio}
      Set the audio connection type.
      The parameter should be either "jack" or "alsa".

   \itempar{set preferred midi [s]}{cmd!set preferred midi}
      Set the MIDI connection type.
      The parameter should be either "jack" or "alsa".

   \itempar{set - preset [n]}
      Set effect preset.
      Set numbered effect preset.

   \itempar{set program [n]}{cmd!set program}
      Set MIDI program change (0 disables, anything else enables).

   \itempar{set reports [n]}{cmd!set reports}
      Sets the report destination or where messages are displayed, and, to some
      extent, which messages are displayed.  Here are the variations on this
      command that are supported:

      \begin{itemize}
         \item \texttt{set reports gui} or \texttt{s r g}.
            All reports are sent to the GUI console window.
         \item \texttt{set reports stderr} or \texttt{s r s}.
            All reports are sent to stderr.
         \item \texttt{set reports show} or \texttt{s r sh}.
            All messages are displayed.
         \item \texttt{set reports hide} or \texttt{s r h}.
            Non fatal low-level messages are discarded.
         \item \texttt{set reports (any other word or nothing at all)} or
            \texttt{s r (other)}.
            This sets the default condition of sending reports to the CLI and
            displaying all of them.
      \end{itemize}

   \itempar{set root [n]}{cmd!set root}
      Set current root path to ID \textsl{n}.

   \itempar{set shift [n]}{cmd!set shift}
      Set the master key shift for following notes in semitones (+-
      octave, 64 for no shift).

   \itempar{set system effects [n]}{cmd!set system effects}
      Set System Effects for editing.

   \itempar{set vector [n1] x/y cc [n2]}{cmd!set vector cc}
      CC \textsl{n2} is used for channel \textsl{n1} X or Y axis sweep.
      For X, this also enables vector control for the channel.

      \index{vector!features}
      The individual features are now numbered 1-4 and can be
      \index{vector!enable} \texttt{enabled} or
      \index{vector!reverse} \texttt{reversed} (any
      other word disables the feature).
      "Reversed" means that, instead of the X left rising in
      value with increasing CC value, it decreases.
      X right does the opposite of course.

      Feature 1 is always fixed as 7 (volume) and is not reversible.
      Features 2 to 4 can also have the outgoing CC changed to any valid one.
      The vector is just about the only command-line
      entry that starts from 1.

      The original system where bits were ORred together was done to make NRPN
      control as efficient as possible. That hasn't changed, but log messages
      refer to the command-line numbering.

      A more detailed discussion of command-line vector control is presented in
      \sectionref{subsection:vector_command_line}.

   \itempar{set vector [n1] x/y features [n2]}{cmd!set vector features}
      Sets channel \textsl{n1} X or Y features to \textsl{n2}.

   \itempar{set vector [n1] x/y program [l/r] [n2]}{cmd!set vector program}
      Loads program \textsl{n2} to channel \textsl{n1} X or Y
      \textsl{left} or \textsl{right} part.

   \itempar{set vector [n1] x/y control [n2] [n3]}{cmd!set vector control}
      Sets \texttt{n3} CC to use for X or Y feature \texttt{n2} (2, 4, 8).
      \textsl{n3} is the CC to be used for feature number \textsl{n2} on X
      vector channel \textsl{n1}. The \textsl{x} is a sort of hidden parameter
      as the code uses an offset dependent on whether it is \textsl{x} or
      \textsl{y}. Also \textsl{n1} can be omitted in which case it will use the
      last defined channel number. Using alternate words and numbers gives a
      great deal of flexibility like this.

   \itempar{set vector [n] [off]}{cmd!set vector}
      Disables vector control for channel \textsl{n}.

   \itempar{set volume [n]}{cmd!set volume}
      Set the master volume.

   \itempar{reset}{cmd!reset}
      Return to the start-up conditions, if 'y' selected.

   \itempar{stop}{cmd!stop}
      Cease all sound immediately!

   \itempar{? or help}{cmd!help}
      List commands for current mode.  All of the minimum command-line
      abbrevations are capitalised in the help listing.

   \itempar{exit}{cmd!exit}
         Tidy up and close Yoshimi down.

%  ------------------------------------------------------------------------
%     START OF REDUNDANT SECTION
%  ------------------------------------------------------------------------

\iffalse

\subsection{Command List}
\label{subsec:command_line_command_list}

   This section provides another list of CLI commands, and should be considered
   the most complete.  We will reconcile it all at some point.
   First, some general commands.  The capital letters denote the minimum token
   needed for each command.

\fi

\iffalse
\begin{verbatim}
   ?,  Help                      Show commands.
   STop                          All sound off.  Stop!
   RESet                         Return to start-up conditions (if 'y').
   EXit                          Tidy up and close Yoshimi (if 'y').
   ..                            Step back one command level.
   /                             Step back to top command level.
\end{verbatim}

   Commands to list various items.

\begin{verbatim}
   List                          Various available parameters.
      Roots                      All available root paths.
      Banks [n]                  Banks in root ID or current.
      Instruments [n]            Instruments in bank ID or current.
      Parts                      Parts with instruments installed.
      Vectors                    Settings for all enabled vectors.
      Settings                   Dynamic settings.
      MLearn [s[n]]              MIDI learned controls; '@n' for full details, one line.
      History [s]                Recent files; Patchsets, SCales, STates, Vectors, MLearn.
      Effects [s]                Effect types; 'all' include preset numbers and names.
      PREsets                    All the presets for the current selected effect.
\end{verbatim}

   Commands to load various items.

\begin{verbatim}
   LOad                          Load patch files.
      Instrument [s]             Instrument to current part from named file.
      Patchset [s]               Complete set of instruments from named file.
      STate [s]                  All system settings and patch sets from named file.
      SCale [s]                  Scale settings from named file.
      VEctor [{Channel}n] [s]    Vector on channel n from named file.
      MLearn [s]                 MIDI learned list from named file.
\end{verbatim}

   Commands to save various items.

\begin{verbatim}
   SAve                          Save various files.
      Instrument [s]             Current part to named file.
      Patchset [s]               Complete set of instruments to named file.
      STate [s]                  All system settings and patch sets to named file.
      SCale [s]                  Current scale settings to named file.
      VEctor <{Channel}n> [s]    Vector on channel n to named file.
      MLearn [s]                 MIDI learned list to named file.
      Setup                      Dynamic settings.
\end{verbatim}

   Commands to add and remove various items.

\begin{verbatim}
   ADD                           Add paths and files.
      Root [s]                   Root path to list.
      Bank [s]                   Bank to current root.
   REMove                        Remove paths, files and entries.
      Root [n]                   De-list root path ID.
      Bank [n]                   Delete bank ID and all contents from current root.
      MLearn [s] [n]             Delete MIDI learned 'ALL' whole list, or '@'(n) line.
\end{verbatim}

   Commands to set and read some items.  ARE ANY OF THESE STILL ACTIVE?

\begin{verbatim}
   Set / Read                    Set or read all main parameters
      SWitcher [{CC}n] [s]       Define CC n to set single part in group (Row / Column)
      REPorts [s]                Destination (Gui/Stderr)
                                   Non-fatal (SHow/Hide)
      Root [n]                   Current root path to ID
      Bank [n]                   Current bank to ID
      MLearn [n] [s] [s]         midi learned line n control (MUte, CC, CHan, MIn,
                                 MAx, LImit, BLock) Enable {other}
\end{verbatim}

   Commands to set and read parts.

\begin{verbatim}
      Part [n1]                  Set part ID operations
        ENable                   Enables the part
        DIsable                  Disables the part
        Volume [n2]              Volume
        Pan [n2]                 Panning
        VElocity [n2]            Velocity sensing sensitivity
        OFfset [n2]              Velocity sense offest
        POrtamento [s]           Portamento (Enable, other disable
        Mode [s]                 Key mode (Poly, Mono, Legato)
        Note [n2]                Note polyphony
        SHift [n2]               Key shift semitones (0 no shift)
        MIn [n2]                 Minimum MIDI note value
        MAx [n2]                 Maximum MIDI note value
        EFfects [n2]             Effects for editing
        Type [s]                 The effect type
        PREset [n3]              Set numbered effect preset to n3
        Send [n3] [n4]           Send part to system effect n3 at volume n4
        PRogram [n2]             loads instrument ID
        NAme [s]                 Sets the display name the part can be saved with
        Channel [n2]             MIDI channel (> 31 disables, > 15 note off only)
        Destination [s2]>         JACK audio destination (Main, Part, Both)
\end{verbatim}

   Commands to set and read vectors.

\begin{verbatim}
      VEctor [n1]                Vector CHANNEL, operations
        [X/Y] CC [n2]            CC n2 is used for CHANNEL X or Y axis sweep
        [X/Y] Features [n2] [s]  Sets CHANNEL X or Y features 1-4 (Enable, Reverse, {other} off)
        [X] PRogram <l/r> [n2]   X program change ID for CHANNEL LEFT or RIGHT part
        [Y] PRogram <d/u> [n2]   Y program change ID for CHANNEL DOWN or UP part
        [X/Y] Control [n2] [n3]  Sets n3 CC to use for X or Y feature n2 (2-4)
        Off                      Disable vector for CHANNEL
\end{verbatim}

   Commands to set and read effects and presets.

\begin{verbatim}
      SYStem effects [n]         System effects for editing
      Send [n2] [n3]             Send system effect to effect n2 at volume n3
      preset [n2]                Set effect preset to number n2

      INSert effects [n1]        Insertion effects for editing
      Send [s]/[n2]              Set where (Master, Off or part number)
      PREset [n2]                Set numbered effect preset to n2
\end{verbatim}

   Commands to set and read programs and more.

\begin{verbatim}
      PRogram [n]                MIDI program change enabled (0 off, other on)
      ACtivate [n]               MIDI program change activates part (0 off, other on)
      CCRoot [n]                 CC for root path changes (> 119 disables)
      CCBank [n]                 CC for bank changes (0, 32, other disables)
      EXtend [n]                 CC for extended MIDI program change (> 119 disables)
      AVailable [n]              Available parts (16, 32, 64)
      Volume [n]                 Master volume
      SHift [n]                  Master key shift semitones (0 no shift)
      DEtune [n]                 Master fine detune
      SOlo [n]                   Channel 'solo' switcher (off, row, col, loop)
      SCC [n]                    Incoming 'solo' channel number
      TIMes [s]                  Time display on instrument load message (ENable / other
\end{verbatim}

      These entries need to be saved and Yoshimi restarted to activate:

\begin{verbatim}
      PREferred Midi [s]         MIDI connection type (Jack, Alsa)
      PREferred Audio [s]        Audio connection type (Jack, Alsa)
      Alsa Midi [s]              Name of alsa MIDI source
      Alsa Audio [s]             Name of alsa hardware device
      Jack Midi [s]              Name of jack MIDI source
      Jack Server [s]            JACK server name
      Jack AUto [s]              0 off, other on
      AUTostate [s]              Autoload default state at start (ENable / other)
\end{verbatim}

\fi

%  ------------------------------------------------------------------------
%     END OF REDUNDANT SECTION
%  ------------------------------------------------------------------------

\subsection{Direct Access}
\label{subsec:command_line_direct_access}

   \index{Direct Access}
   \index{cmd!direct access}
   \textsl{Direct Access} is a very low-level access method for most of the
   controls in \textsl{Yoshimi} control.
   It is a test feature accessible only from the command line.
   There are virtually no error checks on direct-access, so one can easily
   crash Yoshimi with out of range values.
   It mostly updates the GUI too.
   Refer to the \texttt{Yoshimi Control Numbers.ods} file that ships with the
   source-code
   for control numbers, actions, and \texttt{GUI\_Interpretations.txt}
   further explanations.
   Also, see \texttt{Effect\_Inserts.txt} for the actual effect controllers and
   \texttt{Envelope\_Inserts} for the enveople controller ranges.

   Sections currently supported by direct access:

   \begin{itemize}
      \item Top level controls
      \item MIDI-learn, used for all operations
      \item Main part controls, now used by GUI for writes
      \item Controllers Window
      \item MIDI CCs window, used for all except incoming real MIDI
      \item Kit edit window
      \item AddSynth Editor
      \item AddSynth Voice Editor
      \item SubSynth Editor
      \item PadSynth Editor
      \item Oscillator
      \item Resonance
      \item Effects
      \item LFOs
      \item Filters
      \item Envelopes
   \end{itemize}

   The remaining sections display as if written to, but don't
   change anything.

   The official direct access numbering system is zero based (and will remain so).

%  This matches the results from using the middle mouse button in the GUI
%  (assuming it was enabled at build time). Commands that are purely within
%  the GUI, e.g window changes are recognised but not acted on.
%
%  An alternative way to find out the correct command sequence is to click on
%  a control with any button *except* the middle one. Trailing '255's can be
%  ommitted if there are no following parameters set.
%
%  In some situations par2 is used as a miscMSG ID for passing text values
%  between threads but synchronised via the RT thread.

   The format of the direct-access command is:

   \begin{verbatim}
      direct [value] [type] [control] [part] [kit] [engine] [insert] [parameter] [par2]
   \end{verbatim}

   \begin{itemize}
      \item \texttt{direct} is the actual command name, must be typed in full.
      \item \texttt{value} is the value that will be set, may be negative and
         floating point (looks for the devimal point).
      \item \texttt{type} is a subset of the command type: 0 for read and 64 for
         write. Sending 1 will just echo the bytes you sent.  Sending 3 will
         turn it into a MIDI-learn command.
      \item \texttt{control} is the number representing the control being
         changed or queried.
      \item \texttt{part} is the number of the part being changed.
   \end{itemize}

   All the parameters above are mandatory. The following must also be entered in
   sequence when needed.

   \begin{itemize}
      \item \texttt{kit} is a part's kit number (if enabled otherwise zero).
         also used for effects.
      \item \texttt{engine} is the synth engine being adjusted.
      \item \texttt{insert} is harmonics, LFOs, filters etc.
      \item \texttt{parameter} is subtype associated with some inserts.
      \item \texttt{par2} is an offset for some parameters.
   \end{itemize}

   A variation of the above is when you set flt\_max as the \texttt{value}.
   This value will
   be interpeted as requesting the min, max, and default values for the
   command and using the same 'CommandBlock' struct will return them as short
   integers in the form:

   \begin{verbatim}
      limits.min
      limits.max
      limits.def
   \end{verbatim}

   Only a few of these are independently declared so far, all the rest have the
   values: min = 0, max = 127, and def = 0.  \textbf{def} will return the
   default times 10. This is so that fractional values can be resolved. 0.5 comes
   up quite often. No default values are very large, but may be negative.

   A number of limits are now defined, and more will be forthcoming. There is
   now a specific variation for this. "direct", "lim", (control), (part), (kit)
   etc.  These commands now give the corrected default value and report the full
   name of the control, and as well as the limits, it gives the type (float/integer)
   and notes if it is MIDI learnable.

%-------------------------------------------------------------------------------
% vim: ts=3 sw=3 et ft=tex
%-------------------------------------------------------------------------------
