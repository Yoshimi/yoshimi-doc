Date: Mon, 21 Mar 2016 22:49:56 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: Re: Documentation caught up for now

I'm pleased so say *all* file loads incorporating scales are now correctly
tuned, and done properly not with the fudge I implemented earlier.

This bug goes right back to Zyn 2.2.1 and was caused by the very last line of
the scale (usually 2/1) not being converted to an actual scale entry.

So, load and save scales is also fully available to the CLI.

Incidentally, the 'Retune' button in the Scales window is needed if you change
any of the actual scale settings. However, it's not needed for key mappings or
any other controls, all of which operate immediately.

DONE


Date: Wed, 23 Mar 2016 02:14:17 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: On a bit of a roll now :)
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Vector load and save is now possible from the CLI. That's a complete vector
set, with all mappings, instruments etc. You can independently decide which
channel to load and save from, so you can actually build up a vector set in
(say) channel 3, then later decide you want to use it in channel 7.
It has the extension .xvy standing for Xml, Vector, Yoshimi

It seems to be reliable, but there is a bit more tidying up I'll be doing.
Also, I want to integrate it with saved states.

Another small detail is that all the minimum CLI abbreviations are now
Capitalised in the help list.

DONE


Date: Wed, 23 Mar 2016 22:33:46 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: On a bit of a roll now :)
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Some more CLI goodness.

The way you enter vector features is now much more user friendly.

The individual features are now numbered 1-4 and can be Enabled or Reversed (any
other word disables). Reversed means that instead of the X left rising in value
with increasing CC value it decreases. X right does the opposite of course.

1 is always fixed as 7 (volume) and is not reversible.
2-4 can also have the outgoing CC changed to any valid one.

This is just about the only CLI entry that starts from 1. This is because
internally 0 means no features, and trying to fiddle the numbers makes the code
a lot more confusing.

The original system where bits were ORred together was done to make NRPN
control as efficient as possible. That hasn't changed, but log messages refer
to the CLI numbering.

DONE


Date: Fri, 25 Mar 2016 14:20:36 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: On a bit of a roll now :)
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Oh dear, I really shouldn't do this sort of stuff when suffering heavily from a
bad cold :(

I can't believe how many mistake I made.

Here is the correct version... I hope!

An example to set up vectors from the command line:
Assuming we want just a single axis on channel 1 (2 in the GUI)

First we need to make sure we have enough parts available:

yoshimi> set available 32
Available parts set to 32

Then:

yoshimi > set vector 1 x cc 14
Vector channel set to 1

This command must aways be the first as everthing else hangs on it. It's the
command that enables vector control. cc is the incoming sweep CC that will vary
the features you set.

There are 4 features available
1 is fixed as volume
2 is pan by default
3 is brightness by default
4 is modulation by default

We'll select volume for this example so:

yoshimi Vect Ch 1 X > set features 1 enable.
Set X features 1 en


Now you need the set the instruments that will be used. These can only be the
ones in the current bank, so, assuming we are in Will Godfrey Companion

yoshimi Vect Ch 1 X > set program left 20
Loaded 20 "Bubbles" to Part 1

yoshimi Vect Ch 1 X > set program right 120
Loaded 120 "Ghost Ensemble" to Part 16

If you now sweep the the controller assigned to 14 the sound will morph between
these two instruments.

To go on to using the other axis as well you need to have 64 parts set so:

yoshimi Vect Ch 1 X > /set available 64
Available parts set to 64

Then:

yoshimi > set vector y cc 15
Vector 1 Y CC set to 15

Well use panning for this vector so:

yoshimi Vect Ch 1 Y > set features 2 enable
Set Y features 2 en

yoshimi Vect Ch 1 Y > set program down 107
Loaded 107 "Angel Harp" to Part 32

yoshimi Vect Ch 1 Y > set program up 78
Loaded 78 "Brassy Flutter" to Part 48

Notice that the directions left,right,up,down match a traditional joystick.

Now you can save your ultimate vector sound:

yoshimi Vect Ch 1 Y > save vector CoolSound
Saved channel 1 Vector to CoolSound

At any time you can reload this.
yoshimi> load vector channel 0 CoolSound
Loaded Vector CoolSound to channel 0

If you don't give a channel then it will be loaded to the same channel as it
was saved from:

yoshimi> load vector CoolSound
Loaded Vector CoolSound to source channel

The file extension we use is .xvy but this will be added automatically.

DONE


Date: Sat, 26 Mar 2016 15:37:15 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: On a bit of a roll now :)
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

I was playing about yesterday evening with Rosegarden (and Yoshimi of course)
but was getting frustrated with wrong volume and pan settings.

Eventually it occurred to me to enable our (fairly) new CC monitor. This pretty
quickly revealed the problem. Rosegarden was sending CC121 - reset all
controllers - at the start of some segments!

This prompted me to add an ignore button in the midi config window. It's off
by default, but mine is now on, and will probably remain so!

It seems some people don't like our startup splash - Boo!

So if you really can't wait another second for Yoshimi, you can now disable it
in the main config window.

DONE


ate: Sun, 27 Mar 2016 15:22:42 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: On a bit of a roll now :)
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

On Sun, 27 Mar 2016 08:38:25 -0400
Chris Ahlstrom <ahlstromcj@gmail.com> wrote:

> Will,
>
> I have added your examples to the "Vector Control" section of
> yoshimi-doc.  The latest is currently only in the "cja" branch.
>
> However, you will note in that section that I have some questions that
> occurred to me while working through it.
>
> Thanks man!

NP. You've done a good job of putting it into more digestible form :)

<aside>
Whenever I get a cold I always end with 2-3 days extreme cough. I sometimes
think that's actually far worse than the cold itself -BLEAH
</aside>

Right {rolls up virtual sleeves}

To answer your second question first:

In Yoshimi, all CLI file operations are standard file specs.

"/home/user/directory/file" will go to that specific location.

"file" will look only in the current directory, whatever that happens to be.

Now for the more complicated bit :)

I first thought about vector control long before we had 64 part capability,
iand ntended to use just sequential parts/channels. I was put off by several
things.

First: How do you stop one vector definition overlapping another? Do you
restrict it to blocks of 4? If so, what about the 'wastage' with a mixture of
single and dual vectors?

Second: My compositions frequently use 12 out of the 16 available channels. That
leaves room for only one vectored one.

Third: how do you stop an otherwise valid MIDI CC breaking a vectored setup?

Stepping forward, 64 parts was initially just an experiment to see if it could
be done. Once proved viable, my first thought was vectors!

By going down 'columns', instead of across 'rows' you don't reduce the number
of available channels for normal MIDI operations.

By default an entire column uses the same MIDI channel, so, remembering that      almost all numbers in the CLI start from zero, you have:

CH 0 - parts 0, 16, 32, 48
HH 3 - parts 3, 19, 35, 51

Although seemingly offset by 1, these match up nicely with the part groups in
the mixer panel.

As setting the programs is not done by numbers, but by X/Y L/R I thought it
best to report back the actual parts that were being set. This also meant I
could use the existing code without any modification.

With steady refinements over time, it probably wouldn't be too difficult to give
the user the choice of a vertical' or 'horizontal' basis, but I'm not keen on
the idea myself - we're still falling behind on more important stuff :(

Usual caveats apply: If someone wants to offer a patch I'll look at it :)

Incidentally, with Yoshimi idling on this office computer. 16 parts gives 0.8%
dsp load and 64 parts pushes that up to a whopping 1.1% :)


Date: Wed, 30 Mar 2016 23:44:07 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: Re: correction!
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

On Mon, 28 Mar 2016 18:23:54 -0400
Chris Ahlstrom <ahlstromcj@gmail.com> wrote:

> No problem, it is easy!
>
> I've been trying to have the ALSA mode of Sequencer64 support pause.
> Amazing how easy it is to break functionality, have to test thoroughly with
> every goddam change I make :-D

Ah yes. I know exactly how you feel. I revised the ALSA code in yoshimi. It's
much better than it was, but I'm still not totally confident it's right :(

Oh, another note (or two). The MIDI tab has changed. All the items squished up a
bit to make room for a new one 'Ignore Reset All Controllers'.

In the command line lists there is now. Load Vector <s> and Save Vector <s>

Sadly my best command line tester is having GCC5 related problems and can't
compile anything at the moment :(


Date: Fri, 22 Apr 2016 22:13:54 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: Yoshimi bits
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Hi Chris,

Just to let you know that most of the command line entries can now be read as
well as set. Eventually they all will be, but currently significant missing ones
are vectors, effects & volume/pan/keyshift.

In the CLI help menu that only needs a change in one line - 'Set' becomes
'Set/Read' :)

It's now a general principle that groups of stuff will be 'List' but individual
items will be 'Read'.

At the same time as doing this, I've moved a bit more direct access out of the
gui. It's still not thread safe, but at least it's all slowly moving to a
central 'clearing house' in SynthEngine.


Date: Sat, 23 Apr 2016 21:15:37 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: Re: Yoshimi bits
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Hi Chris,

> I will update soon.  Currently taking a sabbatical from modifying
> Sequencer64 so that I can update the Yoshimi cookbook as I try to get
> some old tunes converted to GM format.  I want to "master" the saving of
> Yoshimi state, and also see how well Yoshimi handles program change.

There are times I wish I could take a sabbatical from Yoshimi, but it seems I
have a tiger by the tail :(

State saves should be straightforward. It's all XML with the individual
subsections clearly identified.

At the end of my LAC workshop I demonstrated a song being played using 16 parts
with multiple bank changes and program loads while playing, starting with a
'bare' Yoshimi. Although I used Rosegarden for this, I also have a MIDI file
that runs here with:

aplaymidi -p yoshimi /data/Source/RideWithYoshimi.mid

If you are interested I can send that file to you. Its only requirements are
that root ID 9 points to the default bank set supplied with Yoshimi, and default
MIDI settings are in place.

The CLI 'read' command now has an alias 'get'. Personally, I don't like pairs
of commands that are phonetically very similar (set/get) but this was requested
and was very easy to implement. Which reminds me, I don't know if I ever
mentions that there is another alias pair 'program' and 'instrument' are
interchangable wherever either is used. This was added to deal with the
conflict that MIDI talks about program changes, but Yoshimi thinks of
instrument changes.


Date: Sun, 24 Apr 2016 14:35:56 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: Re: Yoshimi bits
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

[-- Attachment #1 --]
[-- Type: text/plain, Encoding: 7bit, Size: 1.6K --]

On Sun, 24 Apr 2016 07:34:47 -0400
Chris Ahlstrom <ahlstromcj@gmail.com> wrote:

> That would be cool to try out that file, perhaps make it and the
> method to use it part of yoshimi-cookbook, which I am upgrading and fixing
> along with midicvt(pp) as I try to prepare a tune for the Yoshimi
> Soundcloud section.

File attached :)

As well as doing program changes while running, this also overwrites some parts
several times. Total playing time is just under 8 minutes. You should
definitely have the Mixer panel showing, and if you have the 'Reports' window
open you'll see the bank and program changes listed. Also if you have the
instrument list window open you'll see it swap sets.

We could certainly do with more tunes in the Yoshimi SC group ;)


Date: Tue, 26 Apr 2016 19:22:39 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Progress? A bit :)
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

In the current master, just about the whole of the history system has been
refactored. It now uses a single file for all instances recording any
non-duplicated loads or saves. At the same time I uncovered and squashed a minor
bug in the display of a loaded state. The code is now slightly smaller, and I
think clearer.

For those interested, previously we were (per instance) using 3 deque's for
the three history types. These held both the full file paths and separately
the leafnames. When the 'recent' browser was opened, the leafnames were then
copied to the fltk browser list.

Now we use 3 simpler static vectors to hold just the full pathnames. When the
browser is opened these are read, and just the leafnames extracted for the
browser list.

Also, previously the code and data straddled SynthEngine and Config. It's now
entirely in SynthEngine. I hope that was the right thing to do.

I've tested it on two quite different computers so it should be fine.

P.S.
This it the first time I've coded vectors :)


Date: Thu, 28 Apr 2016 20:47:03 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Progress? A bit :)
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

On Tue, 26 Apr 2016 15:01:14 -0500
Jonathan Brickman <jeb@ponderworthy.com> wrote:

> Just a LITTLE progress, Will ??? :-)
>
> J.E.B.

A bit more now :D

ALL CLI stuff

You can now read the status of a single vector, and both this and the bulk list
have more detail.

When stepping through system and insertion effects the GUI is now properly
updated, although I still haven't got part effects in sync yet.

Listing histories can be individual ones or all three, and I've rationalised
the internal numbering to allow for possible future extensions.

Still a long way to go though!


Date: Sun, 24 Apr 2016 09:56:19 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Key Shift and Octaves.
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

On Sun, 24 Apr 2016 07:58:59 +0100

Well now. It seems I've wrapped myself up in a pretty package :o

In the MIDI spec there is *no* pitch shift controller. Also, the notes I made
for myself 2 years ago I never actually implemented, so currently Yoshimi can
*only* be pitch/key shifted either via the GUI or CLI.

This is not to be confused with fine detune, which is a MIDI RPN (unsupported).

So, what I propose to do is implement master, channel and part pitch shift via
NRPNs.

Looking at hardware synths (I have 3 different ones here), it seems that locally
they all restrict pitch shift to +- 2 octaves, so maybe I should expand
Yoshimi's range consistently to, say, 3 octaves.

Internal oscillators I'll leave alone (muttering under my breath that I still
think it's an insane range).

How does that sound?

Date: Sun, 1 May 2016 17:49:46 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Key Shift and Octaves - Done
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Gobal and Part Key shift is now +-36 semitones. The limits are defined in
CMakeLists.txt and used throughout the code, so they can easily be changed at a
later date  - These days, I'm tending to do the same with most 'magic' numbers.

These can be set in the GUI the CLI and via MIDI NRPNs. With NRPNs part shift
can be set by direct part control or by channel number.

The notes that have been updated in 'doc' are Direct_Part_Control.txt and
Dynamic_System_Settings

Date: Sun, 24 Apr 2016 11:03:52 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Smooth Instrument Transitions.
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

This is something I demonstrated on my miniLAC workshop, but in order to make
it obvious exactly what was happening I spread the controls across the 'normal'
16 parts/channels.

It is actually much more useful if you use 32 or 64 parts and work 'vertically'
by channel numbers. In the next commit, the following notes will be added to
'doc/Using_More_Parts.txt', so if it's not clear please let me know so I can
update this.

------------------

Another possibility is getting really smooth transitions between different
sounds on the same channel.

If you use program change to do this, that part has to be muted, and there is a
variable time lag (while the new part is loaded) before you can play any more
notes on that channel. However, with 32 and 64 parts you can actually overlap
notes with different instruments on a playing channel.

This is done by pre-loading the wanted instruments, then switching channel
numbers. If (via the direct part NRPN) you add 16 to a sounding part's channel
number it will then only respond to note-off events. To bring it back into
operation simply restore the original channel number.

An example:

Enable 32 parts

Load 'Simple Chimes' into part 0 (part 1 in the GUI).
Load 'Silver Bell' into part 16 (part 17 in the GUI).
In your sequencer, via direct part NRPN set part 16 to channel 16.
    This will now be 'whited out' in the GUI

Record some notes to channel 0 - usually represented in sequencers as channel 1
- yes I know this gets confusing :(

In your sequencer just before the first note that you want to sound as 'Silver
Bell' insert two direct part NRPNs. One to set part 0 to channel 16, and the
other to set part 16 to channel 0.

Now when you play this through, the last 'Simple Chimes' note will have it's
full release and reverb tail, blending into the first 'Silver Bell' note.

When you want to go back to using 'Simple Chimes' just reverse the NRPNs.

The only time this gets complicated is if the new note is exactly the same
pitch as the old one, in which case the NRPNs need to be between the old
note-off and the new note-on.


Date: Thu, 28 Apr 2016 22:11:13 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: Yoshimi effects trial
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Hi Chris,

If you have some spare? time, there's something I'd like your opinion on.

Yoshimi has an experimental branch called 'effects'. It's only 'user'
difference from the current master is that it has a hidden command 'test'
accessible only from the CLI.

While working on the CLI I pretty quickly realised I was duplicating a lot of
what was in the GUI. Much of this shouldn't be in either (especially limit
values) but should be in the effects code itself.

So, what I have done here is to copy all the effects text and ranges into each
of the associated effects, with some overall control in the effects manager.
The CLI code (Misc/CmdInterface) accesses this via Misc/SynthEngine - I've
tended to use this as a central access point for lots of things. I've tried to
arrange this so that in the future, additional effects can be added with minimal
disturbance to anything outside the effects code itself.

I'm not at all sure if I've done this in the safest and/or most efficient
manner (hence this request), but if it looks OK, my idea is to then strip out
all the direct settings in the GUI and use this new indirect access. If that
works out OK, it will be *much* easier to implement all of this in the CLI too.

In the CLI code where the 'test' entry is there is a block of comments that I
hope will make things clear.

It's here too if you want a quick overview:

        /*
         * Test routine for direct access to all effect names & limits
         * -1 can be used as out of band parameter
         *
         * EQ (7) is very strange and still not quite right :(
         *
         * if t4 is 0 return string
         * t1 effect number. 0 or out of band returns "No Effect'
         *
         * t2 preset or controller number to read
         * out of band returns effect name
         * t3 list type
         *   0 - effect/preset name
         *   1 - not used
         *   2 - long controller name
         *   3 - short controller name
         * out of band retunes 'Invalid"
         *
         * if t4 is 1 return value
         * t1 effect number. 0 or out of band returns number of effects
         *
         * t2 preset or controller number to read
         * out of band returns number of presets or number of controls
         *
        *
         * t3 data type
         *   0 - min value (number of presets of t2 out of band)
         *   1 - max value (number of controls of t2 out of band)
         */

Hope you can look at this.


Date: Sat, 30 Apr 2016 18:11:37 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Right (click) Said Fred
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Something I've wanted to do for some time is now almost complete.

In the current master, if you right click on a button that opens a child window
the current window is closed. Conversely, if you right click on the 'Close'
button of a child window it will open the parent.

This is especially useful when going up and down the AddSynth stack, and avoids
having a screenful of intermediate windows.

I haven't done this for the resonance window yet - need a break! - and obviously
it doesn't apply to the main window!


Date: Sun, 1 May 2016 17:52:58 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Right (click) Said Fred - complete
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

All nested windows are now (hopefully) correctly done. Right click on a close
button will even correctly deal with whether the Resonance window was opened
from AddSynth or PadSynth and re-open the right one.

It does considerably speed up navigation :)


Date: Sun, 1 May 2016 18:02:17 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Another small detail
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

At miniLAC2016 I was asked about whether it was possible to show the virtual
keyboard on a first time start up to help new users get quick results.

Well that happens now :)

On a first start, there will be no yoshimi.windows file so this fact is used to
open the keyboard alongside the main window. From then on it will obey the
stored data as to whether it is shown and where it is placed.

Date: Mon, 2 May 2016 14:48:33 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Another small detail
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

On Mon, 2 May 2016 10:33:27 +0100
"Tom" <dmarc-noreply@freelists.org> (Redacted sender "madtom1999" for DMARC)
wrote:

If Yoshimi is configured for jack and can't find the jack server it will try
for alsa. If neither jack nor alsa works it will run with a null client so you
can at least try to work out what went wrong. I suspect that if it gets that
far we should probably pop up an alert saying what happened - it does already
report its status to the command line or reports window.

For jack, if you've started from the CLI with the -K option it will
auto-connect the main L&R outputs. For a while, I've been deliberating on the
idea of providing this as a preference in yoshimi->settings->jack, and probably
having it default to 'on'. I'm not inclined to have it trying to start jackd.
That can do strange things in some environments.


Date: Mon, 2 May 2016 16:28:13 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Another small detail
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

On Mon, 2 May 2016 16:21:33 +0200
Lorenzo Sutton <lorenzofsutton@gmail.com> wrote:

> Isn't all of that mostly covered by command line switches?

Indeed so, and about a month ago I checked them to ensure they work. I didn't
test the jack session ones (never use session management myself) and on my
machine using the -k argument to start jackd ends up running jackdbus which
just seems to route all jack audio to /dev/null :(


Date: Tue, 3 May 2016 20:05:53 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: (yet) Another small detail
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

As of now, the jack autoconnect status can be set in both the GUI and CLI
It defaults to 'on'.

However this does highlight an anomaly. Unlike most CLI startup 'switches' you
can't turn it off here (you can once in a running CLI). With the others, the
lower case letter is the off switch as in 'C' & 'c' for CLI and no CLI. However
'k' is already used for starting the jack server.

One idea would be to have a new switch pair, maybe 'M' & 'm' for 'main jack
autoconnect' and 'no main jack autoconnect', but still keeping the 'K' for
backward compatibility.

How does that look?



Date: Fri, 6 May 2016 22:43:48 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Yoshi 1.3.9 jack client names differ for audio and midi
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

On Sun, 20 Mar 2016 17:53:21 +0100
Frank Kober <goemusic@yahoo.fr> wrote:

> Hi Will,
> thanks for keeping yoshimi up, I hope you are fine!
> I was wondering why since the latest release (1.3.9 at least) you changed the
> client name of the yoshimi jack midi portion to "yoshimi-01" and left that of
> the audio portion at "yoshimi".

Coming back to this.

The problem is that creating audio and midi clients is now two quite separate
operations. Audio first, then midi.

The upside is that if the requested connection is not available,each can hunt
for a valid one, or just set a NULL client so that Yoshimi can continue to run.
It also paves the way for additional back-ends at a later date.

The problem for jack is that if you have both audio and midi then you need to
set up just one client that handles both. This potentially has performance
issues at low latencies as well as out of sync names.

What I think needs to happen is that when a call is made to start a jack audio
client it should look ahead to see if midi is jack too, and if so incorporate     that. Then, in the midi loop recognise that it has already been set up and
simply do nothing. As far as I know, there is no way that jack audio can succeed
and at the same time jack midi fail.

I've had a good look through the code (MusicClient, JackEngine) but so far
haven't been able to get my head round it. I also privately asked two people for
help but unfortunately both are heavily committed to other projects - mostly
stuff that puts food on the table.

This is an inconvenience rather than a show-stopper, but I don't really want to
push out another release with this still unresolved, so I'm rather hoping
someone can take a look at this for us.

Talking of which, the next release will probably be some time in June. I'm
currently working on a quite involved part of Yoshimi that is likely to take up
most, if not all, of my coding time till then :/


Date: Fri, 6 May 2016 23:03:11 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: More updates
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Hi Granddad :)

Has junior worn you out yet?

Just a recap of some recent changes in Yoshimi.

Global and Part Key shift is now +-36 semitones wherever they are set from.

These can be set in the GUI the CLI and via MIDI NRPNs. With NRPNs part shift
can be set by direct part control or *channel* based shift with channel number
in system NRPNs.

The notes that have been updated in 'doc' are Direct_Part_Control.txt and
Dynamic_System_Settings.txt

*All* nested windows can be traversed with a right mouse click closing the
parent as you open the child, or returning to the parent when closing the child.

Specifically for jack audio, there is a new GUI option in Settings->Jack to
enable/disable auto-connecting the main L&R audio outputs.

This is also available for the CLI.

The -K argument will still auto-connect from a CLI start-up if it's not already
configured for that. Currently there is no start-up way to disable this.


Date: Sat, 7 May 2016 18:10:09 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Standards - decisions made!
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

The work I'm doing right now (even though its still proof of concept at the
moment) was getting a right pain, so C++11 it now is - much easier. As and when
working through other areas I'll make changes if appropriate. Besides, it only
required a single statement in CMakeLists.txt :)

FLTK version I'll leave for a while.

As for making changes to either the build method or the GUI type. I'm not
convinced the issues are important enough to divert time away from long overdue
development that I'm only *beginning* to really get a grip of. If you want a
clue - with the current master - have the reports window open and click on any
LFO control with the middle mouse button.

Also, any GUI is a problem for both blind musicians and those with significant
motor control issues. That's why I've been developing the CLI. It's current
status is that you can do almost anything you want except actually edit the
instruments, and that will eventually come. In fact, you can do some things
there that you can't do in the GUI.

Although I don't want to divert to these other areas, as usual, if anyone wants
to offer patches I'm more than happy to look at them.


Date: Sat, 7 May 2016 21:53:06 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Standards - decisions made!
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

On Sat, 7 May 2016 18:59:27 +0100
"Tom" <dmarc-noreply@freelists.org> (Redacted sender "madtom1999" for DMARC)
wrote:

> Are you working closely with anyone who is partially sighted? I used to
> do accessibility for web stuff and working with people who will use
> something in anger is, well an eye opener.  You can see where some of
> the ideas in agile development come from!

There is one I very occasionally hear from. There is also a totally blind
person (working with a braille reader/writer) who has offered a lot of
suggestions, and very much likes vector control :)

The overall impression I get is that these people tend to use their memory
much more than us lazy 20-20 types. However, there are context sensitive
prompts and help information along with lists of settings etc. while at the
same time (hopefully) minimising the typing the need to do.

> > There is only one of me :)
> Are you sure? My mail system and cmake seem to think otherwise.
> If only I could control my grasshopper mind!
> Tom

If you know of more, tell them to stop faffing about and give me some help!


Date: Thu, 12 May 2016 20:49:12 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Following On, and on
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

On Tue, 10 May 2016 23:21:24 +0100
Will Godfrey <willgodfrey@musically.me.uk> wrote:

> On Sat, 7 May 2016 18:10:09 +0100
> Will Godfrey <willgodfrey@musically.me.uk> wrote:
>
> > development that I'm only *beginning* to really get a grip of. If you want a
> > clue - with the current master - have the reports window open and click on any
> > LFO control with the middle mouse button.
>
> This also now works for any filter control and all of SubSynth, except the
> embedded envelopes).
>
> Come on guys! You should have guessed what I'm up to by now :)

Well, in the current master we now have almost all the engine controls
identified with that middle button click. Effects, Envelopes & Resonance are
still to do - they are a bit more complicated - but progress is being made.


========================== UPCOMING SCRIPT CONTROL ????? ================

Date: Sat, 14 May 2016 23:03:43 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Following On, and on - rolls up sleeves.
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

*Warning*

Long-winded, technical info that I'm not even sure makes sense to me!

OK?

In the current master I've now got the vast majority of the controls uniquely
identified. There's more to do. Effects are particularly difficult to follow,
and I haven yet worked out to manage Envelopes in free-mode, but apart from
that almost everything from part level upwards is there.

This routine doesn't actually change any controls, but if you use the
mouse middle button, it builds up the messages representing them. This is
entirely inside the GUI and makes no references to the backend at all.

If you press any other mouse button, you get a report from within synthengine
itself listing the bytes representing the steps, as well as a float for the
actual value. There are just 7 steps needed, and I'm not massively packing the
bytes to do that. Again these don't do anything... yet :)

The next step is to build up a tree from these bytes to then poke the control
values into the engine itself via a ring buffer - read synchronously by the
audio thread. This tree will also be used to synchronously interrogate the
engine, and use that information to update the GUI.
Finally, it should be possibly to use the same tree for the CLI and for MIDI
access.

For the time being I'll be continuing to fill in the gaps in the GUI
identification, and as this doesn't interfere with Yoshimi's normal running
I'll carry on working within master for convenience.

However, once I start to poke around with the actual settings I'll start a new
branch - I know that a few people run with master, and I do as a bug shakedown.
I don't want to risk any nasty surprises!

Of course, I need to think of a decent name for this branch. Thinking about it,
"Multi_mode_data_exchange" doesn't exactly roll off the tongue. Nor does,
"Decoupled_Graphical_User_and_Command_Line_Interfaces".

I think "MidiLearn" should do the trick :D


Date: Sun, 15 May 2016 18:55:18 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Following On, and on
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

On Sun, 15 May 2016 08:19:49 -0400
Chris Ahlstrom <ahlstromcj@gmail.com> wrote:

> About the middle-click...  I have this godawful touchpad on this otherwise
> nice laptop (well, except that the keycaps are wearing out) that has no
> buttons.  It is one big button, and the driver provides left and right click
> depending where your finger is on the pad.  (Focaltech, if you want to avoid
> this crapware.)
>
> Anyway, the current Linux driver doesn't offer any way to achieve a
> middle-click.  I've had to code workarounds for this limitation in my main
> project:  Mod4 (the Super or Windoze key) to hold the middle key, keystrokes
> to substitute for the middle key, Ctrl-left as a middle key....
>
> I don't know how centralize Fltk processing is, but ...
> ...something to consider.
>
This is actually a temporary setup for checking things out. I generally avoid
middle-click operations, although how you non-mousers survive without a scroll
wheel is beyond me :)

On my machine FLTK is able to identify all three mouse buttons, and the scroll
wheel as 4 & 5.

Eventually, the 'normal' text data will go and everything will relate to the
control numbers (Over the next few days I'll start drawing up a spreadsheet with
all of these on it).


Date: Sun, 15 May 2016 19:17:36 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Yoshimi - Resonance
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

While going through identifying all the various controls I re-discovered that
'Interpolate peaks' in resonance has two different algorithms. These are
determined by whether you press the left or right mouse button. This I thought
was quite unsatisfactory so now there are two buttons each with their own
tooltip, while the original tooltip covers the new frame they are in.

To do this I had to juggle other controls quite a bit. I also changed two rotary
controls and one roller all to sliders. They now pack in better without looking
crowded, are easier to manage, with clearer indication. This also meant I could
make some of the text less cryptic!

Chris will probably be muttering under his breath as it means another layout
drawing has changed :p


Date: Sun, 15 May 2016 23:38:57 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Yoshimi - Resonance
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

On Sun, 15 May 2016 17:19:30 -0400
Chris Ahlstrom <ahlstromcj@gmail.com> wrote:

> Heh.  What dialog is that "interpolate peak" in?  Save me some scouting. :-)

Either AddSynth->Resonance or PadSynth->Resonance

> One thing I would like to see is, every time you do a check-in to master,
> increment the final digit of the version as displayed in the splash screen
> and the "yoshimi --version" command.  Useful for reference, and I can
> add it to the documentation.  Example:  Instead of "1.3.9 M", "1.3.9.6 M".
>
> Alternatively, do it in a branch and don't worry about the version until you
> merge back to master.
>
> At your convenience, of course!

Actually, I have been thinking of employing a build number (I don't want to
mess with the versioning). Ideally I want to find a way of automating this, and
have it only displayed if the version has the 'M' suffix. With a release
version it would be irrelevant.

P.S.
Some documentation in place now :)


Date: Mon, 16 May 2016 22:06:36 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Yoshimi - Resonance
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

To really see the difference, with a cleared graph click on the highest point,
creating a spike, then try one of the buttons. Clear the graph, then do the
same but use the other button.


Date: Fri, 20 May 2016 19:47:25 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Progress
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

I've finally started identifying effects. I'd been putting that off till
more-or-less last. I think it has more pointers that Clapham railway junction :(
However, once I'd tracked (sorry!) those, it's turning out to be tedious rather
than difficult.

All the manipulation for these messages is now in SynthEngine. It really should
be in a new file, but I need to work out how to set this up in such a way that
it has the same access to all the other parts. It will have to stay there for
now.

I've not done anything at all with text fields (names) as they have no effect on
the dsp. As such, I'm hoping they can be handled 'normally' and if I stick to
fixed size fields there won't be any unwanted memory shuffling.

At some point I'll need to work out the GUI interface for midi-learn of course!
{sigh}

Oh, anyone fancy knocking up a GUI interface for vector control? :)



========================== CONTINUE HERE ================================

Date: Sat, 21 May 2016 20:05:23 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Cc: Frank Kober <goemusic@yahoo.fr>
Subject: [yoshimi] Re: Yoshi 1.3.9 jack client names - FIXED
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

This turned out to be remarkably easy - almost suspiciously, so I'd *really*
like other people to test the current master.

I've tried all the following combinations and everything seems OK.

alsa midi + alsa audio
jack midi + alsa audio
alsa midi + jack audio
jack midi + jack audio

> How do we know if it worked?

Run a2jmidid and then yoshimi - set for jack midi (in yoshimi->setup - but you
have to save settings and restart)

Both a2j and yoshimi should appear in qjackctl's MIDI tab, and your external
alsa midi source should be connected to midi through in qjackctl's ALSA tab

You should see just yoshimi as the client for both audio and midi if you run
further instances of yoshimi they should track correctly with number suffixes



Date: Sat, 21 May 2016 22:09:34 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: ... and there's more :)
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Hi Chris,

The current master should produce no build warnings.

debian testing now fully supports gcc6 (although it defaults to gcc5)

Although compile time is slightly long, warnings are *far* more detailed and
accurate. It also reports things like indentation ambiguities, which actually
led me to spot a minor bug  - clearing NRPNs.

As an aside, 5 produces an image that is slightly smaller than 4.9 and 6 is in
the middle.





Date: Tue, 24 May 2016 00:00:02 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: Yoshimi-doc
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Hi Chris,

I finally had time to take a quick look at this.

Hum, this was going to be a few quick notes before going to bed. It's now an
epic and it's tomorrow :(

I'm sorry if it all looks rather critical. I do very much appreciate all the
ahrd work you've put into this!

Page 76 Item 6 P.1st hasn't gone. It's moved and changed its name to Prot.1st

Ummmm. Page 10 Yoshimi has had a *considerably* revised GUI!!!

Page 28. All bank information has been taken out of the .config file and is
in .banks.

.instance doesn't yet exist - I've been a wee bit busy :)

Bottom of page Patch Sets are not the full configuration. They carry *most* of
it - almost all the dynamic stuff, but don't contain the config settings that
state does. Note. The old 'parameters' name at the bottom of this page. it's
never referred to as parameters now. Not in the GUI, CLI or any of the notes.

Page 31. The readline history is stored in /home/(user}/.yoshimi_history and is
a plain text dot file. It only records CLI entries.

Most to the part effect displays are still upside down. Dynfilter is correct,
but the box round A.S. A.M. A Inv now as a nice raised border, and the knobs
are the same size art the others in the window.

There are still several references to just the 'Panel' window, but everywhere
in the GUI it is now referred to as the Mixer Panel, and in some of the notes
just as the mixer.

Quite a few of the larger images don't show the part/kit/voice etc.

With the exception of the Mixer Panel (haven't got round to it_) all the
*vertical* sliders will return to their 'home' positions if right clicked
anywhere in their track.

I'm rather unhappy about the long paragraph on LV2 near the bottom of page 197.
In the first place it was just list discussion, and never intended to be a
permanent record. Also it is now completely untrue! It has been untrue since
Version 1.3.6 was released at the end of September 2015.

Also, since then all three sequencers have had very considerable development,
and of course Yoshimi has seen massive changes.

Maybe replace it with something like:

"Yoshimi's LV2 implementation is frequently tested using the latest versions of
Ardour, Muse and Qtractor as LV2 hosts. Like Yoshimi, these are also in
continuous development. So far we've not been able to get anywhere with Carla -
if someone is familiar with it We'd be interested in what results they get."

Talking of versions. The current release is 1.3.9 (end of February).

The next release will be sometime in June - I really don't want to leave it any
longer or people might think I'm losing interest!

However, although I would really like the version number to be 1.4.0 I don't
know if I can get enough of the new code in place and working reliably in time
to justify such a step. If not, it will have to be version 1.3.10

I've still got one piece of the GUI to identify, and it's proving to be a right
pig to pin down. It's the system effect sends and is one of those
programatically generated windows :(

This *must* be in place before I go any further. I've had to juggle the numbers
several times to get everything properly separated, and don't want to have to
do this once real code changes are being made.

The next stage in the development will be a hidden CLI entry where you will be
able to just directly type in the numbers and it will follow the tree to
perform the functions, and only once that is working reliably will I start to
strip down the GUI







te: Thu, 26 May 2016 21:25:26 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Something for the poor downtrodden GUI users :)
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

NRPN-ers and CLI-ers have been able to manage...

+ + + VECTOR CONTROL + + +

for quite some time, but now this has come in some small way to those
disadvantaged and having to push a pointer around on the screen.

If you look at the 'Yoshimi' drop down you'll see a new menu entry called...

+ + + VECTOR + + +

and clicking on that will open a shiny new window also marked...

+ + + VECTOR + + +

Almost all the settings are in place and working. The options menu doesn't do
anything, but will do eventually. For the time being your stuck with the CLI
for saves and loads.

So, have a play. See if anything breaks, and let me know what you think of the
layout.


At a later date I'd like to extend the window downwards and have a nice polar
graph tracking the sweet-spot - but there's other stuff to get on with first.





Date: Fri, 27 May 2016 21:03:39 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Something for the poor downtrodden GUI users :)
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Vector loading and saving is now there. Recent history should also be OK. When
a Vector file has been loaded a label appears at the bottom (alongside
'Close') for just that base channel.

Could do with some feedback on this before casting it out to the world :)




ate: Fri, 27 May 2016 01:03:43 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: A slight change of focus.
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Hi Chris,

Well I now have the trigger for V 1.4.0 :)

I'll put the id stuff on the back burner while I polish up GUI vector control.
In fact, I think I'll hide the id stuff in the next release and just keep it
active in master until it's ready for public consumption.

I see you've updated the effects windows. great stuff!

The other ones, off the top of my head were the controllers, oscillator and
addsynth global & voice list windows.

P.S.

In the next commit. Mixer panel sliders will also home if the slot is right
clicked.




Date: Fri, 27 May 2016 16:51:59 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: Re: A slight change of focus.
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

On Fri, 27 May 2016 05:38:08 -0400
Chris Ahlstrom <ahlstromcj@gmail.com> wrote:

> I'm blankin' on what the "id stuff" is.  Can you clarify?

The bit recognising which control has been used - not including vector control
yet!






Date: Tue, 31 May 2016 20:31:12 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Next release
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

I hope you guys are keeping up with me :)

In the current master, The vector control window is now complete. There is a
box alongside the 'Close' icon giving the name of the last loaded or saved
Vector for that specific base channel. If starting a new vector, first
select the base channel (1 to 16)  that you want to set the vector on. Next,
use the X and Y spinboxes to select the incoming CC - this isn't error checked
yet, as I haven't worked out the best way to do this. So if you set an invalid
one strange things may happen - although it won't actually do any harm :)

The instrument entries bring up the instrument list window in exactly the same
way as the main part one does, but I haven't implemented the right click
return. I have some doubts as to whether it would be wanted here as you are
likely to want to set 4 instruments one after another while holding the
vector window open for feature adjustments etc.

Incidentally, while working on this I discovered what was causing the mixer and
part names to sometimes get 'furry'. So that's fixed now.

The features you can set are fairly obvious - they tell you what they are!

When setting up a completely new vector, if you have the mixer or the main part
visible, they are slightly out of sync but correct themselves as soon as you
change an instrument or part - another detail that I want to try to get fixed
soon.

When you *clear* a vector it doesn't delete loaded voices, nor does it change
the active status of the part, nor the number of parts available. This is
because these settings may have been made independent of vector control. In
short, vector control will add things but not remove them.


Moving on, if you right click on *any* slider's track it will jump to its home
position. All the horizontal sliders now have their tracks indented so it's a
bit more obvious. I've also managed to make some of the slightly longer, and
sliders with the same functions are more consistent across all three engines.

The banks of vertical harmonics sliders seem to look better without this
indentation - otherwise it looks like some weird barcode :?

This juggling about also enabled me to make the tiniest knobs a bit bigger, so
they are also easier to manage (and look better).

During the process I uncovered another ancient bug going right back to Zyn
2.2.1. The default setting of the resonance dB roller (now slider) was 10dB out
from the actual value. The default setting in the *code* is 20dB so that is now
what it shows - and is.

Yoshimi has sprouted two new knobs in each engine. Bend, and Offset. These
apply to the pitch wheel behaviour - well they will do once I've sorted the
code out (hopefully before final release). We've been picking up and re-saving
these for a long time, just not doing anything with them.





te: Wed, 1 Jun 2016 19:30:25 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Next release Yoshimi 1.4.0 rc1
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

The 'Diamond Dove' is getting ready to fly :)

The last few details:

The vector control window is now fully in sync with the rest of the GUI.

Pitch bend and offset are completed.

Hands up those who knew that the AddSynth engine has overall resonance but it
can be enabled/disabled per voice?

Well it's a bit clearer now. The button's box is a little bigger and the label
is "Reson" instead of just "R."

This release candidate still has the experimental control logging. It's only
the final release that won't have it. Then, once the next master is committed
it'll be back again.






Date: Thu, 2 Jun 2016 18:03:45 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Next release Yoshimi 1.4.0 rc2
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Damn!

On rc2 already!
A mistake in the new vector control meant that 'Clear' was wiping out all the
vector names not just for that channel :(
Still, the good news is that you now have 'Clear Chan' and 'Clear All' :)







Date: Sat, 4 Jun 2016 17:19:35 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Next release Yoshimi 1.4.0 rc3
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

... and we have another one :)

Current master is rc3

I finally pinned down that bug with Echo & Distortion having the wrong defaults
for l/r cross. My guess is that they were the victim of the dangers of
copy/paste.

This control is used hidden by some of the other effects so has an overall
default value, but for these two specific effects it is different, and these
are independently set by just those effects. However, when I tracked them down,
the values were the same as the overall default!

When changing presets within an effect the values are obtained differently, as
groups from byte arrays. It's this code I modified so I could get individual
ones for the 'home' function. Everything now lines up!

Hopefully Frank's build fix will work for everyone. Please do shout if you have
a problem. I especially want this release to be as clean and complete as
possible.

If we can just get those sliders under mouse wheel control that would be the
icing on the cake. It will be the final piece of the puzzle for complete
consistency in the GUI.                                                          j

DONE


Date: Tue, 31 May 2016 20:43:03 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: Groveling apologies!
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Hi Chris,

Title says it all. I've once again changed the following windows:

Part Edit
AddSynth Base
Addsynth Voice
Subsynth
PadSynth Envelopes
Resonance

I really, really, REALLY hope this is the last time!

Also I think the Vectors window is now ready for inclusion.

I can't think of any changes needed for the GUI now, but there will probably be
some underlying code adjustments.

Once again, apologies for making more work for you.

DONE


Date: Sat, 4 Jun 2016 14:43:45 +0200
From: Frank Neumann <beachnase@web.de>
To: yoshimi@freelists.org
Subject: [yoshimi] Build errors on Mint 17, and a possible fix
X-Mailer: Sylpheed 3.4.1 (GTK+ 2.24.23; x86_64-pc-linux-gnu)
Organization: Disorganized, kind of.

haven't been building Yoshimi from source for quite a while, I tried it again
today on my LinuxMint 17 (Qiana), using gcc4.8.

I found hundreds of error messages like this:

/usr/lib/gcc/x86_64-linux-gnu/4.8/include/mmintrin.h: In function ‘__m64
_mm_cvtsi32_si64(int)’:
/usr/lib/gcc/x86_64-linux-gnu/4.8/include/mmintrin.h:61:54: error: can’t convert
between vector values of different size
   return (__m64) __builtin_ia32_vec_init_v2si (__i, 0);
 . . .

but wasn't sure at first what changed. Then, a bit of googling brought me to
the recently introduced C++11 standard changes.
This page:
http://stackoverflow.com/questions/19043109/gcc-4-8-1-combining-c-code-with-c11-co
de
stated that:
"...As it is not practical to comment a system header, a workaround is to use g++
--std=gnu++11 instead of g++ --std=c++11 as it does not define __STRICT_ANSI__. It
worked in my case.

It seems to be a bug in gcc."

So, I tried this:
franky@silence:~/src/audio/yoshimi-git/build/src> diff -u CMakeLists.txt.orig
CMakeLists.txt
--- CMakeLists.txt.orig 2016-06-04 14:29:38.518835880 +0200
+++ CMakeLists.txt      2016-06-04 14:30:53.324831450 +0200
@@ -24,7 +24,7 @@
     cmake_policy (SET CMP0046 OLD)
 endif (POLICY CMP0046)
 set (CMAKE_CXX_STANDARD 11) # we seem to need both for
-add_definitions(-std=c++11) # various versions of cmake
+add_definitions(-std=gnu++11) # various versions of cmake
 set (YOSHIMI_VERSION "1.4.0 rc2")
 file (WRITE version.txt "${YOSHIMI_VERSION}")
and was able to build Yoshimi fine again afterwards.

Not sure whether this can be regarded as an actual fix or just a workaround,
but I thought you might want to know.

AND Will's response:

Good catch Frank!

As luck would have it, I've been testing with gcc 4.9, 5.3, 6.1 Yours just
slipped underneath :o
This change seems to work correctly with these so will go in rc3.

rc3 will also have 'home' on right mouse click for all knobs as well as
sliders. However, this showed up another ancient bug.

When first selecting either Echo or Distortion the l/r crossover knob (LRc.)
shows the wrong value even though the correct one seems to be set. Change
preset then go back again and it's correct - our new 'home' feature also sets
it correctly. So far I've spent over a day trying to track this one down :(


Date: Sat, 4 Jun 2016 22:42:21 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: Yoshimi 1.4.0 rc3
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

It's OK, you're safe now. No more GUI changes :)

The *only* thing I'd like to get in place before release is mouse wheel control
of sliders, but I'm not having any luck at the moment :(

If I can't get it done, (and nobody comes forward to do it) in the next week or
so, it'll have to be passed over to the next version. In any case this will
have no effect on the GUI at all.

With the 'archaeological' bugs I've been fixing lately I'm hoping this release
will be as clean as possible, but I also want this ready before the middle of
the month.

For the user guide:

The fact that *every* control can now be homed with a right mouse click means
there is no longer a need for the few 'zero' and 'reset' buttons dotted
around, so they've all gone. Sliders are slightly odd in that if you right
click on the button itself nothing happens unless you move the mouse slightly,
you need to click on the track. Knobs are easy, just a click on them does the
job.


Vector control:

The 'base channel' refers to the incoming midi channel that a particular vector
setup will respond to and directly relates to the 1 to 16 range of parts in the
mixer panel.

Setting an X axis control CC will immediately enable the base channel part and
the part number + 16, as well as setting Yoshimi for 32 parts if it was less
than that. If it was the same, or was set to 64 the nothing changes. Setting
the CC will also ensure that both parts are actually responding to that midi
channel (they might have been set to something else, or even disabled).

You can't make any Y axis settings until at the very least the X CC has be set,
and if you set that back to zero, the Y axis is again disabled.

Setting a Y axis control CC will immediately enable the part (base channel +
32) and the part number + 48, as well as setting for 64 parts if it was
less than that. If it was the same, again nothing changes, and again the parts
are set to the correct midi channel.

The instruments that are loaded into the respective parts are always shown,
regardless of whether there is a configured vector or not. They are a direct
analogue of the main part instrument selector and behave in the same way. i.e.
click on them to open the instrument selection window.

There are tooltips for these along with Base channel and controller.


The features are pretty self descriptive as soon and you click on them! The
apply inveresly to the *pair* of instruments on each axis. You could have all
four if you wanted to, but it's probably sound a mess.

Options again are pretty obvious and follow a familiar pattern for load, save,
etc.

Loading or saving a vector will put the leafname in the bootm text field

Disabling or clearing vectors will *not* change the number of parts because
they may have already been set to increased numbers for some other purpose.
Similarly this will not clear any instrument patches that have been loaded.

Of course making any changes to the parts outside vector control will likely
mess them up. It won't do any harm - just be puzzling.





DONE:

Date: Sun, 5 Jun 2016 06:44:50 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: Re: Yoshimi 1.4.0 rc3
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Mornin' Chris.

The file extension is .xyv and it doesn't matter if you put it there or not. If
it's missing, or the wrong one it will be automatically replaced. This is
actually true of almost all file saves, and has been for quite some time now. I
just forgot to mention it to anyone :(

For vectors, (in common with external instruments and patch sets) it's up to
you as to where you save. The filer generally defaults to the either your user
home directory, or if Yoshimi was launched for userland, it's the directory you
launched from. Then as you guessed it's the normal browser selection.

Once saved, Options->Recent is your friend.

One day (not today) it will also be part of state save, and possibly patch sets
too. A severe lack of round tuit here :(

DONE:

Date: Sun, 5 Jun 2016 07:26:34 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: Re: Yoshimi 1.4.0 rc3
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

A quick recap on knobs.

Right click sends it to the home position. For things like Pan and detune it is
the mid position, for others it's whatever their default value is.

For everything except effects, a drag also gives fine adjustment. One day I
might get effects to do this too - Effects are just weird in every way :(

Left button drag normal adjustment.
Scroll wheel fine adjustment.
Middle button drag very fine adjustment.
Scroll wheel + ctrl extremely fine adjustment.



Date: Mon, 6 Jun 2016 07:04:54 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: Re: Ride With Yoshimi
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)



http://www.musically.me.uk/music/Ride_With_Yoshimi.ogg

These are from the original recording I made using two 'fixed' instances of
Yoshimi (before bank changes were possible), so may have slight variations in
levels.







Date: Mon, 6 Jun 2016 21:49:55 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: The expected comments :)
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Small point - title still showing V 1.3.9

Page 14 - Yoshimi now stamps ... as well as the nearest compatible Zyn version.
        - With the exception of ... no longer true :)

Page 30 - ... The Parameters / Save ... Patch Sets please :(

Page 39 - Please make a note that setting the Vector CCs also ensures that the
respective parts are set to receive the base channel.

Page 41 - X vector again? Should be Y
        - When setting up a completely new vector ... no longer true!

Page 63 - Parameter sets ... again. Last sentence before 5.3.3

Page 64 - The sentence is repeated at the top of this page.

Page 65 - Please make a note that removing a root path does *not* delete any
files or directories.

Page 191 - The feature numbers ... repeated.

Page 193 - (Chris asks: ... resolved I think!


page 199 - List history ... include vectors

As an aside, messing about with disabling or hiding menu items in fltk can
be... 'interesting', so what I'll do with vectors is pop up a 'Nothing to Save'
alert if someone tries to save an empty one. Clearing can stay as it is - it
doesn't make any system changes.






ate: Mon, 6 Jun 2016 20:43:06 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: A quick update.
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Hi Chris,

Work computer behaved as I expected - no problems :?

Also there's new branch called mwheel that Rob started off for me.
It now does two-speed mousewheel slider control. Normal is quite fast,
but holding down ctrl at the same time makes it go at the step size, which
gives the highest possible resolution for any given slider - give it a try.

A bit more testing and it'll go into master and be part of V 1.4.0.

I'm actually wondering if it might be an idea to do the same with the rotary
controls.






Date: Tue, 7 Jun 2016 22:38:16 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Next release Yoshimi 1.4.0 rc4
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

I don't think we've ever got to rc4 before :o

Anyway, there is a fix for a sneaky bug that could eat filenames - Thanks Chris.

Also Rob worked out how to get scroll wheel control of sliders, so that is also
in. The knobs have also been modified so they give similar scroll wheel
behaviour.

There is just one exception - the roller on the virtual keyboard. This is
actually a very strange control. It's sort of like a slider but with the knob
being the entire length of the track. It'll have to wait for another time.

So, to recap for all other controls:

Scroll wheel action gives you quite coarse movement, but hold down the ctrl key
and you get the maximum resolution of the slider or knob. In fact with some of
the frequency controls you'll think nothing is happening until you look at the
numerical box alongside!

A right button click takes the control to whatever its home position is.

Left button drags are the same as the always were, pretty much following the
mouse. If you are holding down the ctrl key you get much finer movement.

Some variations that will have to be worked on later:

Middle button drag on knobs gives quite fine control, and right button control
goes home first, then lets you have fine control on most knobs - not very
useful!

Middle button drag on sliders is exactly the same as left button drag and right
button only ever homes the slider.



Date: Fri, 10 Jun 2016 09:55:57 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Bugs and omissions
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

That's what rc5 is all about.

OK, stand up the person who was doing the 'home' function... Oh, that was me!
Id forgotten to allow for the *fundamental* in harmonics always homing to max
while the rest home to min :(


The virtual keyboard 'controller' was sending the correct home value but not
showing it correctly.


I'd also forgotten to update the incoming CC in vector control. When enabling,
it now only sets CC14 if you don't enter a valid number.
While looking at this I took the opportunity to make all forms of vector
control setting consistent, whether you do so via NRPNs, CLI or GUI.

When you set the X or Y incoming CCs the number of available parts is always
increased if it's not high enough. Required parts are activated and set to
listen on the base channel (they may have previously be set differently).


Finally, I've slightly modified the slider and rotary knob behaviour.
On both, right mouse click/drag *only* sets the home position. Later I want to
extend this for midi learn operations so don't want any confusion.

Mouse wheel and drag give very similar behaviour on knobs with Left & Middle
buttons, and the CTRL key.

Sliders more-or-less match this with the scroll wheel, but getting incremental
drags has proved to be elusive! It will have to wait.




Date: Mon, 13 Jun 2016 00:23:06 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Version 1.4.0 is out {phew!}
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Just to remind you...

V 1.4.0
Diamond Dove

About 18 months ago vector control became a 'thing' for Yoshimi and later, was
first demonstrated to a handful of people at LAC 2015. At that time it was only
accessible via NRPNs. Then about 6 months ago it became available to command
line users as well, and 3 months ago vector saving and loading became possible.

Now however, there is a shiny new window so the poor disadvantaged
pointer-pushers can also have full control. This is currently reached via the
'Yoshimi' tab, but we may move it to its own button. Also, saving and loading
vectors is now preserved in the recent histories file so you can quickly
restore these - the same as you can for saved patch sets, scales and states.

Vector entry via NRPNs and the CLI have also been upgraded slightly, so they
will now automatically set the right number of parts available, and enable the
required ones with the correct incoming channel number.


A new concept is shortform NRPNs. This is where instead of the NRPN setting up
for data entry of values, the NRPN is of itself the entire command. With a
suitable sequencer like Rosegarden, you start with a two byte value, then only
need to enter single byte CCs to change the setting. See doc/Shortform_NRPN.txt

This came about through discussion after my demo of channel switching on
MiniLAC2016. The idea was liked, but having to mess about with multiple NRPNs
and their data settings was a fiddle.


Some other usability enhancements:

Some people don't like our splash window - Boo!
You can now disable it in settings {mutter}{mutter}

Many people didn't realise there were two types of resonance interpolation,
determined by whether you click the left or right mouse button. This has now
been split into two with better tooltips.

Jack audio autoconnect is now configurable in the GUI and stored so you don't
have to set it with a startup argument.

In MIDI settings you can now tell Yoshimi to ignore the 'reset all controllers'
message - various bits of hardware and software can send these at the most
inappropriate times.

A right click on a button for a child window now closes the parent and a right
click on that child's close button re-opens the parent. Use this a few times
and you'll wonder how you managed without. Actually, this has been possible for
a long time with Root/Bank/Instrument windows :)

A right click on the track of any slider, or on any rotary knob will return it    to its home position.

There has been some shuffling in the GUI to make the different windows more
consistent and easier to recognise. This has also enabled us to increase the
size of the smallest control knobs. Most sliders are now indented - it makes
them more obvious.

Scroll wheel behaviour on both knobs and sliders has also been adjusted to be
more consistent. By itself movement is pretty fast, but hold down the ctrl key,
and you'll get very fine resolution.

Other matters:

Yoshimi now has a build number, and this appears in the startup log. That's
probably only of interest to those building the master, or for reporting bugs -
whatever they are :P

Actually, there are the usual bugfixes (ancient and modern) and we've also made
a small improvement in the way we handle an all-jack environment.

The compatibility work we did for V1.3.8 ensured the all-important instrument
files were correct, but we didn't have time to implement all of the controls.
These are now in place.

Currently there is quite a lot of preparatory work under way but its not ready
for prime time. It's still really proof of concept.




Date: Thu, 23 Jun 2016 10:32:06 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Current version
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Just been on a distro tour. Every one I can find is now carrying V 1.4.0.1, so
if you can't or don't want to self-build you can still get it.

A couple of small details:

You may have noticed that "64ft Organ" seems to have been changed. This hasn't
actually changed acoustically, but I recently noticed the sub-bass content was
shifted heavily to the RH channel - at such low frequencies you won't hear any
stereo positioning. There appears to be something odd with the low pass filters
when set to extreme levels, so I slightly changed the filter Q and added a
small left shift pan. This means your amplifier will have an easier time.

Following a discussion on Rosegarden:

On the subject of control ranges, originally Yosh/Zyn had a reduced MIDI volume
range, so as soon as you start up Rosegarden it immediately drops the level of
any parts that are active. I don't know why this was done, but a couple of
years ago we added a volume range setting in part controllers. This defaults
to the same value for compatibility, but if increased to maximum then gives a
1:1 relationship. If you prefer that, it's probably best to set it for all part
controllers then do a state save.

Hmmm. I wonder if we should provide a switch to auto-load a default saved state.




Date: Wed, 29 Jun 2016 22:30:13 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: A slight change of plan :)
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

On Tue, 28 Jun 2016 07:27:16 +0200
Kristian Amlie <kristian@amlie.name> wrote:

> Cool! I love these optimizations!
>

Quite a bit further now :)

Referring to:
/dev_notes/Yoshimi Control Numbers.ods

All the direct access controls are in place for both reading and writing in the
following sections:

Top level controls
Main part controls
Controllers
Kit edit window

Some of the control numbers have changed, so this document is only correct for
the current master.

These entries aren't fully error checked, so wildly wrong values could result in
{cough} undefined {cough} actions.










Date: Sat, 30 Jul 2016 21:28:51 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: More progress on direct access
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Well, we now have all effects accessible to direct control - with the exception
of the actual filter in dynfilter. However, that will automatically pop into
place when I get round to doing the filters.

In the process I made another curious discovery. Going through all the
parameters for each effect one at a time, I checked the direct access behaviour
against using the GUI control. This was fine until I got to parameter number 10
in chorus. There *was* no parameter 10 in the GUI, although it was definitely
there in the effects manager.

So, I loaded up the file in fluid to see if that would reveal anything. After a
bit of hunting around I found a hidden check button called 'Flange'. Anyway, as
I now had access to it I decided to see what it actually did. The answer is
'Not Much'. It seems to just disable the chorus effect and raise the volume
slightly :o

Up to now, all this code has been rather sprawling while I got to grips with
the underlying ideas, but now things are far more settled I've started
optimising it (although it's still working in parallel with the 'old' code).

Finally, I been updating dev_notes/Yoshimi Control Numbers.ods and have added a
new column with the min/max values - there are a lot of them so that's rather
slow and tedious :(




Date: Fri, 12 Aug 2016 20:13:57 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: More progress on direct access
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

On Sat, 30 Jul 2016 21:28:51 +0100
Will Godfrey <willgodfrey@musically.me.uk> wrote:

In the current master we now have Filters under direct control. Boy was that a
brain burglar! Everything is pointers to arrays... of pointers to pointers to
arrays :(

The toughest was DynFilter, which is an effect that has a filter component, all
sitting on top of a part number and effect number.

Still no GUI update when using the direct control. I'm leaving that till later.







Date: Fri, 5 Aug 2016 17:24:47 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Another small diversion
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

I need these to retain sanity while wading through the direct access stuff :(

Recently I got a new instrument bank. There are some interesting sounds in
there, but I was astonished to find one that took 11 seconds to load! The good
news is that this gave me two ideas.

The first was to make a program change to it in a silent track in the middle of
one of my test files. I'm delighted to say it loaded without any Xruns, and not
so much as a burble from the playing tracks :)

The other idea, was to provide reporting of load times, making it easier to
work out how far ahead a program change needs to be in order to be ready for
playing. In the current master, that is now there and is in whole milliseconds,
and will be tacked onto the instrument load message if enabled.


Another thing that was mentioned a very long time ago (and I'd completely
forgotten about) was to enable auto-loading of a default state file. This is
also now in place, and if set it will try to load:
/home/{user}/.config/yoshimi/yoshimi.state
If it's not there, then it will simply carry on with the normal settings.

The advantage of this is that you can set up a complete patch set of instruments
you commonly use, and with all their settings (including audio destination).
Save it to the default state and it will be loaded (along with the
system settings) every time you start Yoshimi.

To revert, simply uncheck the setting (and change any other needed) and save
settings.


The 'Main Settings' tab was already getting pretty crowded so now there is a
new tab called 'Switches', and I've moved all the system check boxes there as
well as adding the two new ones.

Hmmm. I expect I'm in trouble with Chris now :p





ate: Sat, 6 Aug 2016 21:24:45 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Another small diversion
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

This has actually been very instructive!

Almost all pure SubSynth patches are 1mS on my machine.

AddSynth ones can be that low, but rapidly go up into the tens if you have
things like unison and/or modulators operating.

PadSynth ones start at around 40mS and are frequently up to 80mS. Then of
course, there's that monster at 11.5 seconds!

In the current master I've also added root and bank load times (MIDI & CLI
only), but they are in microseconds! Typically 15uS for a bank change and 30uS
for a root change. It's probably not worth recording that.

Now back to direct access. That break gave my subconscious time to come up with
an idea for managing filters :)







Date: Tue, 9 Aug 2016 22:19:31 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] A funny thing happened to me at the bank
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Instrument bank that is.

To stop very slow program loads freezing the GUI (only happens when GUI
initiated) instead of directly accessing program change, this now goes through
the more correct ring buffer route (still not totally kosher actually). However
this showed up and incredibly obscure bug!

The idea, is to check for files with a numerical index and hyphen. If either of
these was missing then it would be regarded as a plain name and listed at the
top of the stack away from midi numbered entries.

However, if the numerical part of the instrument filename is less than 4 digits
and there is also a space in the filename at the 6th character, this would
appear in the apparently correct place in the bank, but would be unrecognisable
for load operations. e.g.

Filename is '103-A name'

The original routine would scan through for digits until it hit the
hyphen, assume it was correctly prefixed, then jump 5 characters to where it
thought the name itself started and copy this into the stored instrument
name.

When trying to load a file from a bank it would check for a valid slot name,
and seeing the space *at the start* it would think there was no instument there,
even though the actual filename is correctly stored in a different part of the
map!

Rather than be pedantic and insist on exactly 4 digits, I've modified the code
so it will accept any number and adjust the name start accordingly - although
if the number is greater than 160 it will still end up in the 'naughty'
column :)

Now where was I?
Oh, yes {sigh} direct access :(







Date: Sat, 13 Aug 2016 23:14:40 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: A funny thing happened to me at the bank
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

This has turned up another oddity.

Program loads have never been quite as clean with LV2 as with standalone, and
when I checked out monster patch... No, wait! This could now justifiably be
called the 'Heffalump Patch'.

Anyway, on LV2, trying to load this caused literally hundreds of XRuns. This
was the same regardless as to whether it was loaded by the GUI, CLI or LV2
itself. This was very puzzling as the 'outside' controls all used a ring buffer,
that worked perfectly in standalone mode, while LV2 hosts made direct calls to
the code.

Eventually running htop gave me the clue. In LV2 mode all of Yoshimi's threads
were running at a much *higher* priority than the LV2 host (regardless of which
one it was). The reason for that was that when Cal did the first major
improvements to Jack, he set the priority high then made a call to the jack
subsystem to adjust it down to the highest allowable priority. All threads are
then steped down from that. But, that call isn't made in LV2 mode (I don't
think it can be actually) - hence the effective priority inversion.

The fix for that was to set the initial priority much lower. With that done
external program changes are now quite seamless in LV2. There is also a very
slight improvement in an all Alsa environment.

Previously (unaware of the priority issue) I had tried diverting LV2 program
loads through the ring buffer and had been puzzled by things getting worse
rather than better. Now, however these are perfectly clean, including the
Heffalump Patch. It's quite fun watching one processor swing up to 100% while
everything else just trundles along as if nothing was happening :)




Date: Mon, 15 Aug 2016 22:58:52 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] A tweak, an nudge, a shove...
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

... and we now have vector controls that are set on any and all channels
stored in both patch sets and saved state :)

This was supposed to have been in place some time ago :o






Date: Tue, 16 Aug 2016 23:42:02 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: A tweak, an nudge, a shove...
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

On Mon, 15 Aug 2016 18:34:46 -0400
Chris Ahlstrom <ahlstromcj@gmail.com> wrote:

> Letter bait than never!  :-)
>

Hi Chris. Numour Hoted :)

All these little diversions  (while recovering from bouts of the scary stuff)
are sort of related in that they are completions of older work and tend to
follow on, as each one reminds me of the next.

The latest surrounds the issue of 'Simple Sound' - which certainly isn't simple
to sort out. So, a little history :)

Original Zyn (I *do* like that!) let you save a file with no internal name, and
if you had a part with the default instrument enabled, that would also be
pointlessly saved - with no name. As both of these could be reloaded you didn't
actually know what was currently resident.

One thing I did quite a while ago was to ensure the name field always
displayed *something* as, apart from anything else, users didn't realise it was
a name field! Unfortunately, at that time I didn't know that default
instruments were saved, so now instead of getting loads of untitled one you
got Simple Sound instead, but you still get unnamed ones from Zyn banks, even
from the latest version.

So, the final answer (maybe) in the latest master.

If you load an external instrument file with no internal name, you'll be shown
the file leafname.

If you load an external instrument file with the name 'Simple Sound', you'll be
given the name 'No Title'

If you load a patch set that has unnamed instruments, or ones with the name       'Simple Sound', those will be given the name 'No Title'

The part and mixer name fields will always show the (possibly adjusted)
internal name regardless of the external filename, which could easily have been
changed at some time.

The instrument banks will always show the file leafname, so it more-or-less
matches external files (or what you see from a filer display).

As soon as you edit an instrument, if it was 'Simple Sound' the name will be
changed to 'No Title'.

Yoshimi won't let you rename an instrument to 'Simple Sound' :p
... but you can have 'Simple sound' if you really want it.

Default instruments are never saved, not even in patch sets and states, but if
the parts are activated that fact *is* saved - it's a part feature not an
instrument one.

Patch sets will save all other instruments regardless of whether they are
activated or not.

When you save an instrument to a bank slot, it will be given a filename with the
internal name as the leafname.

When you save an instrument to an external file, you will first be offered the
internal name and in the current directory, but you can change it if you wish.

Hmmm.
I'm sure 'the kitchen sink' is supposed to come into it somewhere






Date: Thu, 18 Aug 2016 19:18:22 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: A tweak, a... wot?.
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Just discovered another little oddity.

If you have an instrument kit, but switch kit mode off then if you save it, the
kit information is still stored (just as it should be), but when you try to
reload the instrument none of the kit information is fetched!

Well it is now :)

This also revealed that loading an instrument doesn't update the kit window-
although the kit is all there and sounds correctly. Do the usual dance of
switching part back and forth and it magically reappears. However, if that
instrument is part of a patch set everything is hunky-dory. I spent several
hours trying to track this down, but was getting nowhere, so it's added to the
to-do list :(

While testing all this, I created a new multi-part instrument kit. I rather
liked the sound so it's now in the 'companion' set and called 'Pad Kit'. I also
found a couple of instruments that I hadn't filled the info fields, so they've
been updated too (without any change to the sound).

Onwards and upwards :)





ate: Mon, 22 Aug 2016 22:06:16 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: (another) tweak.
X-Mailer: Claws Mail 3.14.0 (GTK+ 2.24.30; x86_64-pc-linux-gnu)


After much scanning of the 'net, I finally worked out how to get static
variables in a class properly accessible externally.

The significance of this is that I can set up critical config settings to be
writeable only by the main instance, but readable (and used) by any others. In
the current master this applies to AddSynth Oscillator Size, Internal Buffer
Size, and Alsa Samplerate. These three *must* be defined before any other
initialisation.

At the moment, secondary instances show these figures de-activated, but I think
they should probably be hidden. Apart from anything else, it means I don't have
to work out GUI code to update them every time they are changed by the main
instance :p

I can't think of any practical situation where the would be different across
instances, and there are one or two others (compression level?) that could fit
into this regime.





Date: Tue, 23 Aug 2016 23:27:09 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: (another) tweak.
X-Mailer: Claws Mail 3.14.0 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

On Mon, 22 Aug 2016 17:58:05 -0500
Jonathan Brickman <jeb@ponderworthy.com> wrote:

> Even more performance!!! I love it!!!!! :-)
>
> J.E.B.

It rather opened a door :)

We now have instance data separated from the main config file and carrying the
name 'yoshimi-{n}.instance

There are two new 'switches':
        enable GUI
        enable CLI

These now don't have to be set only from a command line. They are sanity
checked - you can't disable both! You are also warned that disabling the GUI
can only be reversed from the command line.

The list of hidden 'base parameters' that are set only by the main instance is
now:
        sample rate
        buffer size
        oscillator size
        Gzip copmpression
        enable GUI
        enable splash
        enable CLI

In the other instances these are now hidden instead of deactivated. I think it
makes more sense as they are *never* enabled. All of this makes things just
that more consistent and yoshimi's config directory a bit tidier.

The first time you run the current master, you'll find all the above have been
set to the defaults, as their file locations have changed.

For the coming release I want to go through all this lot with a fine tooth comb
and - for once - shake out any bugs *before* the release!

The biggie I want to sort out (much later) is to make banks a common file. I've
never been happy with them being per instance. In the first place it's easily
possible to make them quite inconsistent, and secondly it wastes memory.
Finally it also greatly slows down starting later instances.

However, this will need a lot of thought as I not only want a single banks file
(and internal map) but also want to allow people to edit roots/banks/instruments
from any instance with all open windows kept in sync.




Date: Thu, 25 Aug 2016 19:12:36 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: (yet another) tweak.
X-Mailer: Claws Mail 3.14.0 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Current root and current bank settings have now been moved from 'banks' to the
'config' and 'instance' files, so the banks file now consists *only* of the
bank structure.

As a point of interest, the new config file includes the instance data for the
main instance. For many people (who don't use multiple instances) this will be
the only config type file they have.

I have finally managed to make a first time startup correctly identify
'arpeggios' both in the instrument bank list, and current bank setting - it's
been a long time coming!

Hmmm, one day I must find out what happens if there are no banks anywhere on
the system - a rather contrived situation.

And on that note, the current master is version 1.4.1 rc1.
No matter what the temptation I'm not going to fiddle with this before release
time, unless anyone finds a bug!






Date: Fri, 26 Aug 2016 19:46:56 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: (yet another) tweak.
X-Mailer: Claws Mail 3.14.0 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Well, I found a bug :(
Squashed in rc2 :)

If you opened multiple instances, then closed them one at a time it disabled
the GUI when restarting - yes it was weird!

At the same time I noticed some of the settings windows now had incorrect
wording on the bottom line - also fixed.

Checking the (fairly new) shortform NRPN for making fast silent patch 'changes'
I realised I'd overcomplicated it, so that's simplified now. I then realised it
would be trivially easy to set up a GUI implementation. Also done now and in
Yoshimi->Settings->MIDI and called 'Channel Switch'.

Just to go over the details:

This takes two forms. Row, means all of the first 16 channels will be set to
channel 1 but with only one active, and your CC will dial up any of the parts
disabling the others. This is aimed at live players.

The other form, Columns, needs Yoshimi to be set for 64 parts, and this time
you select 1 of 4, but per channel, and this is much more suited to post
recording automation.

So, if you want to use this to change parts on (say) actual channel 3 - counting
from zero, sending 3 with your defined CC will enable part 3 but disable parts
19, 35, 51. Similarly sending 35 enables that part to respond to channel 3
messages, disabling the others.

To keep it all lightweight, you need to load and activate all the patches and
parts you want, but that could be from a saved patch set, and the channels are
only changed from the very first time you send the CC.

If you want to look really clever the whole lot can be bedded in a MIDI file :)




Date: Mon, 29 Aug 2016 20:08:13 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: (yet another) tweak.
X-Mailer: Claws Mail 3.14.0 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Still not quite there yet.

The aforementioned ancient 'pooter has been given a new drive, but it seems the
current debian no longer has a driver for the graphics card, so it is running in
frame buffer mode and v e r r y  s l o w :(

However, I installed and ran up Yoshimi. Everything seemed fine until trying to
load the Heffalump patch then there were a very considerable number of Xruns :(

At first I thought this was just due to it being a single core machine, but on
further investigation discovered if I take program loading right out of the RT
scheduling altogether (not even the lowest setting) then it seems fine - albeit
taking a minute and a half!

Running it on my other machines seems to show exactly the same timings as it
did before (including as an LV2 plugin), so I think it's OK. The only possible
issue that might possibly occur is if a very hungry high priority thread
effectively blocks it, but that seems unlikely, and won't happen at all on a
multi-core machine.

So, here we are with rc4.





Date: Sun, 4 Sep 2016 17:41:13 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: V 1.4.1 - tomorrow?
X-Mailer: Claws Mail 3.14.0 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Two more bugs fixed, although neither would have been show stoppers, and now
both my DAW and office 'pooter have had many hours with Yoshimi continuously
running. It has taken everything I've thrown at it with a shrug. The only
time I got Xruns was when I was messing about with a web browser while
Rosegarden/Yoshimi were playing an 8 part tune ... buffer size 64 frames :)

The channel switching is working beautifully. I've been able to play a piece
that needs to live switch between 10 instruments, using an Arduino-based foot
switch to do the channel changes. This holds a channel number (starting with
zero) and increments/decrements it depending on which switch is pressed, then
sends the resulting CC.

Like so many things, it's only when you use something seriously you get to find
out what *else* it can do :)

Well, in this case the 'else' is that if you set for 32 parts, while merrily
switching the 'top' row the next row continues to look at their respective
channel numbers, so ignoring the first of these, that's another 15 'fixed'
patches you can have, all driven as a backing band via a sequencer !!!

Now you'll have to excuse me while I go and have another play :)






Date: Wed, 7 Sep 2016 17:45:04 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: V 1.4.1 - tomorrow?
X-Mailer: Claws Mail 3.14.0 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

On Tue, 6 Sep 2016 22:02:13 +0200
Kristian Amlie <kristian@amlie.name> wrote:

> On 04. sep. 2016 18:41, Will Godfrey wrote:
> > Like so many things, it's only when you use something seriously you get to
find
> > out what *else* it can do :)
>
> With me being so paranoid about stability when using Yoshimi in musical
> work, I'm really happy to read about this intense testing!
>
> Kudos on the Lyrebird!

I fully understand your caution!

Wanting to keep that user confidence is one of the reasons I even try to ensure
pushes to 'master' are stable.

Apart from that obscure illegal write bug - now fixed, I don't know of anything
that can actually crash Yoshimi these days. Even pulling the rug out from
underneath by stopping Jack won't make it lock up (it used to some time back).

The only exception is using the experimental 'direct access' from the command
line, as this has virtually no error checking. Which reminds me, I must include
that warning in the dev notes!





Date: Mon, 5 Sep 2016 00:28:40 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] V 1.4.1 - The Lyrebird is out of it's cage :)
X-Mailer: Claws Mail 3.14.0 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

I couldn't sleep (too much brain activity) so pushed this out now, rather than
later today.

Just to recap the major points.

Maybe not be the prettiest, but this bird sure knows how to create great sounds!

First of all, we have a new quick guide that's in Yoshimi's 'doc' directory.
It's just something to help new users get started.

We've always logged warnings if it wasn't possible to run either audio or MIDI,
but now we also give a GUI alert.

From this version onward it is possible to autoload a default state on startup,
so you have Yoshimi already configured exactly as you like, with patches loaded
and part destinations set etc.

To make it easier to position program change CCs in a MIDI file, there is a new
option to report the time these take to load.

Vector control settings are now stored in patch set and state files.

We implemented a simpler way to perform channel switching so the 'current' MIDI
instrument can seem to be changed instantly, but retaining the note tails of
the previous one.

All the usual background improvements.

When installed, full details are in either:
    /usr/local/share/doc/yoshimi/Yoshimi_1.4.1-features.txt
Or:
    /usr/local/share/doc/yoshimi/Yoshimi_1.4.1-features.txt




Date: Wed, 7 Sep 2016 21:39:27 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Fun
X-Mailer: Claws Mail 3.14.0 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Just thought I'd mention that yesterday I 'wasted' and entire evening playing
with the new channel switch feature, running it in 'single row' mode.

With early tests I was using a rotary controller on my keyboard - doable but
you've got to be rather precise!

Since then I built an Arduino based controller with two foot switches,
specially for this. It stores a part number internally, then depending on which
switch I press, it increments or decrements the value and sends it via the
appropriate CC.

I used to (try to) play one of my compositions from a long time ago on a Yamaha
SY22, switching between voices. The timing was really critical, and it never
actually sounded good.

Anyway, yesterday I was playing it on Yoshimi so much my wrists were aching -
doing ten fast patch 'changes' totally seamlessly, with all proper note
releases and reverb tails.

Just messing about, at one point I was able to get all 10 of those parts
showing release tails at the same time in the mixer panel, and had a good
giggle!

Now I'm practising double and triple tapping the switches so I can jump
backwards or forwards across a full bank of 16 parts. It's just pure fun, and
so liberating for this wannabe live musician!




Date: Sat, 10 Sep 2016 20:12:39 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Nose... grindstone, grindstone... nose.
X-Mailer: Claws Mail 3.14.0 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Direct access to Envelopes is now 99.999% done, which makes the whole of
SubSynth 'feature complete' - just the precise settings when switching to
freemode to be decided. Freemode was, um, interesting. It also meant going up
to a massive *eight bytes* for IDing everything :p

LFOs are also done and were actually easier than I expected. Makes a change :)

I think PadSynth should be next on the agenda, then Resonance and the
oscillators. That should make the biggie (AddSynth) a bit less of a mountain
climb.

Time for a cup of tea I think.

TTFN.





ate: Sun, 18 Sep 2016 07:08:40 +0200
From: Tony Travolta <dj.ton.e@gmx.de>
To: yoshimi-user@lists.sourceforge.net
Subject: [yoshimi-user] merging a patch set into parts 17,18,19, how?

[-- Attachment #1 --]
[-- Type: text/html, Encoding: 7bit, Size: 0.9K --]

[-- Autoview using w3m -I 'UTF-8' -T text/html --]
Dear yoshimi friends,

this is my first post. Following scenario. I have filled parts 1..16 already.
Then I switched to 32 parts mode. Great, now I have another empty part slots
17..32. From the past experiments I know there is a patch set I would like to
use now, together with what I have already in the parts 1..16.

So the question is:  Is there a way to merge a patch set, without destroying
all loaded parts so far into yoshimi?

Here an example patch set, I would like to merge, also as an example:
https://www.youtube.com/watch?v=wD08ocvNcns#t=6m37s






ate: Sun, 18 Sep 2016 15:40:35 +0200
From: Tony Travolta <dj.ton.e@gmx.de>
To: yoshimi@freelists.org
Subject: [yoshimi] Fw: Re: [yoshimi-user] merging a patch set into parts
        17,18,19, how?

[-- Autoview using w3m -I 'UTF-8' -T text/html --]
Ok, thanks Will,

yes, after merging a new patch set, I would usually adjust the midi channel
value to what I want. My main workflow would be in future then, in steps of
'patch sets', often each using 3 parts. It would be cool if yoshimi would be
intelligent enough and check the highest available midi channel in current
parts, then count up one, for the new imported patch set.

Two examples:

I am using already midi channels 1..5, in the parts 1..16.  Now merging a new
patch set using three parts with midi channels 1..3 into part 17.  What would
yoshimi do? Highest midi channel is 5. Thus it would import as:
part 17:  midi channel 5+1
part 18:  midi channel 5+2
part 19:  midi channel 5+3


If my merged new patch set would use only a single midi channel, e.g. midi
channel 1, it would do:
part 17:  midi channel 5+1
part 18:  midi channel 5+1
part 19:  midi channel 5+1

Best regards
Tony

Ps. My midi channel switching I do inside Sequetron by Phil Tipping.
http://myweb.tiscali.co.uk/philweb/philizound/freebies/software/sequetron/
sequetron.html


Two yoshimi examples from me, some improvisation playing around, for those who
are interested:
Example 1, from below:  https://www.youtube.com/watch?v=wD08ocvNcns#t=6m37s
Example 2: https://www.youtube.com/watch?v=3WSHQNGWHGg#t=15m22s



Gesendet: Sonntag, 18. September 2016 um 10:19 Uhr
Von: "Will Godfrey" <willgodfrey@musically.me.uk>
An: yoshimi-user@lists.sourceforge.net
Betreff: Re: [yoshimi-user] merging a patch set into parts 17,18,19, how?
On Sun, 18 Sep 2016 07:08:40 +0200
"Tony Travolta" <dj.ton.e@gmx.de> wrote:

> Dear yoshimi friends,
>
> this is my first post. Following scenario. I have filled parts 1..16 already.
Then I switched to 32 parts mode. Great, now I have another empty part slots
17..32. From the past experiments I know there is a patch set I would like to
use now, together with what I have already in the parts 1..16.
>
> So the question is: Is there a way to merge a patch set, without destroying
all loaded parts so far into yoshimi?
>
> Here an example patch set, I would like to merge, also as an example:
> https://www.youtube.com/watch?v=wD08ocvNcns#t=6m37s
>
> Best regards
> Tony

Hi Tony,

This isn't currently possible, but it's a thought :)
The only way I can think of that you could, sort of, do it, would be to
externally patch together the xml files, but it might be quicker to just save
out the one set as individual patches then reload them into the other.

Also, remember that the second set (usually) share the same MIDI channels as
the
first, so to make use of them you either need to be using things like vector
control, or changing the key ranges to effectively get per channel split
keyboard.

I notice that the version of Yoshimi in the vid is now quite old. There has
been a lot of development since then including an instant channel switching
feature for fast solo instrument changes.

Finally, these days our main discussion list these days is:
https://www.freelists.org/archive/yoshimi
To post, email to:
yoshimi@freelists.org

--
Will J Godfrey
http://www.musically.me.uk
Say you have a poem and I have a tune.
Exchange them and we can both have a poem, a tune, and a song.






Date: Tue, 20 Sep 2016 22:34:28 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Fw: Re: [yoshimi-user] merging a patch set into parts
        17,18,19, how?
X-Mailer: Claws Mail 3.14.0 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

On Sun, 18 Sep 2016 15:40:35 +0200
"Tony Travolta" <dj.ton.e@gmx.de> wrote:

> Ok, thanks Will,
>
> yes, after merging a new patch set, I would usually adjust the midi channel
value to what I want. My main workflow would be in future then, in steps of 'patch
sets', often each using 3 parts. It would be cool if yoshimi would be intelligent
enough and check the highest available midi channel in current parts, then count
up one, for the new imported patch set.
>
> Two examples:
>
> I am using already midi channels 1..5, in the parts 1..16.  Now merging a new
patch set using three parts with midi channels 1..3 into part 17.  What would
yoshimi do? Highest midi channel is 5. Thus it would import as:
> part 17:  midi channel 5+1
> part 18:  midi channel 5+2
> part 19:  midi channel 5+3
>
>
> If my merged new patch set would use only a single midi channel, e.g. midi
channel 1, it would do:
> part 17:  midi channel 5+1
> part 18:  midi channel 5+1
> part 19:  midi channel 5+1
>
> Best regards
> Tony
>

Just a quick note to say I haven't forgotten this, it's just that I'm up to my
eyeballs in 'stuff'.





Date: Tue, 20 Sep 2016 22:36:51 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: V 1.4.1 - The Lyrebird is out of it's cage :)
X-Mailer: Claws Mail 3.14.0 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

On Tue, 6 Sep 2016 18:19:20 +0100
Will Godfrey <willgodfrey@musically.me.uk> wrote:

> On Mon, 5 Sep 2016 11:13:37 +0100
> "Tom" <dmarc-noreply@freelists.org> (Redacted sender "madtom1999" for DMARC)
> wrote:
>
> > Just as a comment on the The Short Yoshimi Guide I find the easiest way
> > to get users started is to ignore jack and 'boot' into alsa and use
> > Aconnectgui to connect your midi keyboard into Yosh.
> >
> > Tom
>
> This is a very valid point, and related to that I'm wondering if the very first
> time default should be changed from all Jack to all Alsa.
>
> With the way Yoshimi has developed over the years, it is now trivially easy
> for an experienced user to change the settings, which will be remembered
> permanently - unless some idiot changes the config files :p
>
> I don't have strong feelings either way myself.
>

Just an additional thought. If a new user doesn't have jack running on first
startup, they *will* be in an all Alsa environment, as Yoshimi tries this if
it can't find the jack server.





Date: Tue, 20 Sep 2016 22:41:09 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Nose... grindstone, grindstone... nose.
X-Mailer: Claws Mail 3.14.0 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

On Sat, 10 Sep 2016 20:12:39 +0100
Will Godfrey <willgodfrey@musically.me.uk> wrote:

> Direct access to Envelopes is now 99.999% done, which makes the whole of
> SubSynth 'feature complete' - just the precise settings when switching to
> freemode to be decided. Freemode was, um, interesting. It also meant going up
> to a massive *eight bytes* for IDing everything :p
>
> LFOs are also done and were actually easier than I expected. Makes a change :)
>
> I think PadSynth should be next on the agenda, then Resonance and the
> oscillators. That should make the biggie (AddSynth) a bit less of a mountain
> climb.
>

All now done except AddSynth :)



> All now done except AddSynth :)
>
Actually that's not true.

AddSynth is done as well now :@)

After some more testing, the next step is to start integrating this properly.
I'll probably start with full command line control (as this is in the same
region and the ring buffer already points there).

Meanwhile, has anyone else been playing with the channel switcher?





Date: Tue, 20 Sep 2016 23:17:06 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: A question
X-Mailer: Claws Mail 3.14.0 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

On Tue, 30 Aug 2016 21:52:02 +0100
Will Godfrey <willgodfrey@musically.me.uk> wrote:

> Currently the new channel switcher is disabled every time you load a patch, set
> so has to be set again each time.
>
> Is this the right thing to do?
> Or should it remain in place?
> Or should it become part of the patch set and be loaded and saved with it?

Having now spent quite a lot of time actually using this, I'm convinced it
should be stored in patch sets. However that presents a logic problem, as the
control is currently in 'Settings'. All existing stored settings are only found
in config or state files, and I would rather like to maintain this consistency.

So, (without being rude) where do I put the switcher control?





ate: Wed, 21 Sep 2016 12:33:10 +0200
From: Tony Travolta <dj.ton.e@gmx.de>
To: yoshimi@freelists.org
Subject: [yoshimi] Aw: Re: A question

[-- Autoview using w3m -I 'UTF-8' -T text/html --]
One idea, for a switcher file per patch set.

if name_of_switcher = name_of_patchset
    load this switcher file
else
    load from elsewhere

New switcher files can be saved in the same directory as a patchset, with the
same name, only different extension, maybe name.switch , if it exists this will
be used instead of some other default setting from somewhere. Just an idea. I
do not know much of yoshimi system.

Best regards
Tony






Date: Thu, 22 Sep 2016 11:03:01 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Aw: Re: A question
X-Mailer: Claws Mail 3.14.0 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Just to clarify.

There are just two extra parameters involved, and I would envisage them being
embedded in the patch set file itself. The problem is where to actually place
these in the GUI so they fit in stylistically and don't clutter any of the
'front' windows.




ate: Thu, 22 Sep 2016 10:58:46 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: new instance for each patch set, a good idea?
X-Mailer: Claws Mail 3.14.0 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

On Wed, 21 Sep 2016 23:03:20 +0200
"Tony Travolta" <dj.ton.e@gmx.de> wrote:

> What about using for each patch set a new yoshimi instance? Bad idea? What would
be the disadvantages?
You can do that, although you would need to have each instance looking at a
different MIDI port and maybe run some kind of port switching script.

This all seems to be getting very complicated and I'm wondering if you've
considered the simplest option.

At any time you can silently perform a standard MIDI program change to any
non-sounding part. We have a demo vid on youtube that shows exactly this.
https://www.youtube.com/watch?v=rDIvkfoYYss

Also, on miniLAC2016 I demonstrated a much longer piece that was performing bank
*and* program changes all the way through.

Doing a program changed doesn't change the channel number the part is listening
to.

Does that help at all?



Date: Thu, 22 Sep 2016 12:11:46 +0200
From: Tony Travolta <dj.ton.e@gmx.de>
To: yoshimi@freelists.org
Subject: [yoshimi] Aw: Re: new instance for each patch set, a good idea?

[-- Autoview using w3m -I 'UTF-8' -T text/html --]
Thanks, this video I watched before*. Regarding ports no problem, I would
simply route to those 5 ports from a single port in the midi sequencer, in my
case Sequetron by Phil Tipping. Their midi channels have to be still
complementary.

How do banks and directories work in yoshimi I could not understand fully. It
seemed to me I can not have for each part a different base directory? This was
like a showstopper, if even parts change their base directory where I did not
change it. For me ideal would be:

-part1:dir1/patch_a
-part2:dir2/patch_b
...
-part16:dir16/patch_c

If I change dir16 using bank select and program change events in part16 I do
not want the other dirs to change. They should still keep their positions, so
pure program change events in those parts, would change from their banks, and
not the last used bank. I tried various settings but could not achieve this
behaviour. Is this possible currently?

Best regards
Tony

* I will search now for miniLAC2016.




Date: Thu, 22 Sep 2016 13:09:18 +0200
From: Tony Travolta <dj.ton.e@gmx.de>
To: yoshimi@freelists.org
Subject: [yoshimi] how to save multiple instance yoshimi setup?

[-- Autoview using w3m -I 'UTF-8' -T text/html --]
If I use 5 instances and want to save the entire 'instance state', is this
possible? I guess no. This would be the reason not to use this way. Otherwise
that would be useful.

Best regards
Tony



Date: Thu, 22 Sep 2016 19:44:56 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: how to save multiple instance yoshimi setup?
X-Mailer: Claws Mail 3.14.0 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

On Thu, 22 Sep 2016 13:09:18 +0200
"Tony Travolta" <dj.ton.e@gmx.de> wrote:

> If I use 5 instances and want to save the entire 'instance state', is this
possible? I guess no. This would be the reason not to use this way. Otherwise that
would be useful.
>
> Best regards
> Tony

Interesting. That's never come up before, but is a valid point. Currently,
Yoshimi saves state on a per-instance basis, whereas logically, there should
only be one state file for any given session which should include all enabled
instances, and should be able to re-open these exactly as stored.

I don't know what the implications of that are, and will need to discuss it
with other devs, but I'll certainly put it on the to-do list (don't hold your
breath).



Date: Wed, 5 Oct 2016 19:38:45 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Synthfest UK
X-Mailer: Claws Mail 3.14.0 (GTK+ 2.24.30; x86_64-pc-linux-gnu)


I'm fairly well known now as 'Mr Yoshimi' and got a few enquiries as to how
development was going. Also a couple of people commented very favourably on our
new demo:

https://www.youtube.com/watch?v=kzBy5tnDoBw

On top of this, we had some excellent weather for the days I was in Derbyshire,
and I was pleasantly tired after many very long walks in the dales. The B&B I
was staying at was excellent. Lovely people, great breakfasts and stunning
views out of every window.





Date: Fri, 7 Oct 2016 16:01:08 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: Yoshimi user guide
X-Mailer: Claws Mail 3.14.0 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Hi Chris,
You've been very quiet lately :(

While trying to track down something quite different I've found the text that's
supposed to go with that phase spectrograph.

#####################

The following picture describes how this works on white noise. Light blue
signals that the frequency is not present at the current time,and dark blue
signals the opposite. The dark blue peaks appear if the delay time is very
short, because then, the second path almost equals the first one, which results
in duplication of the signal. If the delay line is very long, then it is (in the
case of white noise) totally at random whether the delayed signal currently
duplicates the unchanged path, or whether it cancels it out to zero. This
random effect results in white noise between the clear blue structures.

#####################

What I was *actually* looking for was information on the formant filter. I'm
beginning to get the concept, but there is a dearth of information about it and
a few gaps in my understanding - especially in respect to the sequencing.






Date: Tue, 11 Oct 2016 19:13:01 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Boo! :¬)
X-Mailer: Claws Mail 3.14.0 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

One of the things about all this 'underground' work is that I have to get a
much better understanding of how the whole of Yoshimi works. The latest
head-scratcher was understanding formant filters. The man himself was able to
clarify this, as below:

"The easiest way to understand the formants/wovel is to image at the first
that each vowel contains a single formant.

In that case each vowel consist in sequence of band-pass filter (with
Q/frequency/amplitude). These vowels are arranged on a line (sequence) and
the space between them is controleed by the "Strch" (lower right). This
sequence could be used to create some simple words and the current position
in that line is controlled by the filter LFO/Envelope.

So for example, you can define two vowels like: "vowel_1" which has the
formant at 1000Hz and the "vowel_2" with the formant at 2000Hz and define a
simple raising envelope. You should get a sliding bandpass filter between
these (eg: you get a bandpass filter which rises in the frequency from
1000Hz to 2000Hz).

If you define a second formant (you set "Num formants") to 2, each vowel
will get another formant.
The sound is processed using the first formant (like in the above example)
and is added to the sound processed using the second formant. The formants
are bandpass filter in parallel as you've guessed.

I preferred for a vowel to have several formant (than the other way around)
because I've arranged the data according to the high level of abstraction
(that the vowel contains several formants) instead of how it was
implemented.

Paul"

I hope you're reading this Chris - more for the user guide.

It's back to the mind numbing stuff for me though :(







Date: Fri, 14 Oct 2016 22:59:27 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] More small changes
X-Mailer: Claws Mail 3.14.0 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

It might not seem like it, but I do try very hard to avoid changing the GUI.
However, today I made two relatively benign ones to the current 'master'.

I've never really liked having vector control launched from the 'Yoshimi'
drop-down, so now it has it's own button in the main window. It only took some
minor reorganisation of the top row to do this, and has (I think) produced a
neater result. Also, the three 'main' controls are now grouped and framed.

The second change was to the new channel switcher. Again, I didn't like it
being in the MIDI configuration window, but it took a while to think of a
logical place for it. It is now in the mixer panel window. This makes sense as
it is a part switcher, but not attached to just one part. It can be thought of
as an semi-automated 'solo'.

At the same time, these settings are now saved in patch sets. Having used it
quite a lot now, I was getting really frustrated having to re-set it every
time I started up with the patches I use.

Just to recap what it does:

There are two commands that change the way Yoshimi responds to incoming MIDI so
that only one of a group of instruments will get note-on events, but all of the
group will see note-off ones.

The 'Channel Switch' menu enables the feature for either 'row' or 'column'
mode and also makes the CC spinbox visible.

You use this spinbox to set which incoming CC changes the part that responds.
The *value* this CC sends performs the actual change, instantly and silently.
Most importantly it leaves any existing notes sounding through a note off, it's
release and effects tail.


In row mode the whole of the first 16 parts are ostensibly receiving channel 1.
This is most useful if you want to play live through a piece, with multiple
instrument changes while playing. It works best with a foot switch that
internally stores a channel number and increments then sends it with every
press.

Although this uses all of the first 16 parts, you can still set the number of
parts to 32 and use the 17+ row for normal 1 - 16 channels. Also, if you have
vector control set up, this intelligently recognises the fact, and for each
one it finds it will switch in/out the whole vector column appropriately.

For running the switcher in column mode you need to have 32 or (preferably) 64
parts set, like this you can have up to 4 parts switched per channel, and
independently of each other. However, this works more like vector control in
that you have to switch in 16s. For example to control the channel 4 column
you would send 4, 20, 36, 52 to select the wanted part. This is more appropriate
for post recording MIDI automation.





Date: Fri, 14 Oct 2016 23:07:41 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: screens
X-Mailer: Claws Mail 3.14.0 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

[-- Attachment #1 --]
[-- Type: text/plain, Encoding: 7bit, Size: 0.5K --]

Hi Chris,

Along with the changes I've noted in the yoshimi user list there are a few
others that have appeared over time, so I've grabbed all the main ones and
attached then to the email for you. I've selected them so that they also show a
lot of information on the title bars.

I hope you can find some time for updates.


Will.

--
Will J Godfrey
http://www.musically.me.uk
Say you have a poem and I have a tune.
Exchange them and we can both have a poem, a tune, and a song.

[-- Attachment #2: Screens.tgz --]






Date: Sun, 16 Oct 2016 10:24:02 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: Re: screens
X-Mailer: Claws Mail 3.14.0 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

[-- Attachment #1 --]
[-- Type: text/plain, Encoding: 7bit, Size: 2.0K --]

Hi Chris,

Normally, I'd be out walking at this time, but currently everything out there
is shades of grey, with 100% humidity :(

So...

The latest 'Solo' feature was a bonus. I'm currently bogged down with direct
access and getting it to update the GUI (when present) - seriously
soul-destroying work. Do you have any idea just how many controls there are in
Yoshi... and the weird way some of them behave?

However, some extra details:

config instances are now in place, so the main config file is common to all,
but each instance has it's own file for things like current bank, jack/alsa
settings. Common settings are only visible in the main instance and completely
hidden in all the later ones.

Banks are still separate but will eventually also be common - when I can work
out how to do it!


There are a few more explanatory files in the 'doc' directory. There are also a
*lot* more in 'dev-notes' but these wouldn't be of interest to ordinary users.


*** An FLTK specific anomally ***

We've slowly converted warning meassages so that the default option is the
safest on. i.e don't delete a file. However, if instead of hitting 'return' you
use the window manager's close icon FLTK will sometimes perform the unsafe
option :(


Ummm. Figure 28 on page 54 *doesn't* show Arpeggios :)


Knobs and Sliders.
Right click now *only* sets default value. Once we finally have mdid-learn in
place CTRL/right click will perform a learn request.


Not sure if this gets mentioned anywhere, but on first time start up, yoshimi
will look for Zyn banks as well as Yoshi ones in the usual locations. It *won't*
look for a Zyn config file as these are no longer relevant.


I've updated the INSTALL file and included a very simple way to build outside
the source directory. I know it works - I use it all the time myself now :)


One more window attached that I missed :( If you want alternatives of any others
let me know.







Date: Sat, 22 Oct 2016 20:49:41 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Solo Was: More small changes
X-Mailer: Claws Mail 3.14.0 (GTK+ 2.24.31; x86_64-pc-linux-gnu)

Amongst all the low-level stuff in the current master I've added a small
extension to this. As well as 'Row' and 'Column' modes you now have a variation
on Row called 'Loop'.

With this, if you send *any* value via the designated CC it will increment the
active part by one, rolling round to 1 after 16. This should make even the
dumbest foot controller usable - and I don't mean the person operating it :)




Date: Mon, 24 Oct 2016 21:27:35 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Info snippets.
X-Mailer: Claws Mail 3.14.0 (GTK+ 2.24.31; x86_64-pc-linux-gnu)

By default Yoshimi doesn't assign a bank ID 0 (zero) in any root. This actually
has an interesting benefit. Several sequencers insist on setting a bank with
every program change, and if you don't give one they will try to set 0. However,
Yoshi is smart enough to ignore any invalid bank ID and remain with the existing
bank number :)

When I have time (haha) I'll investigate the possibility of making bank roots
behave in the same way. This will then also deal with sequencers that insist
on two byte bank numbers - which currently screws up our bank/root separation.



While working on the nitty-gritty, I have now (finally) come to understand how
the various oscillators in Addsynth interact.

There are two of these per voice. The voice oscillator and the modulation
oscillator.

For the voice oscillator you can use one defined for that voice (internal) or
link to the oscillator of any lower numbered voice.

For the modulation oscillator you can again have a locally defined one
(internal) or you can have two other alternatives. Either the modulation
oscillator from a lower numbered voice or the oscillator from the lower           numbered voice itself!

In the voice window, the 'External Mod' at the top right give the choice of
previous modulation oscillator and the 'Mod Oscillator' at the bottom right
gives you the choice of previous voice oscillators.


Previously I thought you could use lower numbered voice oscillators for
modulators if the voice itself was disabled. This was wrong. What made it seem
to work was that it actually gave you *no* modulation instead of that from the
internal modulator.






Date: Mon, 24 Oct 2016 22:25:51 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: Info
X-Mailer: Claws Mail 3.14.0 (GTK+ 2.24.31; x86_64-pc-linux-gnu)

Hi Chris,

Just a heads-up that I've made some more notes on the Yoshimi list. There is
also a small extension to the new 'Solo' feature, but it doesn't change the
screen shots.

It's a bit 'two steps forward and one step back' for me at the moment. I've
realised that I *have* to move all the text responses out of the direct
encoding function, and into a new CLI dedicated one. Also, in the GUI reporting
I had been setting write status in bulk, whereas it should really be per
control, so that I can then eventually include individual reads too. That's a
*lot* of send_data() entries to change :(





Date: Fri, 28 Oct 2016 23:57:36 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Well that was fun!
X-Mailer: Claws Mail 3.14.0 (GTK+ 2.24.31; x86_64-pc-linux-gnu)

I lost internet access for over 24 hours, so (without my normal distractions)
got my head down and did some needed code revisions. I also had a first serious
look at scales (microtonal). It's not pretty!

Well it is slightly prettier, as I've found a way to chop out quite a bit of
math at note-on. Instead of calculating key shifts and tuning on the fly we now
have a look-up table per part which is updated when these controls are changed.
One of my test pieces that typically produced 5-6 xruns (at 16 frames) now only
produces 3-4 :)




Date: Sun, 30 Oct 2016 16:16:25 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Info snippets.
X-Mailer: Claws Mail 3.14.0 (GTK+ 2.24.31; x86_64-pc-linux-gnu)

On Mon, 24 Oct 2016 21:27:35 +0100
Will Godfrey <willgodfrey@musically.me.uk> wrote:

> By default Yoshimi doesn't assign a bank ID 0 (zero) in any root. This actually 
> has an interesting benefit. Several sequencers insist on setting a bank with
> every program change, and if you don't give one they will try to set 0. However,
> Yoshi is smart enough to ignore any invalid bank ID and remain with the existing
> bank number :)
>
> When I have time (haha) I'll investigate the possibility of making bank roots
> behave in the same way. This will then also deal with sequencers that insist
> on two byte bank numbers - which currently screws up our bank/root separation.
>
This is now done :)

A first time startup will assign the first root it finds an ID of 5, and any
more will be spaced 5 apart. Also, an attempt to set an invalid root will
restore the previous bank and root. A valid root change will always then set
the bank to the lowest numbered one it finds.




https://my.pcloud.com/publink/show?code=XZQ21gZ6cwRtfkRAbLsaxrLBxAuY8IEOU8y

Lorenzo.







Date: Wed, 16 Nov 2016 23:22:39 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Help imitating synth
X-Mailer: Claws Mail 3.14.0 (GTK+ 2.24.31; x86_64-pc-linux-gnu)


I don't recommend trying to do that manually. It quickly gets tiring and is
quite hard to keep steady timing, especially while trying to sing as well.

If you start with SynthPiano/AnalogPiano3, once you have it loaded, click on the
'Edit' button. Then in the new window 'Effects'.

Click on the effect selector and from the dropdown list chose 'Echo'.

Adjust the 'Delay' control until the repeats come at the speed you want (if you
hold downs the ctrl key you get much finer control).
The 'Fb' control will decide how may repeats you hear before it fades out.

If you only want one repeat set it to zero.

If you want exactly 3 repeats do the same for effect number 2 but double the
delay time - might need to fiddle with this a bit.

Of course, as soon as you have it the way you want SAVE IT!






Date: Thu, 17 Nov 2016 00:47:00 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Fun times ahead
X-Mailer: Claws Mail 3.14.0 (GTK+ 2.24.31; x86_64-pc-linux-gnu)

For some time I've been working on a system for creating lists of data blocks
that are extendible, editable and quickly readable. It just so happens that the
new direct access work forms such data blocks, so the idea is to combine these.

For anyone who hasn't twigged yet, I'm talking about MIDI learn :)

In my test program I generate approximately 500 entries - many similar but no
two identical. If I deliberately search for the very last one (or a non-existent
one) it takes just 20uS.

Direct access still isn't ready for full GUI control, but it is more than good
enough for at least basic MIDI learn, so as this is *well* overdue I'll start
working on that. Initially it will only be able to handle controls that have an
actual range of 0 to 127.

However, some clarification on just what I'm eventually hoping to provide.

Your first action will be to right-click on a knob/slider while holding down
the 'ctrl' key, this will put you into learn mode if the knob is learnable. If
not you'll get a popup message.

As soon as you move the external control or send any controller MIDI message,
this will be grabbed, a new window will open called something like 'MIDI list'
and Yoshimi will go back to normal operation.

You will now see a line entry with the incoming CC number, the incoming
channel number, Min and Max values, and some switch check boxes. Finally there
will be a text field that will show in human readable form exactly what control
has been grabbed. All of these will be editable.

You will be able to stack up message lines that have the same CC and channel,
so a single incoming can change a part volume and at the same time change the
filter cutoff and with a third line change the panning of a *different* part.

Multiple lines will always be displayed (and actioned) in ascending order of
CC, then channel number
CC: This can be changed to any valid CC

Channel: This can be changed to any incoming one or to 'all'

Min/Max: These will default to 0 & 127, but can be set to any value in that
range. If Min is greater than Max, then the incoming CC value will be inverted
and Min & Max swapped.

Switches:
    Mode: Limit/Compress.
        Set to 'limit'. The min/max will be hard cutoffs. e.g. min is 20
incoming is 5. result is 20. Set to 'compress'. The incomming will be converted
to fit the range. e.g. min is 32, max is 95. Incomming 0 will be 32, incomming
2 will be 33 etc.

    Mute: completely ignore this entry, but don't delete it.

    Block: ignore all later entries that have the same channel and CC. This
    will include the defaults like volume and pan, but not root/bank/program
    changes, nor any NRPNs.

    Delete: removes the line completely (with a warning)


I'll start working out how to shoehorn this in, but at first, although you'll be
able to set up lines, you won't be able to see them or remove them. Indeed
there won't be a window at all!

Apart from anything else, at the moment I have no idea how to implement a
varible length list of controls in FLTK.






Date: Fri, 18 Nov 2016 21:58:28 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Fun times ahead - MIDI learn
X-Mailer: Claws Mail 3.14.0 (GTK+ 2.24.31; x86_64-pc-linux-gnu)

Quite a bit of progress on the current master :)


What you can do:

A large number of controls are now learnable. CTRL-Right click puts Yoshimi
into learn mode. You should have reports open as that gives a 'learning'
message.

There are some that are supposed to be learnable but for some reason aren't -
will need investigation.

Every time you learn a new one all those defined will be listed.

Usually, if not learnable you'll get a popup message saying so.

Quite a number of them work, but don't update the gui - don't know why that is.

You can have multiple controls on the same CC - Wooo!
But although they work, only the last one updates the gui - Rats!

They are channel specific. So if you are rich enough to have two MIDI keyboards
you can set them up to do quite different jobs.

Some of them like volume and pan are immediate but most are 'next note'.


What you can't do yet:

You can't unset one. It's there for the session - so get it right :)

You can't edit them - There's no Learn window yet!

You can't get them to block others on the same CC/channel pair - that will come
later.





Date: Sun, 20 Nov 2016 02:27:50 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: MIDI learn - progress :)
X-Mailer: Claws Mail 3.14.0 (GTK+ 2.24.31; x86_64-pc-linux-gnu)

In the current master there is now a Midi learn window accesed from the
'Yoshimi' dropdown.

It doesn't actually do anything yet, but you can play with the controls and
pretend :)

It's real function is to give you the chance to see what it will do while I try
to think out how to actually connect up the plumbing.

I've decided the 'Control Function' should not be editable. There is no point,
and it would make for unnecessary complications.

Now to try and get some sleep. It's *very* early morning here, amid heavy
blustery (noisy) rain :(






Date: Sun, 20 Nov 2016 22:40:00 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: MIDI learn - progress :)
X-Mailer: Claws Mail 3.14.0 (GTK+ 2.24.31; x86_64-pc-linux-gnu)

Well, it seems I still have a roof over my head :)

Had a bit of fun with SubSynth this evening. One CC midi linked to 4
even-order harmonics and another linked to 3 odd-order ones. These harmonics are
per note but it was still fun being able to have consecutive notes sounding
quite different.

However, this highlights a problem.

An 'ordinary' midi-learn can only link to 119 controls (and that's if you allow
sitting on standard ones), but with the grouping capability we can have far more
than that... per channel! So this raises two problems.

What is a practical number?

How do we handle the Gui?

In my test program over 500 lines were scanned in a few microseconds, but would
anyone really want that many? I really have no idea. Has anyone here used
midi-learn much?


Trying to update the Gui when making changes to such a large number becomes a
issue. You would end up with a massively long scroll in the window, which might
be quite slow to update and would suck up quite a bit of memory.

For this I'm inclined to go for 'viewing groups' of (say) 128 lines. This
gives the user a much more reasonable scroll length. The group numbers could be
automatically generated depending on how many lines there actually are. Also,
changing either the CC or channel number will change the position of the line
in the list, quite possibly a long way. Having groups means we can
automatically display the one the line is in.

There's a little bit more done to the Gui in the current master - still not
linked up though.

Date: Thu, 24 Nov 2016 11:50:30 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: MIDI learn - 90% :)
X-Mailer: Claws Mail 3.14.0 (GTK+ 2.24.31; x86_64-pc-linux-gnu)

Gui is now fully functional. All the line editor controls work. You can shuffle
them around by CC and channel, change the ranges or even reverse them, as well
as mute, block later ones with the same CC and channel.

You are still limited to the controls with the 0 to 127 range (by far the
majority that you'd want to alter)

I've temporarily reduced the maximum number of lines to 128, and you still
can't delete a line.

Finally, I haven't decided on the best format to save complete learn sets. It's
unlikely that it would be compatible with zyn. Apart from anything else we
provide a richer control set. I suppose someone could write some form of python
conversion script if they were really interested.




Date: Thu, 24 Nov 2016 19:15:53 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: MIDI learn - An again :)
X-Mailer: Claws Mail 3.14.0 (GTK+ 2.24.31; x86_64-pc-linux-gnu)

On Thu, 24 Nov 2016 15:46:54 +0000
Will Godfrey <willgodfrey@musically.me.uk> wrote:

> Normal non-kit engines are fine - even as kit 0, but I've had lots of trouble
> with kits so maybe it's time for a re-think.

Also squashed.

An earlier fix to prevent midi-learn from accessing a non existent kit item
worked too well. It stopped all access to their engines :(

I've now spent some time jumping all over it and so far no further problems.

One point to note: You can learn the master fine detune but this does a lot of
work when being changed, so if there is aheavy activity at the time, you are
likely to get Xruns.

So, have at it musicians :D





Date: Thu, 24 Nov 2016 15:16:38 +0100
From: Jörn Eichler <joerneichler@gmx.net>
To: yoshimi@freelists.org
Subject: [yoshimi] Filter Frequency Key Tracking 100% value
User-Agent: KMail/4.13.3 (Linux/4.8.3-040803-generic; KDE/4.13.3; x86_64; ; )

Hi,

this is my first post to this list. So I hope, it is the right place for what I
want to ask/discuss:

I've been playing around with Yoshimi for some time, and I noticed, that there
seems to be no 100% setting for the filter cut-off frequency key tracking.

I'm using a band pass filter with high resonance on a noise to create a whistle
sound (like Tomita). But even setting the key tracking to maximum gives a
quite noticable detuning for pitches further away from the reference note.

float FilterParams::getfreqtracking(float notefreq)
{
    return logf(notefreq / 440.0f) * (Pfreqtrack - 64.0f) / (64.0f * LOG_2);
}

For a 100% setting a value of 128 for Pfreqtrack would be needed. However, the
highest possible value seems to be 127.

An easy solution might just "redefine" the maximum setting 127, to behave like
128. Something like:
unsigned char tempfreqtrack = (Pfreqtrack == 127) ? 128 : Pfreqtrack;

Any thoughts?

Greetings,
Jörn





Date: Thu, 24 Nov 2016 16:58:38 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Filter Frequency Key Tracking 100% value
X-Mailer: Claws Mail 3.14.0 (GTK+ 2.24.31; x86_64-pc-linux-gnu)


127 is supposed to correspond to 100% on all controls, as they start out as
chars, although I agree this sounds sightly out.

Changing it creates a dilemma, as it changes peoples perception of the synth.
While making additions I've been very careful to avid changing the original
sounds. Rather than changing the existing controls I would be more inclined to
add a tracking range switch somewhere - if there was enough demand for it.
Maybe a *1.5 checkbox so you could maybe go beyond 100%

Finally, though I used the same technique myself for such a whistle, I
think you're actually better off using subsynth and fiddling the bandwidths.
For example just increase the bandwidth of the fundamental and add reverb :)





Date: Sun, 11 Dec 2016 10:55:32 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Xruns? Graphics? - The thot plickens!
X-Mailer: Claws Mail 3.14.1 (GTK+ 2.24.31; x86_64-pc-linux-gnu)

Well, I've just confirmed that when running other programs using jack audio
that dsp load increases a lot when moving *any* windows around.

However, it looks like Yoshimi has an issue with loading midi-learn lists. It's
not a show stopper, but is something I'd like to try to resolve before the next
release. It also seems to be directly related to working from the GUI.

These days Yoshimi has CLI access to midi-learn and if I use this to load a
learned list there is no problem at all - even working down at 16 frames/period
and with the learn window open and displaying the result of the command.
However, from a clean start, even at 128 frames I'll get a couple of xruns
performing exactly the same operation via the button in the midi-learn window.

Now some good news.

I've resolved the problem with FLTKs alert window screwing up. I've created our
own simplified one. Now you get a messages saying 'Learning' followed by the
exact description of the control you're using. This will automatically close
once the physical control has been captured. Also, the same window is used to
tell you a control is not learnable.




Date: Tue, 13 Dec 2016 23:25:25 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: Yoshimi 1.5 - raises hand nervously
X-Mailer: Claws Mail 3.14.1 (GTK+ 2.24.31; x86_64-pc-linux-gnu)

[-- Attachment #1 --]
[-- Type: text/plain, Encoding: 7bit, Size: 0.7K --]

Hi Chris,

Some screenshot corrections and additions.

FLTK has a 'feature' whereby it doesn't always correctly redraw windows that
have just been uncovered. This happened to the MidiLearn one :(

Now that we can cancel a learn (should have done that right away) there is a
extra button on the message window. It's also slightly larger and the message
text is slightly smaller. Oh, and the title bar is correctly identified now.

I would like to say there will be no more changes until after 1.5.0 release -
then again, there are lots of things I'd like :)

TTFN

Will.





Date: Sat, 17 Dec 2016 14:11:49 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Yoshimi 1.5.0 - The Robin
X-Mailer: Claws Mail 3.14.1 (GTK+ 2.24.31; x86_64-pc-linux-gnu)

Still learning new songs and singing sweetly in the middle of winter.

A recap of all the major changes since V 1.4.1


Vector control now has its own dedicated button on the main window. A little
bit of shuffling meant that space could be created for it while actually making
the window look neater, and the master controls more obvious!

As a further protection against rogue sequencers making assupmtions, any
attempt to set an invalid bank root will be ignored. The same was already true
for banks themselves. Also, on first time startup, discovered roots will be 
given ID numbers starting from 5 and in steps of 5. This makes it a little
easier to re-arrange them to your preference. We recommend that you don't have
zero for either, as this is the usual assumed number.

If working from the command line, listing roots and banks will identify the
current ones with a '*'. Also, we forgot to mention at the last release that
listing instruments, as well as showing the current bank and root you are
listing from, will suffix each entry with A,S,P depending on the combination of
AddSynth, SubSynth, Padsynth.

Channel switching has now matured to a 'Solo' feature accessed from the mixer
panel. When described to a sound engineer his response was "Of course it's a
Solo. A bit unusual, but where else would you put it?"

Another new feature is one that has been asked for several times - a crossfade
for overlapping note ranges in instrument kits.

Filter tracking could never quite reach 100% so if using it to get 'notes' from
noise it would go slightly out of tune. Well, now we have an extra check box
that changes its range so that instead of -100% : 98.4% it will track 0% :
198.4%

These new features are the first that actually change instrument files.
However, they are backwards compatible in that older versions of Yoshimi simply   ignore them.


Many of the controls now have active tooltips that show the current value when
you hover over them, so you no longer have to click the control to see its
value (and probably change it at the same time). Also, many have real-world
terms. dB, Hz, mS etc.

The biggie is MIDI learn. Yes it's finally here, and very full featured. It can
be reached from the 'Yoshimi' drop-down menu, and tooltips will remind you of
how it is used.

More details on all of these can be found in the 'doc' directory.

Under the hood:

We've made a small, but useful improvement in note-on behaviour and a more
significant one is in the planning stages. Note-on is when the greatest load is
put on the processor.







ate: Sat, 17 Dec 2016 16:13:57 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: As requested
X-Mailer: Claws Mail 3.14.1 (GTK+ 2.24.31; x86_64-pc-linux-gnu)

[-- Attachment #1 --]
[-- Type: text/plain, Encoding: 7bit, Size: 2.8K --]

Also attached here are the *final* V 1.5.0 windows for MIDI learn and the
virtual keyboard.

A point I need to address at some time is that in the MIDI learn window only the
channel numbers start from 1. All the others start at zero. This is because
the text concatenation routines are shared between the CLI and MIDI learn with
the CLI being the main user.

####################

(snipped, incorporated into yum_midi_learn.tex)









Date: Thu, 15 Dec 2016 21:32:57 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Countdown
X-Mailer: Claws Mail 3.14.1 (GTK+ 2.24.31; x86_64-pc-linux-gnu)

On Thu, 15 Dec 2016 20:10:50 +0100
Frank Neumann <beachnase@web.de> wrote:

<various>

Some good points here and exactly the sort of thing I need feedback on :)

Midi > MIDI, easy fix will be done, same with (...)

Hadn't noticed the missing bit in README.txt - The dangers of copy-paste :o

'Incoming' - got it.

Spinners not spinning - confession time :¬)

This was a happy accident.  Every time you change these values the window is
completely redrawn. This takes the mouse focus away from where you just
clicked. That's a bit of a nuisance, but in the case of changing CCs, it's a
benefit as not only is the line likely to move (leaving you spinning through
multiple different lines), but when it does move the underlying code has to do a
fair bit of work.

The list is kept sorted so that when a CC comes in, it is checked as quickly
and efficiently as possible for both CC and channel numbers. it also makes it
easier for you to see the associated lines, especially if you have a CC
performing multiple actions.

I initially tried FLTK's number entry boxes, but they they are much worse, as
they send a response on every digit change! However, I've found a way to get
number entry - use the vertical spinners, but hide the arrows! Like this, they
only send a response when you hit the 'return' key :)

I'll give it a good workout before committing, but it's looking good so far.

Toggling window open/close is not something that occurred to me. It won't go in
this release but I'll give it further thought. Same with function keys.
However, it could present an interesting problem. Currently the parent window
doesn't know whether it's child is open or not so will simply re-open it on
each click. 





Date: Sun, 18 Dec 2016 22:44:44 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] The road ahead
X-Mailer: Claws Mail 3.14.1 (GTK+ 2.24.31; x86_64-pc-linux-gnu)

Hmmm, sounds like a song title :)

Now the dust has (hopefully) settled - V1.5.0 is already in debian sid - I
thought it'd be nice to go over possible future work, although I'm not
intending to actually do anything until the new year. Who knows, I might even
get to compose some music :)

There is a lot of tidying up needed.

The setup routines for MIDI learn could be significantly improved, although the
CC interpretation code is pretty slick I think.

Most of the system controls not handled by the ring buffers, and none of the
tuning is either. Also, some of the direct controls still don't update the GUI.

Only when that is all in place and tested can we realistically progress with
detaching the GUI.

The CLI stuff needs a major overhaul so it also works this way, and very many
more commands need to be added.

LFOs Filters and Envelopes are all 'next note'. They need to be converted to
immediate effect somehow.

Reporting control limits and defaults to 'interested parties' needs to be
dramatically expanded - boring work rather than difficult.

This would then allow LV2 to meaningfully expose a lot of controls.

I think that covers all the 'old' stuff, and that's enough in itself :(


The elephant in the room is Note On, as I outlined in earlier discussion.

If you build with 'ReportNoteOnTimes' enabled in ccmake, you'll see what I
mean. Even with 'Simple Sound' if you play a bunch of notes you'll get a lot of   variation in times, and every so often you'll get one that at least three times
greater than the others. The more complex the instrument, the worse this gets.
Running 'MasterSynth High' occasionally gets to 5x.

The NoteOn event is an insane labyrinth of memory allocation, initialisation
and adjustment, yet there are only two variables - pitch and velocity. It all
gets thrown way when the note releases!

Per part, the memory allocation doesn't change at all, nor does quite a lot of
the initialisation. The allocation for *different* parts is of course dependent
on the instruments loaded.

What I propose is that we create note pools per *active* part of however many
notes are set by its note limit. These would be handled in three stages:

Memory allocation.
Initialisation.
Application.

At start-up or any time that a part changes (in a way that alters it's memory
footprint) this pool is created and then initialised (any previous one being
deleted first) for that part only. This would be done outside the RT thread
with that part muted.

When a note is called for, the first free one then has the velocity and pitch
passed through the 'Application' code and the note is set as sounding.

Every time a note is released, not only is it marked as available, but it is
re-initialised, thereby spreading the CPU load between note on/off more evenly.

AddSynth (as usual) would be the most difficult one to handle, and SubSynth
the easiest.


Now the thing is, I really can't manage this and all the tidy-up stuff at the
same time, and it would be quite unreasonable to expect anyone else to take on
half-completed code, so... is there anyone here who fancies the challenge of
taking this on?






Date: Mon, 2 Jan 2017 18:14:15 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] (Yawn) 2017 already? Oh well a bit more done.
X-Mailer: Claws Mail 3.14.1 (GTK+ 2.24.31; x86_64-pc-linux-gnu)

Something I forgot to do when preparing for V1.5.0 was to to improve the
layout of the filter inserts. This is now done and hopefully the filter
stages and tracking controls are better placed and look more obvious now.

Some external controllers use the pitch wheel control per channel for up to 16
high resolution faders. Well in the latest master, MIDI learn can now handle
that. The controls that can actually benefit from the better resolution are
most of the volume and detune ones.

Also, changing CC and channel numbers within a limited range that doesn't move
the line no longer completely redraws the window. Changing any of the other
controls also no longer does a complete redraw. It's still not perfect but it's
progress.







ate: Tue, 3 Jan 2017 20:26:14 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] YES!
X-Mailer: Claws Mail 3.14.1 (GTK+ 2.24.31; x86_64-pc-linux-gnu)

Sorry about that little outburst but a tiny, tiny change in the MIDI learn code
means that for the first time ever Yoshimi can respond to aftertouch :)

It can't emulate the Mod. wheel, but that's only because there is no available
GUI control... yet :)

However, you can use it for any volume or pan, and can have a lot of fun with
things like the Phaser effect as these are all 'instant'.

MIDI learn sees this as controller 129 (we do a sneaky conversion). This has
another nice result. If you don't have an aftertouch device currently to hand
use any other controller, then in the editing window just change the controller
number to 129. Save the learned set, and next time you *do* have such a device
just load the file and you're away.







Date: Wed, 4 Jan 2017 17:03:23 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] A little clarification
X-Mailer: Claws Mail 3.14.1 (GTK+ 2.24.31; x86_64-pc-linux-gnu)

You might wonder why you'd want to MIDI learn modulation when there is already a
dedicated CC for it - same for 'brightness'. Well, the answer is that there is
currently no way to link these to aftertouch, and this is especially relevant
for people using wind controllers.





Date: Wed, 4 Jan 2017 19:25:12 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org, Jörn Eichler <joerneichler@gmx.net>
Subject: [yoshimi] Tooltips
X-Mailer: Claws Mail 3.14.1 (GTK+ 2.24.31; x86_64-pc-linux-gnu)

Hi Jörn,

I thought you might like to know I've just had an email from another user
saying that not only does he find the new tooltips a great help, but he also
thinks they have helped to persuade his 70 year old dad to try Yoshimi :)

Hope you had a good Christmas and New Year.

Will.







