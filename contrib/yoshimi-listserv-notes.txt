Date: Mon, 21 Mar 2016 22:49:56 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: Re: Documentation caught up for now

I'm pleased so say *all* file loads incorporating scales are now correctly
tuned, and done properly not with the fudge I implemented earlier.

This bug goes right back to Zyn 2.2.1 and was caused by the very last line of
the scale (usually 2/1) not being converted to an actual scale entry.

So, load and save scales is also fully available to the CLI.

Incidentally, the 'Retune' button in the Scales window is needed if you change
any of the actual scale settings. However, it's not needed for key mappings or
any other controls, all of which operate immediately.

DONE


Date: Wed, 23 Mar 2016 02:14:17 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: On a bit of a roll now :)
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Vector load and save is now possible from the CLI. That's a complete vector
set, with all mappings, instruments etc. You can independently decide which
channel to load and save from, so you can actually build up a vector set in
(say) channel 3, then later decide you want to use it in channel 7.
It has the extension .xvy standing for Xml, Vector, Yoshimi

It seems to be reliable, but there is a bit more tidying up I'll be doing.
Also, I want to integrate it with saved states.

Another small detail is that all the minimum CLI abbreviations are now
Capitalised in the help list.

DONE


Date: Wed, 23 Mar 2016 22:33:46 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: On a bit of a roll now :)
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Some more CLI goodness.

The way you enter vector features is now much more user friendly.

The individual features are now numbered 1-4 and can be Enabled or Reversed (any
other word disables). Reversed means that instead of the X left rising in value
with increasing CC value it decreases. X right does the opposite of course.

1 is always fixed as 7 (volume) and is not reversible.
2-4 can also have the outgoing CC changed to any valid one.

This is just about the only CLI entry that starts from 1. This is because
internally 0 means no features, and trying to fiddle the numbers makes the code
a lot more confusing.

The original system where bits were ORred together was done to make NRPN
control as efficient as possible. That hasn't changed, but log messages refer
to the CLI numbering.


Date: Fri, 25 Mar 2016 14:20:36 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: On a bit of a roll now :)
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Oh dear, I really shouldn't do this sort of stuff when suffering heavily from a
bad cold :(

I can't believe how many mistake I made.

Here is the correct version... I hope!

An example to set up vectors from the command line:
Assuming we want just a single axis on channel 1 (2 in the GUI)

First we need to make sure we have enough parts available:

yoshimi> set available 32
Available parts set to 32

Then:

yoshimi > set vector 1 x cc 14
Vector channel set to 1

This command must aways be the first as everthing else hangs on it. It's the
command that enables vector control. cc is the incoming sweep CC that will vary
the features you set.

There are 4 features available
1 is fixed as volume
2 is pan by default
3 is brightness by default
4 is modulation by default

We'll select volume for this example so:

yoshimi Vect Ch 1 X > set features 1 enable.
Set X features 1 en


Now you need the set the instruments that will be used. These can only be the
ones in the current bank, so, assuming we are in Will Godfrey Companion

yoshimi Vect Ch 1 X > set program left 20
Loaded 20 "Bubbles" to Part 1

yoshimi Vect Ch 1 X > set program right 120
Loaded 120 "Ghost Ensemble" to Part 16

If you now sweep the the controller assigned to 14 the sound will morph between
these two instruments.

To go on to using the other axis as well you need to have 64 parts set so:

yoshimi Vect Ch 1 X > /set available 64
Available parts set to 64

Then:

yoshimi > set vector y cc 15
Vector 1 Y CC set to 15

Well use panning for this vector so:

yoshimi Vect Ch 1 Y > set features 2 enable
Set Y features 2 en

yoshimi Vect Ch 1 Y > set program down 107
Loaded 107 "Angel Harp" to Part 32

yoshimi Vect Ch 1 Y > set program up 78
Loaded 78 "Brassy Flutter" to Part 48

Notice that the directions left,right,up,down match a traditional joystick.

Now you can save your ultimate vector sound:

yoshimi Vect Ch 1 Y > save vector CoolSound
Saved channel 1 Vector to CoolSound

At any time you can reload this.
yoshimi> load vector channel 0 CoolSound
Loaded Vector CoolSound to channel 0

If you don't give a channel then it will be loaded to the same channel as it
was saved from:

yoshimi> load vector CoolSound
Loaded Vector CoolSound to source channel

The file extension we use is .xvy but this will be added automatically.


Date: Sat, 26 Mar 2016 15:37:15 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: On a bit of a roll now :)
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

I was playing about yesterday evening with Rosegarden (and Yoshimi of course)
but was getting frustrated with wrong volume and pan settings.

Eventually it occurred to me to enable our (fairly) new CC monitor. This pretty
quickly revealed the problem. Rosegarden was sending CC121 - reset all
controllers - at the start of some segments!

This prompted me to add an ignore button in the midi config window. It's off
by default, but mine is now on, and will probably remain so!

It seems some people don't like our startup splash - Boo!

So if you really can't wait another second for Yoshimi, you can now disable it
in the main config window.


ate: Sun, 27 Mar 2016 15:22:42 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: On a bit of a roll now :)
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

On Sun, 27 Mar 2016 08:38:25 -0400
Chris Ahlstrom <ahlstromcj@gmail.com> wrote:

> Will,
>
> I have added your examples to the "Vector Control" section of
> yoshimi-doc.  The latest is currently only in the "cja" branch.
>
> However, you will note in that section that I have some questions that
> occurred to me while working through it.
>
> Thanks man!

NP. You've done a good job of putting it into more digestible form :)

<aside>
Whenever I get a cold I always end with 2-3 days extreme cough. I sometimes
think that's actually far worse than the cold itself -BLEAH
</aside>

Right {rolls up virtual sleeves}

To answer your second question first:

In Yoshimi, all CLI file operations are standard file specs.

"/home/user/directory/file" will go to that specific location.

"file" will look only in the current directory, whatever that happens to be.

Now for the more complicated bit :)

I first thought about vector control long before we had 64 part capability,
iand ntended to use just sequential parts/channels. I was put off by several
things.

First: How do you stop one vector definition overlapping another? Do you
restrict it to blocks of 4? If so, what about the 'wastage' with a mixture of
single and dual vectors?

Second: My compositions frequently use 12 out of the 16 available channels. That
leaves room for only one vectored one.

Third: how do you stop an otherwise valid MIDI CC breaking a vectored setup?

Stepping forward, 64 parts was initially just an experiment to see if it could
be done. Once proved viable, my first thought was vectors!

By going down 'columns', instead of across 'rows' you don't reduce the number
of available channels for normal MIDI operations.

By default an entire column uses the same MIDI channel, so, remembering that      almost all numbers in the CLI start from zero, you have:

CH 0 - parts 0, 16, 32, 48
HH 3 - parts 3, 19, 35, 51

Although seemingly offset by 1, these match up nicely with the part groups in
the mixer panel.

As setting the programs is not done by numbers, but by X/Y L/R I thought it
best to report back the actual parts that were being set. This also meant I
could use the existing code without any modification.

With steady refinements over time, it probably wouldn't be too difficult to give
the user the choice of a vertical' or 'horizontal' basis, but I'm not keen on
the idea myself - we're still falling behind on more important stuff :(

Usual caveats apply: If someone wants to offer a patch I'll look at it :)

Incidentally, with Yoshimi idling on this office computer. 16 parts gives 0.8%
dsp load and 64 parts pushes that up to a whopping 1.1% :)


Date: Wed, 30 Mar 2016 23:44:07 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: Re: correction!
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

On Mon, 28 Mar 2016 18:23:54 -0400
Chris Ahlstrom <ahlstromcj@gmail.com> wrote:

> No problem, it is easy!
>
> I've been trying to have the ALSA mode of Sequencer64 support pause.
> Amazing how easy it is to break functionality, have to test thoroughly with
> every goddam change I make :-D

Ah yes. I know exactly how you feel. I revised the ALSA code in yoshimi. It's
much better than it was, but I'm still not totally confident it's right :(

Oh, another note (or two). The MIDI tab has changed. All the items squished up a
bit to make room for a new one 'Ignore Reset All Controllers'.

In the command line lists there is now. Load Vector <s> and Save Vector <s>

Sadly my best command line tester is having GCC5 related problems and can't
compile anything at the moment :(


Date: Fri, 22 Apr 2016 22:13:54 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: Yoshimi bits
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Hi Chris,

Just to let you know that most of the command line entries can now be read as
well as set. Eventually they all will be, but currently significant missing ones
are vectors, effects & volume/pan/keyshift.

In the CLI help menu that only needs a change in one line - 'Set' becomes
'Set/Read' :)

It's now a general principle that groups of stuff will be 'List' but individual
items will be 'Read'.

At the same time as doing this, I've moved a bit more direct access out of the
gui. It's still not thread safe, but at least it's all slowly moving to a
central 'clearing house' in SynthEngine.


Date: Sat, 23 Apr 2016 21:15:37 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: Re: Yoshimi bits
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Hi Chris,

> I will update soon.  Currently taking a sabbatical from modifying
> Sequencer64 so that I can update the Yoshimi cookbook as I try to get
> some old tunes converted to GM format.  I want to "master" the saving of
> Yoshimi state, and also see how well Yoshimi handles program change.

There are times I wish I could take a sabbatical from Yoshimi, but it seems I
have a tiger by the tail :(

State saves should be straightforward. It's all XML with the individual
subsections clearly identified.

At the end of my LAC workshop I demonstrated a song being played using 16 parts
with multiple bank changes and program loads while playing, starting with a
'bare' Yoshimi. Although I used Rosegarden for this, I also have a MIDI file
that runs here with:

aplaymidi -p yoshimi /data/Source/RideWithYoshimi.mid

If you are interested I can send that file to you. Its only requirements are
that root ID 9 points to the default bank set supplied with Yoshimi, and default
MIDI settings are in place.

The CLI 'read' command now has an alias 'get'. Personally, I don't like pairs
of commands that are phonetically very similar (set/get) but this was requested
and was very easy to implement. Which reminds me, I don't know if I ever
mentions that there is another alias pair 'program' and 'instrument' are
interchangable wherever either is used. This was added to deal with the
conflict that MIDI talks about program changes, but Yoshimi thinks of
instrument changes.


Date: Sun, 24 Apr 2016 14:35:56 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: Re: Yoshimi bits
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

[-- Attachment #1 --]
[-- Type: text/plain, Encoding: 7bit, Size: 1.6K --]

On Sun, 24 Apr 2016 07:34:47 -0400
Chris Ahlstrom <ahlstromcj@gmail.com> wrote:

> That would be cool to try out that file, perhaps make it and the
> method to use it part of yoshimi-cookbook, which I am upgrading and fixing
> along with midicvt(pp) as I try to prepare a tune for the Yoshimi
> Soundcloud section.

File attached :)

As well as doing program changes while running, this also overwrites some parts
several times. Total playing time is just under 8 minutes. You should
definitely have the Mixer panel showing, and if you have the 'Reports' window
open you'll see the bank and program changes listed. Also if you have the
instrument list window open you'll see it swap sets.

We could certainly do with more tunes in the Yoshimi SC group ;)


Date: Tue, 26 Apr 2016 19:22:39 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Progress? A bit :)
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

In the current master, just about the whole of the history system has been
refactored. It now uses a single file for all instances recording any
non-duplicated loads or saves. At the same time I uncovered and squashed a minor
bug in the display of a loaded state. The code is now slightly smaller, and I
think clearer.

For those interested, previously we were (per instance) using 3 deque's for
the three history types. These held both the full file paths and separately
the leafnames. When the 'recent' browser was opened, the leafnames were then
copied to the fltk browser list.

Now we use 3 simpler static vectors to hold just the full pathnames. When the
browser is opened these are read, and just the leafnames extracted for the
browser list.

Also, previously the code and data straddled SynthEngine and Config. It's now
entirely in SynthEngine. I hope that was the right thing to do.

I've tested it on two quite different computers so it should be fine.

P.S.
This it the first time I've coded vectors :)


Date: Thu, 28 Apr 2016 20:47:03 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Progress? A bit :)
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

On Tue, 26 Apr 2016 15:01:14 -0500
Jonathan Brickman <jeb@ponderworthy.com> wrote:

> Just a LITTLE progress, Will ??? :-)
>
> J.E.B.

A bit more now :D

ALL CLI stuff

You can now read the status of a single vector, and both this and the bulk list
have more detail.

When stepping through system and insertion effects the GUI is now properly
updated, although I still haven't got part effects in sync yet.

Listing histories can be individual ones or all three, and I've rationalised
the internal numbering to allow for possible future extensions.

Still a long way to go though!


Date: Sun, 24 Apr 2016 09:56:19 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Key Shift and Octaves.
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

On Sun, 24 Apr 2016 07:58:59 +0100

Well now. It seems I've wrapped myself up in a pretty package :o

In the MIDI spec there is *no* pitch shift controller. Also, the notes I made
for myself 2 years ago I never actually implemented, so currently Yoshimi can
*only* be pitch/key shifted either via the GUI or CLI.

This is not to be confused with fine detune, which is a MIDI RPN (unsupported).

So, what I propose to do is implement master, channel and part pitch shift via
NRPNs.

Looking at hardware synths (I have 3 different ones here), it seems that locally
they all restrict pitch shift to +- 2 octaves, so maybe I should expand
Yoshimi's range consistently to, say, 3 octaves.

Internal oscillators I'll leave alone (muttering under my breath that I still
think it's an insane range).

How does that sound?

Date: Sun, 1 May 2016 17:49:46 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Key Shift and Octaves - Done
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Gobal and Part Key shift is now +-36 semitones. The limits are defined in
CMakeLists.txt and used throughout the code, so they can easily be changed at a
later date  - These days, I'm tending to do the same with most 'magic' numbers.

These can be set in the GUI the CLI and via MIDI NRPNs. With NRPNs part shift
can be set by direct part control or by channel number.

The notes that have been updated in 'doc' are Direct_Part_Control.txt and
Dynamic_System_Settings

Date: Sun, 24 Apr 2016 11:03:52 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Smooth Instrument Transitions.
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

This is something I demonstrated on my miniLAC workshop, but in order to make
it obvious exactly what was happening I spread the controls across the 'normal'
16 parts/channels.

It is actually much more useful if you use 32 or 64 parts and work 'vertically'
by channel numbers. In the next commit, the following notes will be added to
'doc/Using_More_Parts.txt', so if it's not clear please let me know so I can
update this.

------------------

Another possibility is getting really smooth transitions between different
sounds on the same channel.

If you use program change to do this, that part has to be muted, and there is a
variable time lag (while the new part is loaded) before you can play any more
notes on that channel. However, with 32 and 64 parts you can actually overlap
notes with different instruments on a playing channel.

This is done by pre-loading the wanted instruments, then switching channel
numbers. If (via the direct part NRPN) you add 16 to a sounding part's channel
number it will then only respond to note-off events. To bring it back into
operation simply restore the original channel number.

An example:

Enable 32 parts

Load 'Simple Chimes' into part 0 (part 1 in the GUI).
Load 'Silver Bell' into part 16 (part 17 in the GUI).
In your sequencer, via direct part NRPN set part 16 to channel 16.
    This will now be 'whited out' in the GUI

Record some notes to channel 0 - usually represented in sequencers as channel 1
- yes I know this gets confusing :(

In your sequencer just before the first note that you want to sound as 'Silver
Bell' insert two direct part NRPNs. One to set part 0 to channel 16, and the
other to set part 16 to channel 0.

Now when you play this through, the last 'Simple Chimes' note will have it's
full release and reverb tail, blending into the first 'Silver Bell' note.

When you want to go back to using 'Simple Chimes' just reverse the NRPNs.

The only time this gets complicated is if the new note is exactly the same
pitch as the old one, in which case the NRPNs need to be between the old
note-off and the new note-on.


Date: Thu, 28 Apr 2016 22:11:13 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: Yoshimi effects trial
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Hi Chris,

If you have some spare? time, there's something I'd like your opinion on.

Yoshimi has an experimental branch called 'effects'. It's only 'user'
difference from the current master is that it has a hidden command 'test'
accessible only from the CLI.

While working on the CLI I pretty quickly realised I was duplicating a lot of
what was in the GUI. Much of this shouldn't be in either (especially limit
values) but should be in the effects code itself.

So, what I have done here is to copy all the effects text and ranges into each
of the associated effects, with some overall control in the effects manager.
The CLI code (Misc/CmdInterface) accesses this via Misc/SynthEngine - I've
tended to use this as a central access point for lots of things. I've tried to
arrange this so that in the future, additional effects can be added with minimal
disturbance to anything outside the effects code itself.

I'm not at all sure if I've done this in the safest and/or most efficient
manner (hence this request), but if it looks OK, my idea is to then strip out
all the direct settings in the GUI and use this new indirect access. If that
works out OK, it will be *much* easier to implement all of this in the CLI too.

In the CLI code where the 'test' entry is there is a block of comments that I
hope will make things clear.

It's here too if you want a quick overview:

        /*
         * Test routine for direct access to all effect names & limits
         * -1 can be used as out of band parameter
         *
         * EQ (7) is very strange and still not quite right :(
         *
         * if t4 is 0 return string
         * t1 effect number. 0 or out of band returns "No Effect'
         *
         * t2 preset or controller number to read
         * out of band returns effect name
         * t3 list type
         *   0 - effect/preset name
         *   1 - not used
         *   2 - long controller name
         *   3 - short controller name
         * out of band retunes 'Invalid"
         *
         * if t4 is 1 return value
         * t1 effect number. 0 or out of band returns number of effects
         *
         * t2 preset or controller number to read
         * out of band returns number of presets or number of controls
         *
        *
         * t3 data type
         *   0 - min value (number of presets of t2 out of band)
         *   1 - max value (number of controls of t2 out of band)
         */

Hope you can look at this.


Date: Sat, 30 Apr 2016 18:11:37 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Right (click) Said Fred
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Something I've wanted to do for some time is now almost complete.

In the current master, if you right click on a button that opens a child window
the current window is closed. Conversely, if you right click on the 'Close'
button of a child window it will open the parent.

This is especially useful when going up and down the AddSynth stack, and avoids
having a screenful of intermediate windows.

I haven't done this for the resonance window yet - need a break! - and obviously
it doesn't apply to the main window!


Date: Sun, 1 May 2016 17:52:58 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Right (click) Said Fred - complete
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

All nested windows are now (hopefully) correctly done. Right click on a close
button will even correctly deal with whether the Resonance window was opened
from AddSynth or PadSynth and re-open the right one.

It does considerably speed up navigation :)


Date: Sun, 1 May 2016 18:02:17 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Another small detail
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

At miniLAC2016 I was asked about whether it was possible to show the virtual
keyboard on a first time start up to help new users get quick results.

Well that happens now :)

On a first start, there will be no yoshimi.windows file so this fact is used to
open the keyboard alongside the main window. From then on it will obey the
stored data as to whether it is shown and where it is placed.

Date: Mon, 2 May 2016 14:48:33 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Another small detail
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

On Mon, 2 May 2016 10:33:27 +0100
"Tom" <dmarc-noreply@freelists.org> (Redacted sender "madtom1999" for DMARC)
wrote:

If Yoshimi is configured for jack and can't find the jack server it will try
for alsa. If neither jack nor alsa works it will run with a null client so you
can at least try to work out what went wrong. I suspect that if it gets that
far we should probably pop up an alert saying what happened - it does already
report its status to the command line or reports window.

For jack, if you've started from the CLI with the -K option it will
auto-connect the main L&R outputs. For a while, I've been deliberating on the
idea of providing this as a preference in yoshimi->settings->jack, and probably
having it default to 'on'. I'm not inclined to have it trying to start jackd.
That can do strange things in some environments.


Date: Mon, 2 May 2016 16:28:13 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Another small detail
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

On Mon, 2 May 2016 16:21:33 +0200
Lorenzo Sutton <lorenzofsutton@gmail.com> wrote:

> Isn't all of that mostly covered by command line switches?

Indeed so, and about a month ago I checked them to ensure they work. I didn't
test the jack session ones (never use session management myself) and on my
machine using the -k argument to start jackd ends up running jackdbus which
just seems to route all jack audio to /dev/null :(


Date: Tue, 3 May 2016 20:05:53 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: (yet) Another small detail
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

As of now, the jack autoconnect status can be set in both the GUI and CLI
It defaults to 'on'.

However this does highlight an anomaly. Unlike most CLI startup 'switches' you
can't turn it off here (you can once in a running CLI). With the others, the
lower case letter is the off switch as in 'C' & 'c' for CLI and no CLI. However
'k' is already used for starting the jack server.

One idea would be to have a new switch pair, maybe 'M' & 'm' for 'main jack
autoconnect' and 'no main jack autoconnect', but still keeping the 'K' for
backward compatibility.

How does that look?



Date: Fri, 6 May 2016 22:43:48 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Yoshi 1.3.9 jack client names differ for audio and midi
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

On Sun, 20 Mar 2016 17:53:21 +0100
Frank Kober <goemusic@yahoo.fr> wrote:

> Hi Will,
> thanks for keeping yoshimi up, I hope you are fine!
> I was wondering why since the latest release (1.3.9 at least) you changed the
> client name of the yoshimi jack midi portion to "yoshimi-01" and left that of
> the audio portion at "yoshimi".

Coming back to this.

The problem is that creating audio and midi clients is now two quite separate
operations. Audio first, then midi.

The upside is that if the requested connection is not available,each can hunt
for a valid one, or just set a NULL client so that Yoshimi can continue to run.
It also paves the way for additional back-ends at a later date.

The problem for jack is that if you have both audio and midi then you need to
set up just one client that handles both. This potentially has performance
issues at low latencies as well as out of sync names.

What I think needs to happen is that when a call is made to start a jack audio
client it should look ahead to see if midi is jack too, and if so incorporate     that. Then, in the midi loop recognise that it has already been set up and
simply do nothing. As far as I know, there is no way that jack audio can succeed
and at the same time jack midi fail.

I've had a good look through the code (MusicClient, JackEngine) but so far
haven't been able to get my head round it. I also privately asked two people for
help but unfortunately both are heavily committed to other projects - mostly
stuff that puts food on the table.

This is an inconvenience rather than a show-stopper, but I don't really want to
push out another release with this still unresolved, so I'm rather hoping
someone can take a look at this for us.

Talking of which, the next release will probably be some time in June. I'm
currently working on a quite involved part of Yoshimi that is likely to take up
most, if not all, of my coding time till then :/


Date: Fri, 6 May 2016 23:03:11 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: More updates
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Hi Granddad :)

Has junior worn you out yet?

Just a recap of some recent changes in Yoshimi.

Global and Part Key shift is now +-36 semitones wherever they are set from.

These can be set in the GUI the CLI and via MIDI NRPNs. With NRPNs part shift
can be set by direct part control or *channel* based shift with channel number
in system NRPNs.

The notes that have been updated in 'doc' are Direct_Part_Control.txt and
Dynamic_System_Settings.txt

*All* nested windows can be traversed with a right mouse click closing the
parent as you open the child, or returning to the parent when closing the child.

Specifically for jack audio, there is a new GUI option in Settings->Jack to
enable/disable auto-connecting the main L&R audio outputs.

This is also available for the CLI.

The -K argument will still auto-connect from a CLI start-up if it's not already
configured for that. Currently there is no start-up way to disable this.


Date: Sat, 7 May 2016 18:10:09 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Standards - decisions made!
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

The work I'm doing right now (even though its still proof of concept at the
moment) was getting a right pain, so C++11 it now is - much easier. As and when
working through other areas I'll make changes if appropriate. Besides, it only
required a single statement in CMakeLists.txt :)

FLTK version I'll leave for a while.

As for making changes to either the build method or the GUI type. I'm not
convinced the issues are important enough to divert time away from long overdue
development that I'm only *beginning* to really get a grip of. If you want a
clue - with the current master - have the reports window open and click on any
LFO control with the middle mouse button.

Also, any GUI is a problem for both blind musicians and those with significant
motor control issues. That's why I've been developing the CLI. It's current
status is that you can do almost anything you want except actually edit the
instruments, and that will eventually come. In fact, you can do some things
there that you can't do in the GUI.

Although I don't want to divert to these other areas, as usual, if anyone wants
to offer patches I'm more than happy to look at them.


Date: Sat, 7 May 2016 21:53:06 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Standards - decisions made!
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

On Sat, 7 May 2016 18:59:27 +0100
"Tom" <dmarc-noreply@freelists.org> (Redacted sender "madtom1999" for DMARC)
wrote:

> Are you working closely with anyone who is partially sighted? I used to
> do accessibility for web stuff and working with people who will use
> something in anger is, well an eye opener.  You can see where some of
> the ideas in agile development come from!

There is one I very occasionally hear from. There is also a totally blind
person (working with a braille reader/writer) who has offered a lot of
suggestions, and very much likes vector control :)

The overall impression I get is that these people tend to use their memory
much more than us lazy 20-20 types. However, there are context sensitive
prompts and help information along with lists of settings etc. while at the
same time (hopefully) minimising the typing the need to do.

> > There is only one of me :)
> Are you sure? My mail system and cmake seem to think otherwise.
> If only I could control my grasshopper mind!
> Tom

If you know of more, tell them to stop faffing about and give me some help!


Date: Thu, 12 May 2016 20:49:12 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Following On, and on
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

On Tue, 10 May 2016 23:21:24 +0100
Will Godfrey <willgodfrey@musically.me.uk> wrote:

> On Sat, 7 May 2016 18:10:09 +0100
> Will Godfrey <willgodfrey@musically.me.uk> wrote:
>
> > development that I'm only *beginning* to really get a grip of. If you want a
> > clue - with the current master - have the reports window open and click on any
> > LFO control with the middle mouse button.
>
> This also now works for any filter control and all of SubSynth, except the
> embedded envelopes).
>
> Come on guys! You should have guessed what I'm up to by now :)

Well, in the current master we now have almost all the engine controls
identified with that middle button click. Effects, Envelopes & Resonance are
still to do - they are a bit more complicated - but progress is being made.


========================== UPCOMING SCRIPT CONTROL ????? ================

Date: Sat, 14 May 2016 23:03:43 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Following On, and on - rolls up sleeves.
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

*Warning*

Long-winded, technical info that I'm not even sure makes sense to me!

OK?

In the current master I've now got the vast majority of the controls uniquely
identified. There's more to do. Effects are particularly difficult to follow,
and I haven yet worked out to manage Envelopes in free-mode, but apart from
that almost everything from part level upwards is there.

This routine doesn't actually change any controls, but if you use the
mouse middle button, it builds up the messages representing them. This is
entirely inside the GUI and makes no references to the backend at all.

If you press any other mouse button, you get a report from within synthengine
itself listing the bytes representing the steps, as well as a float for the
actual value. There are just 7 steps needed, and I'm not massively packing the
bytes to do that. Again these don't do anything... yet :)

The next step is to build up a tree from these bytes to then poke the control
values into the engine itself via a ring buffer - read synchronously by the
audio thread. This tree will also be used to synchronously interrogate the
engine, and use that information to update the GUI.
Finally, it should be possibly to use the same tree for the CLI and for MIDI
access.

For the time being I'll be continuing to fill in the gaps in the GUI
identification, and as this doesn't interfere with Yoshimi's normal running
I'll carry on working within master for convenience.

However, once I start to poke around with the actual settings I'll start a new
branch - I know that a few people run with master, and I do as a bug shakedown.
I don't want to risk any nasty surprises!

Of course, I need to think of a decent name for this branch. Thinking about it,
"Multi_mode_data_exchange" doesn't exactly roll off the tongue. Nor does,
"Decoupled_Graphical_User_and_Command_Line_Interfaces".

I think "MidiLearn" should do the trick :D


Date: Sun, 15 May 2016 18:55:18 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Following On, and on
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

On Sun, 15 May 2016 08:19:49 -0400
Chris Ahlstrom <ahlstromcj@gmail.com> wrote:

> About the middle-click...  I have this godawful touchpad on this otherwise
> nice laptop (well, except that the keycaps are wearing out) that has no
> buttons.  It is one big button, and the driver provides left and right click
> depending where your finger is on the pad.  (Focaltech, if you want to avoid
> this crapware.)
>
> Anyway, the current Linux driver doesn't offer any way to achieve a
> middle-click.  I've had to code workarounds for this limitation in my main
> project:  Mod4 (the Super or Windoze key) to hold the middle key, keystrokes
> to substitute for the middle key, Ctrl-left as a middle key....
>
> I don't know how centralize Fltk processing is, but ...
> ...something to consider.
>
This is actually a temporary setup for checking things out. I generally avoid
middle-click operations, although how you non-mousers survive without a scroll
wheel is beyond me :)

On my machine FLTK is able to identify all three mouse buttons, and the scroll
wheel as 4 & 5.

Eventually, the 'normal' text data will go and everything will relate to the
control numbers (Over the next few days I'll start drawing up a spreadsheet with
all of these on it).


Date: Sun, 15 May 2016 19:17:36 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Yoshimi - Resonance
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

While going through identifying all the various controls I re-discovered that
'Interpolate peaks' in resonance has two different algorithms. These are
determined by whether you press the left or right mouse button. This I thought
was quite unsatisfactory so now there are two buttons each with their own
tooltip, while the original tooltip covers the new frame they are in.

To do this I had to juggle other controls quite a bit. I also changed two rotary
controls and one roller all to sliders. They now pack in better without looking
crowded, are easier to manage, with clearer indication. This also meant I could
make some of the text less cryptic!

Chris will probably be muttering under his breath as it means another layout
drawing has changed :p


Date: Sun, 15 May 2016 23:38:57 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Yoshimi - Resonance
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

On Sun, 15 May 2016 17:19:30 -0400
Chris Ahlstrom <ahlstromcj@gmail.com> wrote:

> Heh.  What dialog is that "interpolate peak" in?  Save me some scouting. :-)

Either AddSynth->Resonance or PadSynth->Resonance

> One thing I would like to see is, every time you do a check-in to master,
> increment the final digit of the version as displayed in the splash screen
> and the "yoshimi --version" command.  Useful for reference, and I can
> add it to the documentation.  Example:  Instead of "1.3.9 M", "1.3.9.6 M".
>
> Alternatively, do it in a branch and don't worry about the version until you
> merge back to master.
>
> At your convenience, of course!

Actually, I have been thinking of employing a build number (I don't want to
mess with the versioning). Ideally I want to find a way of automating this, and
have it only displayed if the version has the 'M' suffix. With a release
version it would be irrelevant.

P.S.
Some documentation in place now :)


Date: Mon, 16 May 2016 22:06:36 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Yoshimi - Resonance
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

To really see the difference, with a cleared graph click on the highest point,
creating a spike, then try one of the buttons. Clear the graph, then do the
same but use the other button.


Date: Fri, 20 May 2016 19:47:25 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Progress
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

I've finally started identifying effects. I'd been putting that off till
more-or-less last. I think it has more pointers that Clapham railway junction :(
However, once I'd tracked (sorry!) those, it's turning out to be tedious rather
than difficult.

All the manipulation for these messages is now in SynthEngine. It really should
be in a new file, but I need to work out how to set this up in such a way that
it has the same access to all the other parts. It will have to stay there for
now.

I've not done anything at all with text fields (names) as they have no effect on
the dsp. As such, I'm hoping they can be handled 'normally' and if I stick to
fixed size fields there won't be any unwanted memory shuffling.

At some point I'll need to work out the GUI interface for midi-learn of course!
{sigh}

Oh, anyone fancy knocking up a GUI interface for vector control? :)



========================== CONTINUE HERE ================================

Date: Sat, 21 May 2016 20:05:23 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Cc: Frank Kober <goemusic@yahoo.fr>
Subject: [yoshimi] Re: Yoshi 1.3.9 jack client names - FIXED
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

This turned out to be remarkably easy - almost suspiciously, so I'd *really*
like other people to test the current master.

I've tried all the following combinations and everything seems OK.

alsa midi + alsa audio
jack midi + alsa audio
alsa midi + jack audio
jack midi + jack audio

> How do we know if it worked?

Run a2jmidid and then yoshimi - set for jack midi (in yoshimi->setup - but you
have to save settings and restart)

Both a2j and yoshimi should appear in qjackctl's MIDI tab, and your external
alsa midi source should be connected to midi through in qjackctl's ALSA tab

You should see just yoshimi as the client for both audio and midi if you run
further instances of yoshimi they should track correctly with number suffixes



Date: Sat, 21 May 2016 22:09:34 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: ... and there's more :)
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Hi Chris,

The current master should produce no build warnings.

debian testing now fully supports gcc6 (although it defaults to gcc5)

Although compile time is slightly long, warnings are *far* more detailed and
accurate. It also reports things like indentation ambiguities, which actually
led me to spot a minor bug  - clearing NRPNs.

As an aside, 5 produces an image that is slightly smaller than 4.9 and 6 is in
the middle.





Date: Tue, 24 May 2016 00:00:02 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: Yoshimi-doc
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.30; x86_64-pc-linux-gnu)

Hi Chris,

I finally had time to take a quick look at this.

Hum, this was going to be a few quick notes before going to bed. It's now an
epic and it's tomorrow :(

I'm sorry if it all looks rather critical. I do very much appreciate all the
ahrd work you've put into this!

Page 76 Item 6 P.1st hasn't gone. It's moved and changed its name to Prot.1st

Ummmm. Page 10 Yoshimi has had a *considerably* revised GUI!!!

Page 28. All bank information has been taken out of the .config file and is
in .banks.

.instance doesn't yet exist - I've been a wee bit busy :)

Bottom of page Patch Sets are not the full configuration. They carry *most* of
it - almost all the dynamic stuff, but don't contain the config settings that
state does. Note. The old 'parameters' name at the bottom of this page. it's
never referred to as parameters now. Not in the GUI, CLI or any of the notes.

Page 31. The readline history is stored in /home/(user}/.yoshimi_history and is
a plain text dot file. It only records CLI entries.

Most to the part effect displays are still upside down. Dynfilter is correct,
but the box round A.S. A.M. A Inv now as a nice raised border, and the knobs
are the same size art the others in the window.

There are still several references to just the 'Panel' window, but everywhere
in the GUI it is now referred to as the Mixer Panel, and in some of the notes
just as the mixer.

Quite a few of the larger images don't show the part/kit/voice etc.

With the exception of the Mixer Panel (haven't got round to it_) all the
*vertical* sliders will return to their 'home' positions if right clicked
anywhere in their track.

I'm rather unhappy about the long paragraph on LV2 near the bottom of page 197.
In the first place it was just list discussion, and never intended to be a
permanent record. Also it is now completely untrue! It has been untrue since
Version 1.3.6 was released at the end of September 2015.

Also, since then all three sequencers have had very considerable development,
and of course Yoshimi has seen massive changes.

Maybe replace it with something like:

"Yoshimi's LV2 implementation is frequently tested using the latest versions of
Ardour, Muse and Qtractor as LV2 hosts. Like Yoshimi, these are also in
continuous development. So far we've not been able to get anywhere with Carla -
if someone is familiar with it We'd be interested in what results they get."

Talking of versions. The current release is 1.3.9 (end of February).

The next release will be sometime in June - I really don't want to leave it any
longer or people might think I'm losing interest!

However, although I would really like the version number to be 1.4.0 I don't
know if I can get enough of the new code in place and working reliably in time
to justify such a step. If not, it will have to be version 1.3.10

I've still got one piece of the GUI to identify, and it's proving to be a right
pig to pin down. It's the system effect sends and is one of those
programatically generated windows :(

This *must* be in place before I go any further. I've had to juggle the numbers
several times to get everything properly separated, and don't want to have to
do this once real code changes are being made.

The next stage in the development will be a hidden CLI entry where you will be
able to just directly type in the numbers and it will follow the tree to
perform the functions, and only once that is working reliably will I start to
strip down the GUI

