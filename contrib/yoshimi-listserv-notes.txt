te: Sun, 23 Aug 2015 18:16:32 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: Yoshimi updates.
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

Hi Chris,

I've created more work for you :)

In the master version there are significant extensions to the NRPNs that Yoshimi
handles. Some of these may seem pointless... unless you are unable to use a GUI
for some reason. It's likely I'll make another release (1.3.6) very soon.

There's information in the doc folder, but do shout if you have any questions.

Also we now have a email list separate from sourceforge, but have managed to
port across all the old yoshimi-user archives.

You can subscribe with an e-mail to: yoshimi-request@freelists.org
or by visiting: http://www.freelists.org/list/yoshimi

To post to the list, email to: yoshimi@freelists.org

Our archive is at: https://www.freelists.org/archive/yoshimi


Date: Sat, 5 Sep 2015 19:15:23 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: Yoshimi notes
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

Hi Chris,

I've just had another look through the epic! work you're doing on the manual.
Here are some clarifications (not in any special order).

x There has been a lot of re-organisation of Yoshimi->settings. The CC tab is now
named MIDI.

x Curiously named period size, is now where it should be in main settings and
called internal buffer (which is what it really is).

x Oscillator size is now called AddSynth Oscillator size, to make it clear what
it really is.

NOTE The command line help menu has also been updated.

x Using XML compression can save file access time which may be beneficial if
your machine is borderline on latency.


In the Alsa menu

x The purpose of Alsa Midi Device is the same as the command line
--alsa-midi="{name}" and is so that Yoshi can auto connect to a MIDI source
such as a keyboard. The one I have here identifies itself as Hua Xing.

x Similarly Alsa Audio lets you connect to a sound card by name. In my case,
with a Komplete Audio KA 6 the command is hw:K6. This is particularly
useful for USB modules, as you can never be sure where they will appear
numerically.

x From V 1.3.6 onwards (and current master) what using alsa audio Yoshi first
tries to connect 2 channels at 32 bit depth, but negotiates with whatever
the soundcard will support. In my case that. 24bit 6 channel (but Yoshi
only' uses 1&2)

x At one time you could in theory have 1000 roots, 1000 banks and 1000 presets.
This is ludicrous! Roots and banks were trimmed to what can be addressed
from MIDI, but you can still have 1000 presets, not that I've ever tried to
prove it!To paraphrase, 2,621,440 instruments is enough for anyone!
(128x128x160).

x Refreshes have been removed because they are no longer needed. The code self
syncs better.

x You can't reach root paths through the Yoshimi->settings window any more - it
was causing a nightmare of syncing with the other entry routes. You can
reach it from the Instrument tab, or the Banks window or the Instruments
window, both of the latter also have multiple entry routes!

y It's probably best to more clearly separate the concept of parts V channels
these days. There are only 16 MIDI channels, there are up to 64 parts each of
which can be on any channel or disabled :)

x Part audio destination (jack) is saved with the parameter sets, so is the number
of available parts. Zyn will still load these but ignores any settings it
doesn't recognise. If you re-save in Zyn, the settings will be lost.

x Zyn, and older versions of Yoshi it's possibly to end up with un-named
instruments. Since V 1.3.4 Yoshi will trap such an occurrence and name it 'No
Title'. Yoshi won't let you save the unedited default sound!

x In parameter sets Yoshi will save named but disabled patches. Zyn doesn't. Be
aware of that!

x It is advisable to copy all the default Banks to userspace so you can them
re-arrange edit and add to them easily. Just keep the default for emergency
recovery.

x Un-numbered instruments in a bank will be given a 'temporary ID starting from
number 160 and working down. If those numbers already exist then they will be
skipped over. This can get very confusing! However, if you simply load it
and re-save it to the same slot it will gain that ID and be properly fixed.
You can the move-swap it with others.

x All Root, bank instrument IDs are used by MIDI controls, and as of V 1.3.6 will
also be accessible to the command line.

x We no longer say anything about Yoshi being better at alsa/jack
implementation.It's no longer true. Performance-wise the two are
neck-an-neck these days, although there is one special case where yoshi
dramatically out performs Zyn.I've only recently discovered this and
don't want to say anything more until I've discussed it with Mark.


x Subsynth sliders.
The top row sets the *relative* amplitude. This is an important distinction as
the overall level is normalised, so all actual levels will be dependent on
whichever is the highest.

x The bottom row sets the bandwidth of each harmonic. If you have just the
fundamental and drop the bandwith to minimum you get very nearly a sinewave.
Set it to maximum and it is very obviously filtered noise!

x The part effects layout was changed at the request of people at LAC2015. it now
more closely matches the appearance of system and insertion effects.

n As of V 1.3.6 the splash screen stays up a bit longer, and gives more
information if it has a problem.

New instance with alsa audio - yes we know! haven't worked out a sensible fix
yet :(

x state V parameters
State saves *everything* parameters saves everything that is relevant to that
collection of sounds... That's the theory. I must recheck this sometime :)

x Saving settings or not.
If you change settings and close without saving that means they remain in
place only for the current session. If you've changed anything, when you close
Yoshi you will be given a second chance to save them. If you say 'no' the next
time you start, the old settings will be restored. I did think of creating an
'undo' feature but it gets pretty crazy very quickly.

x The new coloured engine backgrounds aren't just pretty. They give real
information about expected processor load, and time to be ready when loaded.
Processor low to high, Pad, Sub, Add.
Time low to high, Sub, Add, Pad.

x Default master volume is 90, part is 96 add (overall) sub, pad is 90, addvoice
is 100, effects are all over the place - don't ask me why!

Phew!

--
Will J Godfrey
http://www.musically.me.uk
Say you have a poem and I have a tune.
Exchange them and we can both have a poem, a tune, and a song.


Date: Sat, 5 Sep 2015 21:09:00 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: Re: Yoshimi notes
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

On Sat, 5 Sep 2015 15:07:36 -0400
Chris Ahlstrom <ahlstromcj@gmail.com> wrote:

> Oh, I do have a clone of GitHub yoshimi, let me know if that is
> the latest or best source for the next pending version.
>
> Chris
>

Hi Chris,

The latest 'master' version on github carries the version number 1.3.6 rc2.
However, there is new branch called 'command' which has all the latest
command-line additions and this will *probably* be merged into 1.3.6 unless
something really bad is lurking in there. I've reverted to C style string
handling for this. I find it much easier to get *exactly* what I want :(

New files in doc:
x Command_line.txt
x Dynamic_System_Settings.txt
x Yoshimi_1/3/6-features.txt

Significantly updated files:

Direct_Part_Control
NewFeatures.txt
Vector_Control.txt

Minor updates:
Using_NRPNs.txt

For what it's worth I've been using this synth since Zyn 2.2.1 and am *still*
finding out new things about it!

I've had a quick look at the cookbook and you're doing very well there. But
don't forget that Yoshi really picks up her skirts and runs when creating
sounds that have no real-world analog at all!

Good news on Sequencer24. I'll try to find time to give it a run.

Date: Sun, 6 Sep 2015 15:38:16 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: Re: Yoshimi notes
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

On Sun, 6 Sep 2015 10:10:50 -0400
Chris Ahlstrom <ahlstromcj@gmail.com> wrote:

> Man, this will take awhile!I'm revamping the discussion of the Instruments
> menu to make it more concise and much better organized.

You have my sympathy :)

However once you get to grips with the UI it's actually pretty consistent.

> Anyway, I think there's a bug in the Show Instruments... dialog.
> When I right-click on an instrument, the dialog disappears!

That's not a bug. It's intended. It's part of the anti-clutter feature of those
windows. In the same way, if you right click on banks or roots it closes one
window as it opens the other.

Open the panel window and it's just above the Edit button of each part. You
have Main, Part or both.

P.S.
Right click on the edit button and you actually open the instrument edit
window, otherwise it just selects it as the current part.

Also any click in the part label opens the current instrument window.


Date: Sun, 6 Sep 2015 17:07:05 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: Re: Yoshimi notes
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

On Sun, 6 Sep 2015 11:35:47 -0400
Chris Ahlstrom <ahlstromcj@gmail.com> wrote:

> Hmmm, the Main dropdown is greyed out.How do you get it ungreyed?

Use jack audio, not alsa audio :)

> The left/right dichtomy of the Edit button in the part panel is a bit
> too tricky.You might consider reversing the right vs left clicking,
> widen the button, and label it "Edit/Pick".Just a thought.Whatever
> it is, I will so document it.

To a degree we try not to change things in an unexpected way. Old Yoshi, and
Zyn don't give you the option at all. We also try to keep a pleasing visual
balance so couldn't increase the width by much. Also, we already use a very
small font for that button. To get two words in you'd need a magnifier :(

> When I left or right-click on the part label, I get the dialog for the
> current bank either way.

Ummmm :)

We did think about making a right click open the name editor instead (like it
does in the top level) but I think that got a bit complicated and it was
abandoned.

Just remembered something.
When using rotary controls. Left mouse button move gives coarse control, right
button gives fine control. The scroll wheel gives better control than moving
the mouse, and if you hold down the ctrl key at the same time the control is
*extremely* fine.

For vertical sliders only, if you hold down the right mouse button then move it
slightly the peg will go to it's default position. the same will happen if you
click on the track with the right button - bet you never knew that :)

===========================================================================
 git pull on 2015-09-05
===========================================================================

 Changelog|15 ++++++++++++---
 Tests/README.txt|9 +++++----
 doc/1stReadMe.txt|2 +-
 doc/ALSA_Setup.txt|6 +++---
 doc/Banks.txt|2 +-
 ...stem Settings.txt => Dynamic_System_Settings.txt} |12 ++++++------
 doc/{ => Histories}/V_1.3.5-features.txt|0
 doc/{ => Histories}/Zyn_ChangeLog|0
 doc/{ => Histories}/Zyn_HISTORY.txt|0
 doc/NewFeatures.txt|6 +++---
 doc/ToDo_Maybe.txt|4 ++++
 doc/Using_NRPNs.txt|2 +-
 doc/Yoshi-Zyn_Sound_Differences.txt|2 +-
 doc/Yoshimi_1.3.6-features.txt|21 +++++++++++++++++++++
 doc/Yoshimi_License_History.txt|6 ++++++
 doc/Yoshimi_Policies.txt|2 +-
 examples/Out_There.mid| Bin 0 -> 9621 bytes
 examples/Out_There.txt|4 ++++
 examples/Out_There.xmz| Bin 0 -> 128011 bytes
 src/CMakeLists.txt|4 ++--
 src/Misc/Part.cpp|10 ++++------
 src/Misc/WavFile.cpp|7 +++----
 src/Misc/WavFile.h|8 ++++----
 src/UI/PartUI.fl|4 ++--
 src/main.cpp|2 +-

Date: Mon, 7 Sep 2015 23:34:34 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: Re: Yoshimi notes
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

Hi Chris,

A little clarification,

In the settings window, 'Save Settings' refers to the entire window, not just
individual tabs. The close buttons are actually outside the frame of the tabs.

Also 'Close without saving' doesn't mean revert to previous settings, it means
use the changes but don't immediately store them to the filesystem.

Oh, and there are a few more bits in the 'command' branch :)



Date: Thu, 10 Sep 2015 14:25:08 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: Re: Yoshimi notes
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

On Thu, 10 Sep 2015 05:54:34 -0400
Chris Ahlstrom <ahlstromcj@gmail.com> wrote:

> Frames?Or samples?I assume a "frame" is a small time-window of
> audio samples.Will document for food :-)

A frame is a single sample of however many channels you are handling, so if you
are using jack, a mono signal will have frames of 1 float, 2 for stereo etc.

ALSA is more complex as it handles pretty much the sound card's format,
commonly ints, 24 bit ints (low byte ignored), and short ints. Less commonly
it may be floats or the weird 24 L ints. I'm still not sure if these are packed
or low aligned (top byte ignored). I've assumed they are low aligned, but I
don't know anyone who has such a card in order to prove it. As a matter of
interest the only ALSA format yoshi doesn't support is float - again, no way
to test it.


Date: Sun, 13 Sep 2015 20:36:01 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: Re: Yoshimi notes
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

Hi Chris,

The new command line entry system has proved stable enough to move to 'master'.

Meanwhile we are working in a different implementation in 'command' that
eventually should be much better and more easily extended. At the moment there
isn't much there!


Date: Sun, 13 Sep 2015 16:14:53 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Yoshimi Headless
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

Following an enquiry I just tested Yoshi in 'recovery' mode logged in as root
with no X server. Using /usr/local/share/bin/yoshim -A -i worked perfectly and
auto-connected my keyboard so I could prove everything was tickety-boo.

You still need the X libraries to compile Yoshi, but I don't know if it is
practical to provide a compile time option to build a purely headless version.


Date: Sun, 13 Sep 2015 20:29:01 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Version 1.3.6 - Command Line
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

The stable version of the new command line entry is now in 'master' while we
develop a different implementation and more complete version in 'command'.


Date: Mon, 14 Sep 2015 18:42:56 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Two Questions
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

On Mon, 7 Sep 2015 23:25:10 +0100
Will Godfrey <willgodfrey@musically.me.uk> wrote:

> On Mon, 7 Sep 2015 18:35:20 +0100
> "Tom" <dmarc-noreply@freelists.org> (Redacted sender
> "madtom1999@googlemail.com" for DMARC) wrote:
>
> > Instrument Bank?
>
> Unfortunately that's already taken! It's the directory that the instruments
> are stored in.
>
OK, unless anyone comes up with a serious objection or alternative, for V1.3.6
in the gui, and in all notes 'Parameter' will become 'Patch Set' (exactly the
same number of characters), so obviously 'Parameters' changes to 'Patch Sets'.

There will be no changes in the code, nor in any XML files.

This is only a small detail, but these things add up. If you see any other
wording that's obscure, I'm quite happy to look at it.


Date: Tue, 15 Sep 2015 22:37:12 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: Re: Yoshimi notes - ALSA
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

Something that's not obvious is the way that ALSA audio is controlled and who
takes command.

If you set a specific destination then Yoshimi says what it wants. It's often a
negotiation on bit depth and channel count, but Yoshimi nearly always gets
to decide the buffer size (it will be set to internal buffer size). However if
the destination is 'default' then ALSA decides on the sound card, bit depth,
number of channels and the buffer size - Yoshimi will set it's internal
buffer size to match. On my machines this always seems to be 1024.




Date: Tue, 15 Sep 2015 18:36:56 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Two Questions
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

On Mon, 14 Sep 2015 14:43:26 -0400
Chris Ahlstrom <ahlstromcj@gmail.com> wrote:

> Man! More screen shots! :-D
> On Sep 14, 2015 1:43 PM, "Will Godfrey" <willgodfrey@musically.me.uk> wrote:

All the ones in the 'Miscellany' directory are window grabs using the GIMP.
This directory doesn't get installed (and I expect that packagers would ignore
it) so if anyone wants to try their skills I won't complain :D



Date: Thu, 17 Sep 2015 20:36:07 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Hmmm.
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

Over the last few days I've been doing some extensive testing of the current
master, including LV2 - something I don't normally use. My test file was one
that performed full bank and program setup from a midi source file as well as
volume and pan settings. However, I made an unfortunate discovery.

If Yoshimi's internal buffer is *smaller* than the jack buffer it sounds quite
horrible. If it's the same or greater there's no problem. The reason I didn't
find this before is that it only affects Yoshimi LV2. Also it doesn't apply to
any of the released versions.

The cause of the problem is that the LV2 code doesn't have the same looping
structure that was added to the standalone routine to deal with exactly this
situation (re-entering the audio 'construction' function until the jack buffer
is filled). I'm hoping Andrew can deal with this fairly soon as I don't
understand the LV2 code very well.

There are valid reasons for wanting different sizes for these buffers. The
internal buffer size as well as affecting latency and CPU load also alters the
sound in quite subtle ways. It particularly affects the behaviour of filters.
One day we may be able to stop this happening, but in the mean time we have to
live with it. For my purposes I find a buffer size of 128 or 256 is best.

So there we are. We have a problem. You can get round it, but I'm reluctant to
make the next release until it's fixed :(


Moving on from that, I was testing using the latest versions of Ardour, Muse
and Qtractor as LV2 hosts. I also tried Carla but couldn't get anywhere with it
at all - if someone is familiar with it I'd be interested in what results
they get.


Slightly to my surprise the one that performed the best in every respect was
Qtractor. Muse got everything correct, but was prone to Xruns on program
changes. Ardour was very problematical. There were no Xruns but it seemed to
have odd timing issues. Also, on two occasions it managed to shorten the decay
times of two of the instruments. I don't understand how it managed that.

My reference was the original midi file played into a stand-alone Yoshimi via
aplaymidi. This also behaves identically to the file being sequenced by
Rosegarden.



Date: Sat, 26 Sep 2015 20:53:21 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Next release.
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

V 1.3.6 really is coming in the next few days.

We have one known outstanding issue, but it's not a show-stopper and there is a
lot of good things there - including quite extensive command line access.

Please have a look at the current master version (rc5). There is a combination
of internal buffer size and jack buffer size that can give LFO and envelope
timing errors but only (it seems) for the latest version of one LV2 host.

If anyone feels like looking at this, let me know and I'll give further details.




Date: Mon, 28 Sep 2015 00:34:23 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Next release.
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

On Sun, 27 Sep 2015 18:54:50 -0400
Chris Ahlstrom <ahlstromcj@gmail.com> wrote:

> I've been working hard debugging my sequencer64 project, but can take a
> breather on it and beef up the documentation for Yoshimi if you can
> give me a short-cut to what's changed, and whatever text documentation
> you've generated.
>
> At some point I really really need to exercise Yoshimi a lot and learn a lot
> ore about how to use it!
>
> Chris

To all practical purposes the current master *is* V 1.3.6 (even identifies as
such). This evening I'll put the tarball on sourceforge, and write up the notes.

For a sneak preview, in 'doc' look at 'Command_Line.txt' and
'Yoshimi_1.3.6-features.txt'.

The information on ALSA has been updated in 'ALSA_Setup.txt' and
'Dynamic_System_Settings.txt' gives some information on the extended NRPNs.

P.S.
Yoshimi is a continuous learning process. I'm *still* finding out things I
didn't know about it!

P.P.S
Changelog gives you a blow-by-blow account of the nitty-gritty.





Date: Mon, 28 Sep 2015 18:20:41 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Yoshimi V1.3.6 - At last!
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

All known issues have been fixed, but I'm not going to be so stupid as to say
there are no others :)

Anyway, please do download and have a play with this - especially the new
command line options. It needs a good shake-down to find out what works best.

The obligatory blurb...

One of the main features of this release is improved accessibility. The
effectiveness (and indeed usefulness) of this will help shape future
complimentary interfaces. Also, a number of first-time defaults have been
changed to make this easier.

It has always been possible to run Yoshimi headless, but now real control is
available. In the first place, when starting from the command line, an argument
can be included for a new root path to be defined to point to a set of banks
fetched from elsewhere. This will be given the next free ID.

Once running, almost all dynamic setup (i.e. doesn't require a restart) can now
be done within the terminal window. There is also extensive control of roots,
banks, parts and instruments including the ability to list and set all of
these. You can now do things like:

Path add /home/music/yoshimi/banks
Set part 4 program 130

Additional controls that are frequently taken forgranted in the GUI but
otherwise get forgotten are master key shift and master volume.

Finally, we have the most important parts of vector control exposed to the
command line.

For all of this there is extensive error checking and feedback.

In parallel with this there are more NRPNs so that you can perform some of
these via automation. That arrangment looks positively steam-punk, but is
actually very easy to use, requiring only a utility that can send MIDI CCs.
NRPNs aren't special. They are simply a specific pattern of CCs. Yoshimi's
implementation is very forgiving, doesn't mind if you stop halfway through
(will just get on with other things while it waits) and will report exactly
what it is doing.

Another significant improvement is to the handling of ALSA audio, which is
still very important for some people. Up till now we've been insisting on 2
channel 16 bit format. Tests have shown that virtually all motherboard sound
chipsets will handle this, but many external ones don't. So now we initially
request 32 bit 2 channel and work towards a compromise :) With external sound
modules in mind, endian swaps are also implemented.
Vector control has been extended so that there are four independent 'features'
that each axis can control, One is fixed as volume (if enabled) but the others
can be any valid CC and can also be reversed. The vector 'sweep' CCs are split
out very early in the MIDI chain and the new CCs created are fed back in before
any other processing. The result of this is that once we eventually get
MIDI-learn implimented the control posibilities will expand dramatically -
sorry about the extreme delay :(

When using the GUI, there are additional style improvements and tweaks. Also,
Yoshimi is a bit more informative when there are insurmountable problems,
especially at start-up.

In the 'examples' directory there is now a complete song set, 'OutThere.mid'
and 'OutThere.xmz'. Together these produce a fairly complex 12 part tune that
makes Yoshimi work quite hard.

Finally, as well as document updates and the usual crop of bug-blatting, a
couple of obscure regressions have been fixed.

Date: Fri, 2 Oct 2015 09:29:42 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Presets
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

Having had some time to actually look at these (after the bugfix) I realise
the entire concept is in fact very powerful.

Absolutely everything that has blue C P buttons can be stored in the presets
directory. That includes entire Addsynth engines! Also, when you look at the
copy/paste buffer, you only see items that are relevant to the group that the C
P buttons are in.

As you want to be able to save as well as load these presets, it makes sense to
copy all the default ones to a location such as .config/yoshimi/presets. That
makes them fully accessible, but tucked away out of sight. Possibly I could set
up yoshimi to create this directory at first time start up.

The directory structure is the same as the *old* bank roots so I'm thinking of
changing that. There is the same problem that if you have several preset
directories with the same named preset you'll see all of them together, with no
idea where they came from. If I change that so you only see and manage items in
a *current* directory I think that will be more manageable.


Date: Thu, 1 Oct 2015 23:08:44 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Yoshimi V1.3.6 - At last! (O reely?)
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

On Mon, 28 Sep 2015 18:20:41 +0100
Will Godfrey <willgodfrey@musically.me.uk> wrote:

> All known issues have been fixed, but I'm not going to be so stupid as to say
> there are no others :)

Hahahahaha {wheeze}

Murphy was listening :(

All I can say is there can't be many users wanting to save and load presets!

Using them immediately was fine but attempting to save them missed off the
name, leaving just the type and suffix, so you'd keep overwriting the same one.
This goes back a very long way.

More recently, a 'clean' start would fail to locate some default banks and
presets locations.

Both of these are corrected in 'master' but in view of the low profile (and the
fact I've only just made a release) I won't bother to make a bugfix release
unless someone gets *really* unhappy.

There is one detail to sort out eventually. When you paste an effect it doesn't
update the effect name in the selection tab. A workround is the step the effect
number up then down.







Date: Sat, 3 Oct 2015 09:31:33 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: gui-less yosh
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

If you can fake a command line environment, then almost all the 'running'
commands are available, but none of the instrument editing ones are... yet!

So you can decide what midi/audio setup you want, list and set roots and banks,
load instruments into any part, change a part's channel, set main volume and key
shift, and set up vector control.

This is from V 1.3.6, and the current master has more development. I don't
think we'll be changing any of the existing commands (although this is still
very much in development) but more will definitely be added.

All previous MIDI messages are of course recognised.

Please let us know how you get on. The more info get back on how this is
performing the better we can fine-tune it.


Date: Sat, 3 Oct 2015 18:12:43 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] yet another question
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

While trying to develop the command line interface we have the situation of
commands with multiple arguments. Currently the longest is a vector command:

set vector [n1] x <n2> control <n3>

n3 is the CC to be used for feature number n2 on X vector channel n1. The 'x'
is a sort of hidden parameter as the code uses an offset dependent on whether
it is x or y. Also n1 can be omitted in which case it will use the last defined
channel number. Using alternate words and numbers gives a great deal of
flexibility like this.


However, I've had one person say it should be in this style:

set vector x command <n1> <n2> <n3>

Note that n1 now has to be compulsory. The argument in favour of this is that
you can then create shortcuts in the form:

svxc <n1> <n2> <n3>

However, we already allow users to type no more than four characters, so with
the assumed n1 the shortest form is:

set vect x n2 cont n3

and we could probably fiddle some form of shorcut in the form:

svx <n2> c <n3>


Whatever way we go there is in fact quite a lot of work to this (most of it
error checking) so before going much further I'd like some opinions.


FROM THE COMMAND LINE:

Commands
  setup                  - show dynamic settings
  save                   - save dynamic settings
  paths                  - display bank root paths
  path add [s]           - add bank root path
  path remove [n]        - remove bank root path ID
  list root (n)          - list banks in root ID or current
  list bank (n)          - list instruments in bank ID or current
  list vector [n]        - list settings for vector CHANNEL
  set root [n]           - set root path to ID
  set bank [n]           - set bank to ID
  set part [n1]          - set part ID operations
    program [n2]         - loads instrument ID
    channel [n2]         - sets MIDI channel (> 15 disables)
    destination [n2]     - (1 main, 2 part, 3 both)
  set rootcc [n]         - set CC for root path changes (> 119 disables)
  set bankcc [n]         - set CC for bank changes (0, 32, other disables)
  set program [n]        - set MIDI program change (0 off, other on)
  set activate [n]       - set part activate (0 off, other on)
  set extend [n]         - set CC for extended program change (> 119 disables)
  set available [n]      - set available parts (16, 32, 64)
  set volume [n]         - set master volume
  set shift [n]          - set master key shift semitones (64 no shift)
  set alsa midi [s]      - * set name of source
  set alsa audio [s]     - * set name of hardware device
  set jack server [s]    - * set server name
  set vector [n1]        - set vector CHANNEL operations
    x cc [n2]            - CC n2 is used for n1 X axis sweep
    y cc [n2]            - CC n2 is used for n1 Y axis sweep
    x features [n2]      - sets n1 X features
    y features [n2]      - sets n1 Y features
    x program [l/r] [n2] - X program change ID for n1 L or R part
    y program [l/r] [n2] - Y program change ID for n1 L or R part
  stop                   - all sound off
  exit                   - tidy up and close Yoshimi
'*' entries need a save and Yoshimi restart to activate


LV2 NOTES:


Date: Fri, 9 Oct 2015 02:50:47 +0200
From: Alexander 'z33ky' Hirsch <1zeeky@gmail.com>
To: yoshimi@freelists.org
Subject: [yoshimi] Instrument reset when deactivating LV2 plugin
User-Agent: Mutt/1.5.24 (2015-08-30)

When working with the LV2 plugin in Ardour my instruments were frequently reset to
a boring sine wave.
After some debugging I found out that Ardour likes to call deactivate() when
stopping playback, which in Yoshimi also resets all instruments
(YoshimiLV2Plugin::Close: synth->defaults()).

I'm wondering if it is correct to reset the synths when deactivating a plugin,
regardless of whether it is appropriate to deactivate() all plugins when stopping
playback - I really don't know a thing about LV2.



Date: Fri, 9 Oct 2015 08:04:18 +0400
From: Andrew Deryabin <andrew@danvd.me>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Instrument reset when deactivating LV2 plugin
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101
        Thunderbird/38.3.0

Hi Alexander,

I think that it's not right to reset synth to defaults in that case.
From lv2 api documentation:

Deactivation is not similar to pausing since the plugin instance will be
reinitialised byactivate()
<http://lv2plug.in/doc/html/group__lv2core.html#ad34d59efaed8faaf8a05a4c375f62415>
.
However,deactivate()
<http://lv2plug.in/doc/html/group__lv2core.html#a1a1019ea8a92e3e1239c2ddde58360d0>
itself
MUST NOT fully reset plugin state. For example, the host may deactivate a
plugin, then store its state (using some extension to do so).

So, It's my mistake. I'll fix it today in git master branch. This is not a
problem, of course :)



Date: Fri, 9 Oct 2015 08:16:40 +0400
From: Andrew Deryabin <andrew@danvd.me>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Instrument reset when deactivating LV2 plugin
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101
        Thunderbird/38.3.0

The problem is fixed (I hope :) ). Now on deactivate plugin will only call
'Mute()', but not 'defaults()'.
Changes are in git master now, but, if you are building yoshimi from source,
open 'YofhimiLV2Plugin.h' and replace line 87 with

void Close(void) {synth->Mute();}

and then recompile.



Date: Fri, 9 Oct 2015 08:03:02 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Instrument reset when deactivating LV2 plugin
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

On Fri, 9 Oct 2015 08:16:40 +0400
Andrew Deryabin <andrew@danvd.me> wrote:

> The problem is fixed (I hope :) ). Now on deactivate plugin will only
> call 'Mute()', but not 'defaults()'.
> Changes are in git master now, but, if you are building yoshimi from
> source, open 'YofhimiLV2Plugin.h' and replace line 87 with
>
> void Close(void) {synth->Mute();}
>
> and then recompile.
>

I had also read the LV2 spec. and it says that you should only deactivate at
the end of the *last* run, so I would have said it was an Ardour problem.
However, I guess it is slightly ambiguous as to what is meant be 'last'.

In view of the fact there are various times when *some* sequencers decide to
send resets, I'm wondering if we should make things like this switchable - like
we do for bank changes etc.

Incidentally, this reminded me I'd stumbled on a work round a long time ago (and
forgot about it) by loading up instruments at the start of a session then
immediately saving the project.



ate: Mon, 12 Oct 2015 17:11:02 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Yoshimi V1.3.6 - At last! (O reely?)
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

On Sun, 11 Oct 2015 20:03:15 -0400
Chris Ahlstrom <ahlstromcj@gmail.com> wrote:

> Ooops, I see what is happening with Yoshimi 1.3.6.
>
> If I run it with the background command "&", it acts "badly".
>
> If I leave off the "&", then I get the command-prompt and
> the gui is immediately active.
>
> My bad.
>
> Anyway, I accidentally got a list of the commands in command-line mode.
> How do I get that list *intentionally*?
>
> Chris

Any unrecognised command will trigger this, including just hitting return. It
is very much a moving target. The current master is quite a bit more developed
and does list '?' and 'exit' as proper closures. It is also being used as a
test bed, so although it should remain stable, expect name and organisation
changes.

It also behaves slightly differently if there is a rouge '&' on the end. In
taken away the environment it was spawned from.

Eventually, the structure will be quite different (although that won't be
visible to users). Tokenisation in an interesting idea for language support,
but so far none of Yoshimi has this so it as a bit moot.



Date: Fri, 16 Oct 2015 16:03:57 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Vector control
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

Currently these settings are not stored anywhere. What do people think of the
idea of including them in patch sets?

The downside is that there would be no immediate way to differentiate these
from normal patch sets and if you wanted just the set and not the vector
control we'd have to think up a way of cancelling it. Setting number of parts
back to 16 would be one way although it would leave the sweep CCs active...
sort of!

Another possibility would be to create a new vectors file, although that would
create some duplication as it would need to set the number of parts as well as
ensuring the wanted instruments are loaded.





Date: Fri, 23 Oct 2015 20:09:18 +0100
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: Latest developments.
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

Hi Chris,

Just thought I'd let you know that command line access is now coming on very
well. The code is somewhat cleaner, and unix style paging and history is
implemented. The latest addition is the ability to list the parts that
currently have instruments loaded. It was almost worryingly easy and the
command is just:

"List current"

The first line you see is the number of available parts (16, 32, 64), then each
following line is in the form:

Part number, Audio destination, Instrument name.

For audio destination you have:

'M' = Main L&R
'P' = Part L&R
'B' = Both
'-' = part is disabled or higher than the number available.

This way you can tell if your most valuable instrument patch is installed even
if it is not currently usable.

To avoid unnecessary list length, the default "Simple Sound" is not shown
unless it is enabled.


Incidentally, I've fiddled with command names and order a bit so that all of
them can be abbreviated to the first three letters.

The 'docs' folder has been updated too.

============================================================================
============================================================================


Date: Tue, 27 Oct 2015 23:18:22 +0100
From: victor@svictor.net
To: yoshimi@freelists.org
Subject: [yoshimi] Scale/keymap settings lost in state file
User-Agent: Roundcube Webmail/1.1.1



Hi,

First a big thank you for working on Yoshimi! And also to everybody
writing on this mailing list. I've been following it for roughly two
years, and I really like the "ambiance" in which the software is
developped.

I seldom wrote here myself. I only restarted using yoshimi in the last
couple of weeks. It's very smooth, lots of improvements (I appreciate
amongst other things all the work on bank/program change)… But I'm
afraid I have to report what is likely a bug. A small one though for
sure.

In the scale settings, you can set various intervals ("Tunings") to a
range of keys ("Keyboard mapping"). IMHO the whole logic of these scale
settings is a bit arcane. But
http://zynaddsubfx.sourceforge.net/doc_2.html#w2 [1] explains it pretty
well.

So I have this Hijaz mode, with 10 notes/octave, and I want to play it
on my keyboard (which has 12 notes/oct). In the Tunings section I have:

14/13
9/8
32/27
49/39
4/3
3/2
21/13
16/9
49/26
2/1

And in the keyboard mapping section, I set:

0
1
2
3
4
5
x
6
7
x
8
9

The two x are to skip the corresponding keys. They don't play at all,
which allows the octaves to wrap logically on the keyboard (as if there
were just 10 keys per octave). I also set "Middle note" to 64, to start           the scale on E keys. Therefore its big/small intervals alternate
coherently with my tone/semitone fingering habits.

The problem is that the two x are replaced by two 0 in the state file.
So when I reopen yoshimi and reload the state file, I get

0
1
2
3
4
5
0
6
7
0
8
9

And this of course does not work. Every 0 key in an octave has the same
tuning. And the octave interval is no longer obtained on keys e' with
e'' but on e' with f#''.In the state file, the x-s are correctly stored
in a specific way : their value is -1<KEYMAP id="9">
<par name="degree" value="-1" />
</KEYMAP>

So it seems that the problem is how yoshimi handles these -1 degrees
when it reads the state file. It replaces them with 0 when they should
be x.
I'm afraid this was a bit of a lengthy explanation for a simple problem.
I'm not sure how many other people use (or at least understand) the
scale settings, that's why I thought I'd give in some detail…

On a side note, the ability to play non-tempered scales is what drove me
in the first place to Zyn and later to Yoshimi. It's quite unique in the
free software world. At some point, the way these settings work could be
made more intuitive maybe.

Thanks for your attention!

Cheers,

Victor

Links:
------
[1] http://zynaddsubfx.sourceforge.net/doc_2.html#w2




Date: Thu, 29 Oct 2015 00:53:51 +0100
From: Victor <victor@svictor.net>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Scale/keymap settings lost in state file
User-agent: mu4e 0.9.15; emacs 24.5.1


Le 28 Oct 2015, Will Godfrey <willgodfrey@musically.me.uk> a écrit :

> Pmapping[i] = xml->getpar("degree", Pmapping[i],-1,127);

Thanks Will! This indeed solves the x-s being replaced by 0-s.
Now when I reopen Yoshimi I can _see_ the keyboard mapping I had when saving
the session file. However, it doesn’t _sound_ right yet: I need to press the
Retune button for that.

You can test this with the settings I mentioned: an octave on the keyboard
should sound like an octave in sound (but upon restart it doesn’t, until you
press Retune).

> That was quite an interesting bug, and it goes back a very long way.

Indeed, through your posts I can see that moving Yoshimi forward is also an
exciting archeological endeavour. That must be nice! By the way, when
compiling today I glimpsed this line passing by
Reverb.cpp:403:2: warning: #warning sa schimb size-ul
That’s mixed Romanian-English for "I have to change the size". An ancient
flint from a distant era, I suppose.




Date: Thu, 29 Oct 2015 17:03:46 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Scale/keymap settings lost in state file
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

On Thu, 29 Oct 2015 00:53:51 +0100
Victor <victor@svictor.net> wrote:

>
> Le 28 Oct 2015, Will Godfrey <willgodfrey@musically.me.uk> a écrit
> :
>
> > Pmapping[i] = xml->getpar("degree", Pmapping[i],-1,127);
>
> Thanks Will! This indeed solves the x-s being replaced by 0-s.
> . . . . .


Well that was very interesting. Archaeological indeed! Going back to Zyn 2.4.0
there never was the ability to save microtonal settings :o
and you could only load tunings and mappings separately. You can still do that
if you have the individual files but it was Cal who introduced the combined
load/save capability in 0.058. Complete state saving arrived in 0.060

Auto retune is now in 'master' for both scale or state loading. Tunings and
mappings I've left as they were.

Comparatively recently 'Patch Sets->Clear' was expanded to include scales. It
also more fully resets 'Controllers'. In fact I don't think there is anything
it *doesn't* reset now. I'm wondering if this is now in the wrong place,
although I can't think of a better one.

Hmmm. How about the word Reset, on the top line with a yes/no warning that it
will clear ALL dynamic parameters.

Ha! Just found something it doesn't reset... the last peak VU values :)


Finally, that 'sa schimb' line was one that Cal put in replacing Paul's
original (English) hidden comment. There are examples of Cal's impish humour
dotted all through the code :D






Date: Thu, 29 Oct 2015 23:49:50 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Scale/keymap settings lost in state file
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

. . . . 


Yes the 'Clear' command has been there a long time, but I was just thinking it
should be moved out of the patch sets menu and directly onto the top bar,
renamed as 'Reset'.




Date: Fri, 30 Oct 2015 11:18:45 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Top Line reorganisation
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

Following on from the Scale/Keymap thread, I've given this a bit more thought
and would like to consider the following changes:

In the Instrument tab, change the order to:
Show Instruments
Open Instrument
Save Instrument
Show Banks
Show Root Paths

Also remove 'Virtual Keyboard' - It has its own far more obvious button.

In Patch sets remove 'Clear'

In the bar below, move the three existing buttons and add a new 'Reset' one laid
out:

Stop    Panel
Reset   virKbd

This layout would also enable the buttons to be wider so maybe less compressed
wording! Also I think the new reset button should be red like the stop one is.

Should we go further and have a new top line tab called e.g. 'Show'
with Instruments, Banks & Roots there instead of in the 'Instrument' tab?

Any thoughts/alternatives?

I think this would be easier and more obvious to new users but would it be
too disruptive to existing ones?




https://github.com/yoshimi/yoshimi/wiki
 



Date: Sat, 31 Oct 2015 09:02:10 -0500
From: Jonathan Brickman <jeb@ponderworthy.com>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Scale/keymap settings lost in state file

Chris, indeed, Yoshimi is a marvelous community :-)

It is also true that until recently I found the Non suite ranging from
difficult to impossible to build, depending on the year; I used to try it
once every six to twelve months or so because the feature set is so
extraordinary.  But recently I do believe Mr. Liles has been getting things
amazingly right.  For quite a number of years a crucial element of my
B.N.R. (the Box of No Return, discussed here <http://lsn.ponderworthy.com>)
has been less than completely stable, the mixing capability; I have tried
every one out there many times, and jack_mixer was the closest, but
jack_mixer still often became confused, perhaps because the B.N.R. keeps a
LOT of active connections at all times.  Then I tried non-mixer yet one
more time, and voila!

And just this week I rebuilt the B.N.R. again, for the first time using
Sparky Linux (very Debianistical) as a base, and the Non suite built
shockingly fast and easily.  It's just a bit confusing because one has to
build NTK first, but it's all documented on Mr. Liles' web site.

I have not tried the Non Session Manager for quite a while, because I ended
up building my own very tight automatic system in Python scripts.  (The Box
always runs headless in production.)  But if NSM is working well for many,
perhaps it might be a good thing to encourage :-)

J.E.B.



Date: Sat, 31 Oct 2015 17:31:19 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: AddSynth oscillator size?
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

On Sat, 31 Oct 2015 11:26:25 -0500
Jonathan Brickman <jeb@ponderworthy.com> wrote:

> Just happened to notice this.  I'm using 1024 on the Box.  Anyone know what
> happens with increases and decreases?
>
The larger the oscillator size the greater the CPU load but the better the
quality (supposedly). Zyn changed the default to 512 a long time ago, and
I'm think we should do the same. I can't detect any difference, and only an
infinitesimal one when going down to 256. Why waste CPU cycles.

Existing users won't see any change as it will stay at whatever your config file
says.




Date: Sat, 31 Oct 2015 18:00:16 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Vector control
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

On Fri, 16 Oct 2015 11:58:49 -0400
Chris Ahlstrom <ahlstromcj@gmail.com> wrote:

> I would tend to put the vector stuff, or other major upgrades, into a
> separate file in ~/.config/yoshimi/xxxxxx.rc, to distinguish old and new
> and preserve a separation of concerns.  Could have one configuration file
> that "includes" other configuration files.
>
> Chris

My latest idea on this is to keep it quite separate and as a user savable file
exactly like individual instruments or patch sets but with .xvz as the
extension.

The file would include whether it was a 2 or 4 'row' controller the sweep CCs,
the features that had been set and whether any had been over-ridden from the
default ones. Finally it would include the actual instruments that had been
originally used.

I think it should then be able to be loaded into whatever is the the currently
selected channel.

Pros
Very easy to set up.
Doesn't care about later bank/instrument layout changes

Cons
Will fail if you have already set the CCs for some other purpose.





Date: Mon, 2 Nov 2015 20:27:27 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] LV2 install - revisited.
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

We may have a solution to this oddity (installing to obscure locations). What
would be very helpful would be for people *not* using vanilla debian to try it
out.

If you look at src/CMakeLists at or near line 527 you should see:

set(LV2_INSTALL_DIR ${CMAKE_INSTALL_LIBDIR}/lv2 CACHE PATH "Specifies where the
LV2 libraries should be installed")

What I'd like you to do is comment it out so you can restore it if you need
to (put a # in front of it) then enter this one below it:

set(LV2_INSTALL_DIR lib/lv2 CACHE PATH "Specifies where the
LV2 libraries should be installed")

Remember to clear out the cmake cache before trying (unlike me) with:

make distclean

then do the usual ccmake .
make
{root}
make install

You should get yoshimi.lv2 in /usr/local/lib/lv2/
If it was already there before, you should move it.

Please let us know what results you get and which distro.




Date: Tue, 3 Nov 2015 22:31:44 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Another small step
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

Up to now, the INFORMATION section of all of our XML files has had Add, Sub &
Pad synth status, but this is only actually relevant to instruments.

I have now put into place hooks so that the other XML types no longer carry
this and can have their own info blocks.

Related to this I will soon be adding a setting to allow you to log the entire
header when you load files.






Date: Thu, 5 Nov 2015 23:49:06 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Part Kits
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

Doing a bit more investigation on this, I can see these are more interesting
than I realised.

The first thing to keep in mind is that the three 'base' engines are in fact
kit item 0 - regardless of whether kit mode is enabled or not. Even though they
are represented differently at their top level, internally they are identical
to all the other 15.

Also, the part as a whole has min and max notes, but if kit mode is enabled each
kit item has it's own min and max *within* the overall part range.

Another subtle change is that in kit mode you no longer apply all three part
effects to any of the kit items, but only one, selectable from the kit window.
This includes the three 'base' engines.

If you want more effects on a part kit you need to use the insertion effects.





Date: Fri, 6 Nov 2015 14:39:20 +0000
From: Nico We <seonserey@hotmail.com>
To: "yoshimi@freelists.org" <yoshimi@freelists.org>
Subject: [yoshimi] Yoshimi plugin in Ardour 4

Hi there,

I am a Yoshimi user (great soft by the way!) trying to get Yoshimi to work inside 
Ardour as a plugin.
I use the Ubuntu Studio distribution and I have no trouble working with Yoshimi
alone but I can not seem to find it in the list of plugins for Ardour. It does not
appear in my /usr/lib/lv2/ either.

Based on some research and this
(https://www.freelists.org/post/yoshimi/LV2-install-revisited), I had the idea of 
downloading the sources and build it but it didn't work (I have to say that this
is far beyond my skills and I am very confused with the cmake instructions).

Can somebody here give me some advice?
Thanks,
Nicolas





Date: Fri, 6 Nov 2015 23:45:35 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Top Line reorganisation
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

I've done a bit more reorganisation on this.

'View' is now the second item on the menu and includes the Scale settings
window.

All the others have the menu items re-ordered to
Load
Save
Recent (or) Clear

Scales now has a clear option, and I'll see about a 'recent' item for State

In the process of this I've discovered defaults surrounding state load & save
aren't right - it keeps going back to the first time default location :(
I'll try to get this sorted soon.


Finally, in settings there is now the option to log version numbers when
loading XML files. I was actually quite surprised to see some of them.





Date: Sun, 8 Nov 2015 22:10:06 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] and there's more
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

Reset all controllers missed out a couple, and didn't update the window. Both
sorted now.

If running with ALSA audio, you can no longer attempt to start other instances.
This wasn't a valid option anyway, as it is jack audio specific, and the
attempt would cause yoshi to quit.

Adding or removing root paths via the command line now updates the gui (if it's
running).

And finally, you can enter commands as single letters (separated by spaces) if
they are completely unambiguous.

So:

s p p 107 - sets part {default/last used} program to 107

sa s - saves the dynamic settings

l b - lists the banks in the current root

I'll probably remove he feature in 'settings' that lets you face MIDI CCs. It
was only experimental. There are already better ways of getting control, and
these will be added to.



Date: Mon, 9 Nov 2015 20:51:15 +0000
From: Nico We <seonserey@hotmail.com>
To: "yoshimi@freelists.org" <yoshimi@freelists.org>
Subject: [yoshimi] Re: Yoshimi plugin in Ardour 4


> That's correct. It was just abbreviated. However, as it caused confusion I'll
> change it in future.

OK.

> You might have slightly different versions of the other packages.
> Try searching for libncurses then find a possibly different numbered one with
> the .dev on the end.
> Also do the same for readline and zlib

I am confused: I installed all the packages from your list. All the packages
listed here are installed.

    automake
    build-essential
    cmake-curses(-gui)
    dssi-dev
    fluid
    libboost-dev
    libcairo2-dev
    libfftw3-dev
    libfltk1.3-dev
    libglu1-mesa-dev
    libjack-jackd2-dev
    libjpeg-dev
    libmxml-dev
    libncurses5-dev
    libreadline-dev
    libxft-dev
    libxinerama-dev
    libxml2-dev
    pkg-config
    xutils-dev
    zlib1g.devDo you suggest I find more packages that have similar names ?
    Also I zlib1g-dev was installed instead of zlib1g.dev, does it affect
    the process ?




Date: Tue, 10 Nov 2015 20:17:38 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Yoshimi & Rosegarden - fun times.
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

Yoshimi can have up to 64 parts. By default these are wraped around the normal
MIDI channels, so 1, 17, 33 & 49 all respond to channel 1 messages. This was
originally implemented for Vector Control, working with up to four sounds on a
channel (similar to the Yamaha SY hardware series).

However, these have other less obvious uses. One of these is getting far more
than 16 completely independent tracks addressed by just the 16 channels. Most
tunes run with instruments having a relatively narrow pitch range, and this is
what we can make use of.

As an example, in Yoshimi's main window select 64 parts, then on part 1 set
(say) Steel Bass and maximum note as 52 (E).

Next select part 17 and enable it (easiest to use the mixer panel for this) set
Tunnel Piano, the *minimum* note as 53 and maximum as 71 (B).

Finally, enable part 33, set Rushes and set it's minimum note as 72, but key
shift down an octave.

With a 61 note keyboard that gives you quite a useful working range, on just
one channel.

However, the idea really comes into its own with a sequencer like Rosegarden
where you can record multiple parts over the full MIDI range and track them to
the same channel. Also, in Rosegarden the parts can be separately named, and
identified as Bass and Treble in the notation editor. This makes it very
convenient for those wanting a more formal musical layout.

So, with very little effort you can now have 48 tracks playing at once!

Ummm, you do need a decent processor though :)

Yes, I know you could run more instances of Yoshimi on different MIDI ports, but
where's the fun in that?


> With a 61 note keyboard that gives you quite a useful working range, on
> just one channel.

Thanks for pointing this! I wasn’t aware of the warping feature. This setup
sounds very interesting for the kind of music I try to play these days
(Middle-Eastern dabkkeh, in Omar Souleyman’s style). It involves frequent
changes of instruments, each instrument playing on a very narrow range… Right
on, I’ll try it asap!




ate: Tue, 10 Nov 2015 23:09:29 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: and there's more
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

We are definitely in the time for 'small things' at the moment.

A few irritations scratched in the current 'master'

Directly setting part channel numbers from 0 to 15 as 16 to 31 respectively,
will now allow a note off while blocking all other MIDI messages to that part.
setting them higher than 31 will stop all messages so you can use this for
creating set & forget drones.

Preset directory additions or removals no longer need a restart.

Part key shift extended to +- 24 semitones - 4 octaves should be enough for
anybody :)

Default state file location is now fixed - users could always change it as they
wished with the file browser. Also, the setting was saved but never read!



Date: Fri, 20 Nov 2015 23:02:32 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Mea Culpa :(
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

I'm afraid I have to put my hand up to having created a rather obscure bug.
This was back about half way between the 1.3.4 and 1.3.5 releases, but it
wasn't until much later someone reported the first symptom.

He found that if he had a lot of continuous pan or volume changes sent over
MIDI, the gui seemed to be locked out for that time. I had a quick look but
couldn't see anything wrong with the code, so put it aside - just looking again
from time to time.

Much more recently, I discovered that if you had any part windows open and sent
the above commands, they would be mysteriously closed. Again a quick look
revealed nothing.

The final straw was when running a recent version of Rosegarden, Yoshi would
crash every time just one specific file was loaded. This was unusual in that
at the time of loading *all* 16 parts would have a program change at the same
time!

It didn't take long to work out that it wasn't actually loading programs that
was causing the crash but the gui updates. At this point I remembered someone
telling me about using git bisect to pin down exactly when a bug occurs. I
can't praise this enough. What might have been many hours of work shrank to
about 15 minutes. Just one commit was responsible for all three problems.

I had been struggling with the problems of gui updates for program changes, the
new colour backgrounds and change of number of available parts. I eventually
hit on the idea of re-creating the part, which magically seemed to solve all
the problems. I should have recognised that there is no such thing as magic!

So what did this *actually* do? It closed down and deleted the entire part then
rebuilt it with newly fetched data from the synth engine.  It was this rebuild
that was responsible for the disappearing part windows - obvious really. Also,
that is a lot of processing to do in a hurry, so much so that the fast MIDI pan
changes could barely keep up. Once the nest of program changes was also put in
the mix, well it couldn't keep up at all.

So, having pulled the errant code out, I set about getting the gui to respond
correctly. Hopefully it is OK now in the current master. Certainly, none of the
original problems show here after running for several hours with lots of patch
loading, reloading and general messing with the windows - as well as running
*that* file in Rosegarden.

I shall now go and stand in the corner facing the wall :(



From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Updates
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

A couple of additions in the current master.

If you are in kit mode, the engine window title bars now display the kit number
and name (if any). This way you know *exactly* what kit item of what part you 
are working on. I will eventually extend this to the Resonance window and the
AddSynth Voice windows.

In Yoshimi->Settings->MIDI there is a new checkbox that will allow you to see
all MIDI CCs as they arrive (before Yoshimi does any filtering). This is not
stored and is always 'off' at startup - so you don't forget about it. The only
time you're likely to need it is if you have a hardware controller of some sort
connected that doesn't seem to be working.

One slight oddity is that 'pitch bend' shows here as CC 1000. Although it is a
quite different control mechanism, it is routed through the CC code for
convenience.


Another small detail the Presets window doesn't chop off the first letter of the
preset name any more :)



Date: Sun, 22 Nov 2015 18:27:12 +0000
From: Adam Huffman <bloch@verdurin.com>
To: yoshimi@freelists.org
Subject: [yoshimi] Change in LV2 location
User-Agent: Mutt/1.5.24 (2015-08-30)

Hi Will,

Just to let you know that I needed to revert to the old setting for the
LV2 library location in CMakeLists.txt for Fedora.

Without that change, the LV2 library was installed in the wrong location
for x86_64 builds.

The patch I included is here:

http://pkgs.fedoraproject.org/cgit/yoshimi.git/diff/yoshimi-libdir.patch

Cheers,
Adam




Date: Sun, 22 Nov 2015 20:01:49 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Change in LV2 location
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

On Sun, 22 Nov 2015 18:27:12 +0000
Adam Huffman <bloch@verdurin.com> wrote:

>

Thanks Adam.

I swear I'm going to end up having nightmares about this :(
... or maybe I'll just swear!

However...
Today I just got a patch from Timo Gurr which appears to resolve the same (or
related) issues. It's on sourceforge:
http://sourceforge.net/p/yoshimi/patches/8/

So now I don't know whether to apply his, yours or both!

The frustrating thing is that just about everything seems to work correctly for
me on a range of debian systems.




Date: Sun, 22 Nov 2015 21:51:13 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Change in LV2 location
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)


>
> My patch is specifically about the LV2 library location. If it causes
> other people problems, then I'm happy to keep it just for the Fedora
> RPMs, having at least done my duty and mentioned it upstream...
>
> Cheers,
> Adam

Aha! The thot plickens :)

He had actually applied his patch on top of yours, because he was working
against V1.3.5.2 - although that two releases ago. However that means both
combined works for him, and they work for me on Intel & AMD 64 bit machines, and
an elderly 32 bit AMD.

If that combination also works for you I think it means we've covered most of
the bases.


Although not yet released I've just put a bugfix version 1.3.7.1 up on both
github and sourceforge that includes these. Can you give it a try and let me
know what you find?

There are also a couple of quite obscure bug fixes in there.

te: Tue, 24 Nov 2015 23:43:16 +0100
From: Lorenzo Sutton <lorenzofsutton@gmail.com>
To: yoshimi@freelists.org
Subject: [yoshimi] Independent jack outputs for parts?
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101
        Thunderbird/38.3.0

I'm pretty sure from visual memory I've seen this in qjackctl connections...
or was I dreaming? If not how can I achieve this?

Googling pointed to patches mentioned on mailing lists.. so as this is 1.3.7.1
which I compiled, is there anything to set at compile time to get this?
Currently yoshimi has the following jack outputs:

yoshimi:left
yoshimi:right
yoshimi:track_1_r
yoshimi:track_1_l

I noticed in src/MusicIO/JackEngine.cpp (around line 288) a loop which seems
to register the parts is commented out but maybe I'm looking in the wrong
place..

This is really usefult when recording e.g. into Ardour and wanting to preserve
the single parts for further mixing etc.

Lorenzo.


Date: Tue, 24 Nov 2015 23:06:57 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Independent jack outputs for parts?
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

On Tue, 24 Nov 2015 23:43:16 +0100
Lorenzo Sutton <lorenzofsutton@gmail.com> wrote:

> I'm pretty sure from visual memory I've seen this in qjackctl
> connections... or was I dreaming? If not how can I achieve this?
>
> Googling pointed to patches mentioned on mailing lists.. so as this is
> 1.3.7.1 which I compiled, is there anything to set at compile time to
> get this?
> Currently yoshimi has the following jack outputs:
>
> yoshimi:left
> yoshimi:right
> yoshimi:track_1_r
> yoshimi:track_1_l
>
> I noticed in src/MusicIO/JackEngine.cpp (around line 288) a loop which
> seems to register the parts is commented out but maybe I'm looking in
> the wrong place..
>
> This is really usefult when recording e.g. into Ardour and wanting to
> preserve the single parts for further mixing etc.
>
> Lorenzo.

We used to register all parts by default, but that got a bit silly once we had
64 of them, so we changed to an 'on demand' model.

If you open the mixer panel window you'll see a field just above the Edit
button. This determines the audio destination on a part-by-part basis,
defaulting to just the main LR pair. The direct part outputs are only exposed on
parts that are active, and have the destination set to either 'part' or 'both'.

Once activated they will remain in place even if the part is later disabled or
routed to main only. This is so that other programs won't see links suddenly
disappear - although they will become silent.

This setting is preserved in Yoshimi's patch sets and will be reinstated when
next loaded.

I've just realised this doesn't seem to be mention in the notes in the doc
directory - it will be on the next commit!



Date: Sat, 28 Nov 2015 17:34:00 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Independent jack outputs for parts?
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

On Fri, 27 Nov 2015 12:58:18 +0100
Lorenzo Sutton <lorenzofsutton@gmail.com> wrote:

> I see and thanks for the detailed explanation... I wonder if it would
> make sense to have an option to enable setting all active parts to
> 'both' without having to do this individually.
>
> (well one could probably hack the xml file and set the <par
> name='destination' ... for all parts but I was thinking of something a
> bit more user friendly :)
>
> Lorenzo.

it just occurred to me that you can actually do this already without the need
for any changes at all :)

Load up Yoshimi, set it for 64 parts, then go through them all, enabling them,
setting the audio destination to 'Both', then *disable* all of them except part
1.

Close down to 16 parts and save this as a patch set named (say) newdefaults.

Yoshimi stores *all* part data in patch sets, even if the part is disabled.

i:Exit  -:PrevPg  <Space>:NextPg v:View Attachm.  d:Del  r:Reply  j:Next ?:He

Close down Yoshimi.

Every time you want this configurations start with the -l argument so:

yoshimi -l {path} newdefaults.xmz


After this, every time you enable a part its direct output pair will be
registered and immediately available. However, I don't recommend leaving unused
parts enabled, as there is a processing overhead even if they are producing no
sound.

Date: Fri, 27 Nov 2015 15:51:45 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Independent jack outputs for parts?
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

On Fri, 27 Nov 2015 12:58:18 +0100
Lorenzo Sutton <lorenzofsutton@gmail.com> wrote:

> I see and thanks for the detailed explanation... I wonder if it would
> make sense to have an option to enable setting all active parts to
> 'both' without having to do this individually.
>
> (well one could probably hack the xml file and set the <par
> name='destination' ... for all parts but I was thinking of something a
> bit more user friendly :)
>
> Lorenzo.

Well, I guess it would be possible to set a preference for the default state,
but I don't want to spend time on that just now unless there is a lot of demand
for it. However, if anyone else wants to offer a patch for it - something in
the 'Settings' window ...






From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] The bug that never was
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

[-- Attachment #1 --]
[-- Type: text/plain, Encoding: 7bit, Size: 2.5K --]

And two that really are :(

While trying to track down two extremely rare and obscure bugs I got bogged
down for a while in what seemed to be a string corruption one.

In the arpeggios bank set, numbers 9, 10 & 11 seem to be corrupted if you load 
them via a MIDI program change, whereas going via the instrument bank appears to
be quite correct. Well actually that's not true. It is the bank load that is
wrong and this goes right back to Zyn 2.2.1

Each instrument has a filename, but also has an *internal* name. Normally these
two are the same, and are guaranteed to be so if you save an instrument to a
bank. However, there is nothing to stop anyone saving an instrument file
externally with a different filename or at some later date just changing the
filename. Neither of these will change the internal name.

So what to do?
What I've come up with is for banks to continue to show the filename, but when
loaded the part will show the internal name. This makes all load operations
consistent.

Also, to make save operations consistent as well, if saving externally you'll
first be offered the internal name (although this will be lost if you use fltk's
built in 'Favourites' option to change directories.

This is in the current 'master'.

Well, that's the good news.

There are two very obscure bugs I'm trying to chase down both triggered by one
specific malformed Rosegarden file, which causes it to send a storm of 48 of
each Root, Bank, Program changes mixed up with 192 other CCs!

The first is caused by the program change thread getting its knickers in a
twist. You can stop this by changing line 514 of /src/MusicIO/MusicIO.cpp:

        if (in_place)
to
        if (true)

The downside is that you then go back to program changes being in-line with all
other MIDI and potentially creating a timing bottleneck.

The second problem is even more obscure. You will only see it if Bank Root
change is enabled *and* either the Banks or Instruments window is open. The
dodgy file will then cause Yoshi's gui to freeze and you can only clear it
with a kill -9
Obviously something is not getting updated, but I don't know what.

Both of these only seem to be triggered by this specific file, I've never seen
this behaviour at any other time. Also, there have been a lot of changes in
Rosegarden itself, so older version may not do this.

I've attached the problem file for anyone who wants to have a look at this.




Date: Sun, 20 Dec 2015 19:52:59 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] A happy accident
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

I just realised that the new audio & MIDI 'preference' saving in 'Settings'
also applies to command line options. This gives you a means of recovery if
Yoshimi won't start because (say) you set it for a sound card you no longer
have.

Run from the command line as follows:

If you are running with ALSA type in 'yoshimi -a=default -A=default'

Or with jack running type in 'yoshimi -j=default -J=default'

That will get you up and running and will remember the preferences next time. Or
you can then go into 'Settings' and change them to what you really want.





Date: Wed, 2 Dec 2015 23:07:56 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Random Detune
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

A setting for this has been in the part edit window for quite a long time. There
are 20 steps of approximately half a cent. This is applied as a pitch variation
to the note-on event, so is per note and also per part (but the whole part not
just one engine).

It was intended to simulate to effect of fretless instruments, or fretted ones
that are weight or bend sensitive, where tiny variations in normal playing
would result in such pitch 'inaccuracies'. It also works quite well on flute
and whistle sounds. I've used it a few times myself and values of 2-3 seem best.

I'm wondering what use (if any) others have made of it, or even if anyone has
recognised what it does!

Currently this setting isn't saved. It's still classed as an experimental
feature. Also, if we keep it and want to save it, should it be an individual
instrument parameter or applied for that part in a complete patch set?

ate: Thu, 3 Dec 2015 14:23:38 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Random Detune
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

On Thu, 3 Dec 2015 05:58:58 -0500
Chris Ahlstrom <ahlstromcj@gmail.com> wrote:

> Dang, had to read my own document to find that setting. It applies
> "globally" to that part if you go by its position in the GUI.
> Does it also apply to kit edit?

Yes. In the code it is applied at the point the incoming MIDI value is
converted to actual pitch.

> Anyway, the way it stands it should be parallel with the ADDsynth, PADsynth
> etc. blocks in the XML.  Other than that its opaque to me :-).

Difficult. It's placed where it is because it applies to all three engines and
kits. I would have liked it to be a knob or slider, but being experimental I
went for minimalism. Hmmm. Maybe change the label to 'Humanise'?

> The tooltip probably ought to be changed to recommend low values.

I'm actually thinking of reducing the range to 5 cents (10 on the scale).

> Man, Will, I've been waiting for Yoshimi to settle down for awhile
> (and the same for my projects) so that I can catch up on screenshots
> and documentation.  Kinda like the new look.


FWIW I try very hard to minimise layout changes whilst at the same time
improving clarity and access. Unexpected changes annoy people, and changes to
that top menu bar caused even me problems at first. I'm so used to the top item
of 'Patch Sets' being 'Recent' that I'm inclined to hit the wrong one :(

I hope we're just about there now. Apart from the above there are only three
other *possible* changes in mind.

The first is in the same window, and would be a duplication of the audio
destination drop-down that's in the mixer panel. I'm again thinking of placing
it in that lower strip but between Rnd. Det. and Close. This makes sense as it
is also something that applies to the entire part.

The second would be in Settings->Jack and would be a drop-down to change the
*default* audio destination.

Finally, also in Jack, for some time I've been thinking of providing the same
Midi Device setting that's in the ALSA tab, but it's a very low priority.
Nobody has actually asked for it.

> However, the Debian package seems a bit flaky, and I haven't had
> time to see how it is structured.
>
> Chris

Debian is still stuck in V 1.2.4 (unless you go for sid). Both myself and the
maintainer are a bit annoyed about that. 1.3.4 (I think) should have gone in
jessie but there was a ridiculously long freeze period for that one.

As mentioned elsewhere there's a bug we've only just clobbered in 'master' but
it is extremely obscure and only gets trigged by a few files in one sequencer.
So far, nobody has actually reported it. I found it myself while trying to make
some gui refresh improvements. 



Date: Sat, 5 Dec 2015 23:12:59 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Random Detune
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

On Sat, 5 Dec 2015 16:32:05 +0000
Gilles <blondingilles@hotmail.com> wrote:

> Will, I think this is a great feature and as for your comment  "Hmmm. Maybe
change the label to 'Humanise'?"
> I think this is also the term used in other programs like Hydrogen and Ardour.
> Gilles

OK, that settles it :)

The latest 'master' has a slider now. Also, previously there was an error in
the math (never my best subject) giving a much higher detune than I thought. It
is now reasonably accurate and covers the range 0 to 50 cents.

I still can't make up my mind whether it should be stored in patch sets or in
the individual instrument file :(

I'm slightly leaning towards it being in patch sets. Partly because it doesn't
mess with existing stored instruments but can work with them, and partly because
it seems to me it's part of an overall performance.

Ho Hum



Date: Tue, 8 Dec 2015 19:35:37 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Random Detune
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

Our newly renamed 'Humanise' is now stored in patch sets and seems to fairly
accurately cover the range from 0 to 50 cents - for some value of 'accurate'
when talking about a randomness setting :).


Date: Fri, 4 Dec 2015 15:51:36 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Banks & Roots
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

A bit of clarification on how changes to these operate.

If you change a bank root path, either through the gui or via MIDI, it will
always reset the current bank to the lowest numbered one it can find. This is
because there may not be a bank in the new root with the same ID, and even if
there is, there is no guarantee that it will have the same name or contents.

Also if an attempt is made to reload the same root, nothing will actually
happen. The same is true of banks. Both of these are kept fully up-to-date so
there would be no point.

However, reloading the same *instrument* will be performed every time, as you
may have changed what is currently loaded without saving it. This provides an
effective 'restore' operation.

By default MIDI control of bank root is CC0 and bank is CC32, these are the
standard bank controllers in the MIDI spec. However, not all synth makers
and sequencer programmers adhere to that, so in Yoshimi->Settings->MIDI you can
change them (or even disable them completely). The bank CC can be either 32 or
0, and bank root can be any value not reserved by anything else.


Date: Sun, 6 Dec 2015 15:53:28 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Change in LV2 location
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

On Sat, 5 Dec 2015 23:33:18 +0000
Adam Huffman <bloch@verdurin.com> wrote:
> Hi Will,
>
> I'm afraid Fedora RPM builds are broken again with this release:
>
> https://kojipkgs.fedoraproject.org//work/tasks/3125/12033125/build.log
>
> As you can see at the end, banks are being installed without the proper
> prefix now i.e. for some reason '/usr/share' is being omitted.
>
> Cheers,
> Adam

Hi Adam. Sorry to hear you this is *still* giving you headaches :(
I never can follow exactly how multi-arch is supposed to work, and from that
log it seems quite a lot of stuff is being put in the wrong place.

Try using CMakeListsAlt.txt instead, although I think you may need to swap lines
516 and 517. I can't remember which one worked for you previously.

Until (and unless) this can be finally sorted out I'll maintain both copies
from now on.





ate: Mon, 07 Dec 2015 20:02:06 +0100
From: Nicola Pandini <nicola.pandini@gmail.com>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Change in LV2 location
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:31.0) Gecko/20100101
        Icedove/31.8.0

[-- Attachment #1 --]
[-- Type: text/plain, Encoding: 7bit, Size: 1.7K --]

Hi Will,
just to report my compilation of 1.3.7.1 on my Debian Jessie.
I did the steps I've always followed with all previous versions:
- cd /src/
- (I edit CMakeList.txt to set default alsa MIDI and compilation flags for
core2)
- cmake .
- make
- sudo make install

The "sudo make install" command correctly install the LV2 plugin, but all the
data files are being installed in the root filesystem, ie: the banks files are
installed in /yoshimi/banks/ (I attach the "sudo make install" output).

It seems that there's a problem with the cmake variable
CMAKE_INSTALL_DATAROOTDIR, because if I edit CMakeCache.txt, replacing the
line
CMAKE_INSTALL_DATADIR:PATH=
with
CMAKE_INSTALL_DATADIR:PATH=/usr/local

the data files are installed in the correct locations.

    Cheers

    Nicola




Date: Mon, 7 Dec 2015 20:14:19 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Change in LV2 location
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)


Thanks for letting me know. This is the same issue that Adam had. It seems that
the people at exherbo are using an environment variable that is not set by other
distros. It also seems that when I thought I'd completely cleared all Yoshimi
cmake details from my own system in order to test this I'd left some detail
behind. I seem to remember having this problem before and never could work out
exactly where cmake was hiding stuff :(

For the time being, I would suggest everyone move CMakeLists.txt somewhere else
and rename CMakeListsAlt.txt to CMakeLists.txt. You probably then need to
comment out lines 517 instead of 516.

Meanwhile I'll notify the exherbo people and see what they come up with.

I'll probably revert 'master' to this in the next commit as well.






Date: Sun, 6 Dec 2015 22:07:32 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Full Circle
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

When Yoshimi was quite young, jack MIDI stability was very poor compared with
alsa. This is because jack is far more fussy about timing issues, and we were
directly sending data from the MIDI thread to the GUI one. Also some CCs could
be problematical - and program changes were liable to cause storms of Xruns
(there was no bank change at that time). Cal got round this by creating a new
jack MIDI thread and ring buffer. However, alsa rather got left behind.

After the recent improvements in response to the crash caused by badly formed
CC storms, I realised we now had completely detached gui updates from both
MIDI threads, and also the (potentially) stalling root, bank & program changes.
I wondered if the original ring buffer was now redundant. It seems it is!

The current 'master' has this removed. I've already tested it going via
a2jmidid and with both Ardour-4.4 and Muse-3. I'll try to see it it will break
on some of the other kit I've got, but it would be very helpful if others also
tried it out - especially on non-debian distros. It only affects jack MIDI so
if you are using alsa you won't see any difference anyway.

Finally, just in case it all collapses, I've set a tag on the previous
commit called simply 'peg' so you can easily get back to where we were.

For anyone that's interested all the code changes are in MusicIO/jackEngine.cpp
There is a lot of commented out code there now, but I won't tidy it up till
we're sure it's good.

=======

Date: Wed, 11 Nov 2015 09:40:35 +0100
From: Lorenzo Sutton <lorenzofsutton@gmail.com>
To: yoshimi@freelists.org, rosegarden-user@lists.sourceforge.net
Subject: [yoshimi] Re: Yoshimi & Rosegarden - fun times.
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:38.0) Gecko/20100101
        Thunderbird/38.3.0



On 10/11/2015 21:17, Will Godfrey wrote:
> Yoshimi can have up to 64 parts. By default these are wraped around the normal
> MIDI channels, so 1, 17, 33 & 49 all respond to channel 1 messages. This was
> originally implemented for Vector Control, working with up to four sounds on a
> channel (similar to the Yamaha SY hardware series).
>
> However, these have other less obvious uses. One of these is getting far more
> than 16 completely independent tracks addressed by just the 16 channels. Most
> tunes run with instruments having a relatively narrow pitch range, and this is
> what we can make use of.

This looks also like a *very* cool and useful feature for quick 'layering'.
With layaring I mean assigning more than one voice to the same (musical) part
to e.g. obtain really fat tones (something I'm lately experimenting with) and
having just one track for the part in rosegarden.

Lorenzo.




Date: Thu, 12 Nov 2015 02:26:23 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: and there's more... and more
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

I'm really burning the midnight oil today!

The good news is that Yoshimi now remembers where you left the most important
things on the desktop, and if you left them out, will show them to you next
time you run :)


Date: Fri, 13 Nov 2015 09:55:38 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] As you were
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

On the basis of eating your own dog food, I've been using the latest master of
Yoshimi for my own compositions, and have come to the conclusion that a separate
'view' tab is a mistake -especially in the cases of instruments and scales.
Also, now 'Presets' path changes no longer require a restart I'd like to pull
that out of the 'settings' menu.

So, my revised idea is:

Instruments
Show Stored
Load External
Save External
Clear


Patch Sets
Show Banks {slightly odd - but where else?}
Load
Save
Recent


Paths {new tab}
Show Bank Roots
Show Presets


Scales
Show Settings
Load
Save
Clear


State
Load
Save
Recent {possible}


Of all of these, I think 'Patch Sets' will be the most heavily used, and
without the 'view' tab it will come nicely in the centre of the top menu bar.

Unless there are howls of protest, I'll probably change this over the weekend,
at the same time as extending Yoshimi's window memory.





Date: Mon, 16 Nov 2015 18:51:25 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Hold the front page :)
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

Yoshimi 1.3.7 is here.

This just a minor release focussing on usability details.

Yoshimi now remembers most window positions on a per instance basis, and will
re-open them at the same locations. Also, if you shut down with these windows
open, they will be opened again on the next run.

The 'engine' windows are a bit different as they may not actually exist so
can't be auto opened. Also, you need to use the 'close' button to fix their
re-open position - they don't seem to like being asked their co-ordinates when
they are being forcibly closed :(

Almost all window titles carry the instance number as well as details such as
part number/name, engine, and whether it is kit mode. For addsynth oscillator,
the voice number is included. Bank and Instrument windows, as before, show the
MIDI ID numbers along with the complete file paths.

The top menu bar has been reorganised for better grouping. Mixing unrelated
operations on a single menu is never a winner.

A complete clear-down now has it's own button, 'Reset'. This is as close as
possible to a restart, but works independently for each instance. Re-aranging
this group of buttons into two rows means they can be longer - "Virtual Keybd"
is a bit more obvious than "vrKbd".

The 'Controllers' window now (at last) correctly updates when you hit its reset
button.

Other window layouts have had a bit of polish.

There is now an option so you can see the version details of all XML files in
the 'Console' window as they are loaded.

Command line access is now more than just a proof of concept. It has a
half-decent parser, paging and history. All these are developing alongside
considerably more controls.


Breaking news!

This release has an experimental Breath Control feature - CC2.

I'm not generally publicising this yet as it needs to be tried out by musicians
with real breath controllers.

It combines volume with brightness, so the louder the sound is, the harsher it
is too.

In the 'Controllers' window you can play with the 'FiltCut' and 'Vol Rng' knobs
to change it's performance to some degree. My rough-and-ready tests suggest
that you'll probably only want to change 'FiltCut' and leave 'Vol Rng' where it
is. Do  keep in mind these controls are per-part so won't affect anything on      other channels.

If anyone has a breath controller, please give it a try and let me know if it
works for you.





Date: Sun, 13 Dec 2015 21:24:06 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Command Line - again :)
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

With things settling down again the current 'master' has some more work on this.

It now has the beginnings of level sensing and reporting.

If you do "set part 5 "(say)

Your prompt will now show "yoshimi part 5>"

and if you enter either ".." or "/" you'll go back to plain "yoshimi>", but will
still be on part 5. There is only one level at the moment, later the two
different forms will be significant.

If you want to go back to the part level without changing the part number you
can do "set part ?". I'll improve this later.

Also once on part level "set 8" will immediately change to part number 8 and
"set prog 107" sets the program for that part. The same is true for all the
other part level controls.

Further to that, while in part level you can still do most of the base level
commands.

Most of the commands can be reduced to single letter abbreviations so getting
round is pretty fast:

"s p 10 p 107"

will set part 10 to program 107 and leave you at the part level, and after
this:

"s c 3" will change its midi receive channel to 3.

I think the next bit I want to tackle is effects. This will show on the prompt
as one of:

effects system
effects insert
effects part n

and you will then be able to change these.





Date: Mon, 14 Dec 2015 15:58:49 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Command Line - again :)
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

On Sun, 13 Dec 2015 15:39:05 -0600
Jonathan Brickman <jeb@ponderworthy.com> wrote:

> Wow, Will.  Those are amazing developments.
>
> Tell me: can this be used to, say, take a single whole Yoshimi instance and
> apply an effect such as distortion, to the whole?
>
> J.E.B.

Eventually, yes. It will have all the controls that are available to the gui.
However, it's not a short road :p



Date: Thu, 17 Dec 2015 21:59:52 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Command Line - again :)
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

On Mon, 14 Dec 2015 15:58:49 +0000
Will Godfrey <willgodfrey@musically.me.uk> wrote:

> On Sun, 13 Dec 2015 15:39:05 -0600
> Jonathan Brickman <jeb@ponderworthy.com> wrote:
>
> > Wow, Will.  Those are amazing developments.
> >
> > Tell me: can this be used to, say, take a single whole Yoshimi instance and
> > apply an effect such as distortion, to the whole?
> >
> > J.E.B.
>
> Eventually, yes. It will have all the controls that are available to the gui.
> However, it's not a short road :p
>

Something that's not obvious is that if you want to get an effect to cover all
parts together, you use *insertion* effects, not system ones, and you set the
'to' to "Master Out". System is probably a misnomer. Group would be better, but
people are so used to this now I don't think it would be a good idea to change
it.

Anyway, command-line progress :)

You can now enable and disable each part and change their volume, pan &
keyshift. Also the major effects controls are there. That is, the effect number,
the type (Reverb, Echo etc.) and for insertion and part, the 'send'.

Part is a bit odd, because it actually sends to one of the four system effects.
A part's own effects will always sound regardless.

Trying to make all this as simple as possible for the user makes it pretty
complicated to program! Some entries can be a mixture of names and numbers.
e.g. insertion send is off, master, 0-{max available parts}. it also has a
dais-chain capability between effects that I haven't done anything with yet.
I've never actually used it.

Also you can already do some quite long daisy-chains:

set part 3 effect 1 type chorus
that now puts you at the part effects level and:
set send 2 64
will then set effect 2 lever half way up.

Oh, and list effects is pretty obvious.

Most control names can be heavily abbreviated - frequently down to one letter.

Many of the controls also update the gui if it's running. Effects don't, as I
haven't worked out a safe way to do that yet :(



Date: Mon, 14 Dec 2015 19:02:45 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Some rather good news.
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

The experimental 'breath control' (CC2) feature is now permanent. I've had an
email from a user with an EWI Wind controller who is absolutely delighted with
it.


I've also had a very positive email from a teacher who employs Yoshimi in his
sound synthesis and DAW courses.


I've had reports from both fedora and debian users that cmake now seems to be
playing nice, so fingers crossed on that one.

I had (yet another) enquiry about getting MIDI into Yoshimi which finally
goaded me into looking into this in a bit more detail. Well, it seems Cal is
still helping us. He left 'hooks' in that I've now used in 'Settings' so that
you can change the preferred connections for both MIDI and audio. These need a
restart but will then be remembered.

I discovered this has an interesting knock-on. Provided your main instance has
jack audio, you can have a second instance configured for quite different MIDI
(and audio if you have more than one sound card). This messes with the Yoshimi
menu a bit if your second instance uses alsa audio, but it works :)

What works very nicely is that you can have two (or more) instances on jack
audio, all set for different MIDI devices and a mixture of jack and alsa MIDI.

I guess a fix that's overdue is to still be able to start Yoshimi cleanly if
there is no accessible audio.

Ubuntu's next long-term release doesn't have a code freeze till mid February,
which gives us time to put a real shine on Yoshimi beforehand :)



Date: Thu, 17 Dec 2015 21:36:51 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: CC2 and Aftertouch in Yoshimi
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

On Thu, 17 Dec 2015 21:15:14 +0000
Gilles <blondingilles@hotmail.com> wrote:

> I have to admit I was very excited when CC2 was introduced in Yoshimi and have
been experimenting with my EWI USB ever since. I found out that the EWI sends
after-touch MIDI events to control vibrato or other controls and I was wondering
if Yoshimi was capable of handling them?
>
> Gilles

We don't support aftertouch yet. The problem is, what do you get it to actually
change? Vibrato? Tremolo? Pitch bend. I suspect everyone would give a different
answer :(




Date: Fri, 18 Dec 2015 23:14:11 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Command Line - again and again
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

Just to let you know the help menu and lists are updated, and you can now set 
*all* effects, sends and their levels. You can also select their presets :)

There is much more control possible in effects, but I'll leave that for now and
move on to other controls. I'm trying to implement the most used ones first. Not 
only does that make Yoshimi more usable, but gives me the chance to develop a
better understanding of how it all goes together.

I'm trying to make the most used commands have the shortest abbreviations -
especially the top level ones. So currently we have "? (help)", "s (set)", "l
(list)" along with "sa (save)", "lo (load)", "st (stop)", "ex (exit)".

Exit could have been single letter, but I force two so it's less likely someone
will accidentally type it. I'm also toying with the idea of adding "r (read)"
to work in parallel with set for returning a specific value.

One other thing. It occurs to me that it might be an idea to use capitals to
help identify the minimum abbreviations. It won't make any difference to the
parser as all commands are tested case insensitive. However, I don't know if
that would actually be any benefit to blind musicians. I shall ask around.

Onwards and upwards:)





Date: Sat, 19 Dec 2015 15:17:11 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: CC2 and Aftertouch in Yoshimi
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

On Fri, 18 Dec 2015 16:04:28 +0000
Gilles <blondingilles@hotmail.com> wrote:

> From what I understand Channel Aftertouch is usually best suited to triggering
LFO functions, greater pressure increasing the depth of the LFO signal, resulting 
in a more pronounced vibrato, tremolo or other LFO-triggered effect. How is the
LFO presently controlled in Yoshimi? By a knob controlled with the mouse? Unless
there is more than one LFO available then maybe if Aftertouch is detected it could
be routed there automatically.

We don't have whole part LFOs, only ones on the individual engines (and not at
all on subSynth). It's a bit strange really, because we *do* have both pitch
bend and volume MIDI controlled on a channel/part basis.

In fact you could probably emulate LFOs with an automation program feeding into
these two controls.

I don't know what would be involved in building this into Yoshimi, (or where
we'd put the control panel), but if someone would like to look at this I'd
certainly be interested.




Date: Sun, 20 Dec 2015 04:32:49 +0000
From: Gilles <blondingilles@hotmail.com>
To: "yoshimi@freelists.org" <yoshimi@freelists.org>
Subject: [yoshimi] Re: CC2 and Aftertouch in Yoshimi

Will would it be possible to route aftertouch to the vibratto knob of the Adsynth
voice parameter to see what kind of result it would give? Or would that be to
complicated to do just for test purposes.
Gilles




Date: Sun, 20 Dec 2015 20:02:44 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: CC2 and Aftertouch in Yoshimi
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

On Sun, 20 Dec 2015 04:32:49 +0000
Gilles <blondingilles@hotmail.com> wrote:

> Will would it be possible to route aftertouch to the vibratto knob of the
Adsynth voice parameter to see what kind of result it would give? Or would that be
to complicated to do just for test purposes.
> Gilles


Well, that was 'interesting' :?

Aftertouch is not a CC but a control type in it's own right. Also there are two 
forms, channel and key. So, in the same way as pitch bend is translated to
CC 1000, key aftertouch is reported as CC 900 and channel aftertouch as CC
901.

Hooks are now in place (in MusicIO.cpp) but I haven't gone any further yet.
This needs quite a bit of thought, and I don't want to get too distracted from
command line stuff.

As usual, if anyone else wants to progress with this please do so :)




Date: Tue, 22 Dec 2015 19:21:59 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Command Line - a couple of examples
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

There is an error on the help menu. I've put 'prefix' when the command is
actually 'preset'. I've no idea why a wrote that :(

Every valid command should give you a reply message. 'null' ones should too
actually, but I've probably missed a few.

I had intended to attach the effect name to the prompt. For effect presets I
intend to add it's number in brackets, as it doesn't change level. Because the
naming of them is so irregular this is one case where I think numbers are
better. Normally I work on the basis that people can remember names more easily
than numbers.

I really need to sit down and write some proper documentations too.

A brief example:

set part eff type rev
set pre 2

This assumes part 0 and effect 0 and sets the type as reverb
The second line selects preset number 2 (in whatever effect type you have) in
this case cathedral reverb.

This will leave you in the parts -> effects level, so '..' to go back to part
and make any further part changes such as volume, pan, key shift, etc.

If you had done:

set part 5 eff 2 type reverb

Then it would have made those selections along the way. Also '/' and '..' can
be prefixed to any other command but only at the beginning of a new line. After
the above little lot you could have done:

..s v 90

(set the volume)
and then:

/s p 2 en

(enable part 2)

Part effects are 'direct' so are immediately effective and there are three of
them.

System effects are applied to the final sound and receive from individual part
'side chains'. There are four of them, so every part has a side chain 'send'
volume for each system effect.
System effects can also be sent to any one of the following ones - 0 can
go to 1 or 2 or 3; and 2 can go to 3 only.

Insert effects are independent and each can be applied to one of any part or the  final sound. There are eight of them.

At part level: "s 4" changes to part four. If you'd been on vector level it
would have changed to vector *channel* 4

Talking of which, a vector example (assumes you are in the default bank root
path):

set b 110   ... sets the bank
s av 64     ... number of parts available
s ve cc 93  ... cc to use for channel 0 X axis
s y         ... switch to Y axis
s cc 94     ... cc to use for Y axis
s x fe 1    ... switches to X axis and set features (just volume)
s y fe 2    ... switches to Y again and set features (pan)
s pr l 107  ... program (instrument) for Y axis 'left/up'
s pr r 109  ... program (instrument) for Y axis 'right/down'
s x pr l 20 ... change to X axis and program for 'left'
s pr r 23   ... program for 'right'
l ve        ... list currently defined vectors

I worked this one out to test a number of internal switches. It found a couple
of bugs - now corrected. It actually sounds rather nice if you use whatever
controllers you have available for X & Y CCs, preferably on a joystick.





ate: Sat, 26 Dec 2015 22:20:17 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Holiday
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

Well I'm more-or-less back.

There's a small update in master, but the Changlog has the wrong date - still
not entirely with it :)

We also have the de-pop feature ported from zyn in Add and Pad synths. There is
an extra control in the amplitude parameters block called simply D.Pop. Its
default setting sounds pretty much as it did without it, but you can wind it
down to no start ramp at all or up for a much smoother note start. This isn't
relevant for Subsynth because of the quite different engine.

Currently I'm working on getting the effects gui to stay in sync when changing
via the command line. Most C/L users will never see it it, but it needs to be
correct.





Date: Fri, 25 Dec 2015 12:58:51 +0000
From: Gilles <blondingilles@hotmail.com>
To: "yoshimi@freelists.org" <yoshimi@freelists.org>
Subject: [yoshimi] Re: I would like to contribute to Yoshimi development

Hi Csaba, I believe you might find what you're looking for at this address
https://github.com/licnep/yoshimi
I can't wait for MIDI learn to be fully implemented so the more developers are
involved the merrier.
Gilles






Date: Sat, 26 Dec 2015 22:44:27 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: I would like to contribute to Yoshimi development
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

On Thu, 24 Dec 2015 17:48:51 +0100
Csaba Erdei <csaba.erdei@algaebt.hu> wrote:

> Dear All,
>
> I am an IT professional and hobby musician and I am interested in
> Yoshimi development. I would be happy to contribute to the MIDI learn
> feature and improving copy/paste presets. Do you know that someone
> started working on them already? Do you have any concept, idea or
> requirement about these?
>
> Thanks and Regards,
>
> Csaba Erdei

Hi... again :)

From a usability point of view I much prefer the appearance of the first
midi learn attempt - I've placed it in a separate branch: 1.0-midi-learn

However it is well out of date, and also had some bad implementation issues.

As well as clear indication of what has been set, it gives you the opportunity
to change the min/max values, and even make min > max, thus reversing the         ffect of the control.

It also allows you the have one CC attached to several actual controls.

Instead of MusicIO, the pickup point should be in SynthEngine.cpp ->
SynthEngine::SetController(

This is for several reasons. The first is that it then can't interfere with
root/bank/program changes. Also, at this point pitch wheel, Channel and key
pressure have all been converted to accessible CCs.

Finally, it will be able to pick up vector controls and re-route them to other
effects - this will (eventually) massively expand the vector control features!



Copy and paste is far more sophisticated than a lot of people realise, although
I agree that the interface is not very friendly. I don't think people realise
that when pasting, you only get shown the the presets that are relevant to that
part of the synth. I rather think that 'presets' is the wrong word here, as
people are likely to confuse it with the effects presets.

The way it works is to store a 'copy' as an XML stub, which can either be pasted
elsewhere or stored to file with an appropriate header. When you pick one from
file it simply reverses the process.





Date: Sun, 27 Dec 2015 11:23:24 +0100
From: Csaba Erdei <csaba.erdei@algaebt.hu>
To: yoshimi@freelists.org
Subject: [yoshimi] Midi Learn feature
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101
        Thunderbird/38.4.0

Hi All,

I am splitting my topic to two, one is MIDI learn, other will be the
Copy/Paste to make discussions more comfortable.

Thanks for your comments, it is good to talk about it. My original plan was to
port this feature from Zyn 2.5.1/2.5.2 but I will review branch 1.0-midi-learn
and add those usability improvements bellow. Good idea. As well as using
SynthEngine.cpp as entry point.
I also plan to maintain some compatibility with Zyn at least to be able to
load MIDI learn configurations saved by Zyn to Yoshimi and back.

I reviewed https://github.com/licnep/yoshimi some time ago and if everyone
agree let us consider it outdated and take 1.0-midi-learn as a starting point.

Regards,

Csaba Erdei





Date: Sun, 27 Dec 2015 11:47:00 +0100
From: Csaba Erdei <csaba.erdei@algaebt.hu>
To: yoshimi@freelists.org
Subject: [yoshimi] Copy/Paste bug fixing, improvements
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101
        Thunderbird/38.4.0

Hi All,

As I see copy to clipboard and paste from clipboard works, however saving and
loading presets do not.

What I did:

1. Edit->ADDsynth Edit->Show Voice Parameters->Current voice 1->C->Copy to
Preset then named my preset int the text entry field as abcd

2. Current voice 2->P but I do not see my preset abcd in the list. However a
file appeared in presets dir called abcd.ADnoteParametersn.xpz

I have a preset called ResetGlobal.ADnoteParameters.xpz for AddSynth Global,
and it appears in the list, but it is not applicable here.

Copy to Clipboard and Paste from Clipboard does not work for modulation
settings. Maybe it should have different C/P buttons?

It seems to me a bug and some usability problem.

Do you use or test regularly this functionality? Did you see bugs like this
somewhere else?

I plan to add system clipboard integration as a ccmake option which is off by
default. It is might my personal working style only that I like to see the
world trough ssh and vi editor but this minor optional code does not make much
confusion.

Regards,

Csaba Erdei





ate: Sun, 27 Dec 2015 22:42:42 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Copy/Paste bug fixing, improvements
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

On Sun, 27 Dec 2015 11:47:00 +0100
Csaba Erdei <csaba.erdei@algaebt.hu> wrote:

> Hi All,




Just rechecked this (I'd done some work to clear bugs a few months ago)
copy/paste to clipboard seems to work OK here. Sub & Pad seem OK sending to
file. Add global also seems fine. It seemed to include the modulation effects.

It's a bit strange about the voice one. The fault is not in the saving, but the
loading which is supposed to recognise that extra 'n' as meaning just a single
voice.






Date: Sun, 27 Dec 2015 22:17:11 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Mouse wheel scroll for sliders
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

On Sun, 27 Dec 2015 11:50:21 +0100
Csaba Erdei <csaba.erdei@algaebt.hu> wrote:

> Hi All,
>
> What do you think about implementing mouse wheel scrolling for sliders
> same way as for dials? Standard controls should be touched for the MIDI
> learn feature and it would be easy to add this feature too.
>
> Regards,
>
> Csaba Erdei
>
> Yoshimi source code is available from either:
http://sourceforge.net/projects/yoshimi
> Or: https://github.com/Yoshimi/yoshimi
> Our list archive is at: https://www.freelists.org/archive/yoshimi
> To post, email to yoshimi@freelists.org

Yes. It's something that I think was discussed some time ago. It would be good
if, like the rotary knobs, holding down Ctrl at the same time gives very fine
control.
Yoshimi source code is available from either:
http://sourceforge.net/projects/yoshimi
Or: https://github.com/Yoshimi/yoshimi
Our list archive is at: https://www.freelists.org/archive/yoshimi
To post, email to yoshimi@freelists.org






Date: Sun, 27 Dec 2015 16:46:52 +0000
From: contraband aardv <contrabandaardv@outlook.com>
To: "yoshimi@freelists.org" <yoshimi@freelists.org>
Subject: [yoshimi] LV2 plugins?

Hi, I am unsure of which plugin to use in Qtractor. "yoshimi" and "yoshimi-multi" 
both show up, and they seem to behave the same way. I am worried about using up
excess cpu, because for every new midi track it seems that a new yoshimi instance 
is opened. Does this consume more cpu? Is there a way to connect different midi
tracks to the same instance of Yoshimi( with different channels, the way you would
do it with the standalone version)? Besides using the standalone Jack version,
because I like to be able to save the whole project in Qtractor.

To clarify this shouldn't be a DAW/sequencer specific question, I would like to
know how to do the same thing in Ardour, for instance.

Thank you for your time,

Contraband

Date: Sun, 27 Dec 2015 20:49:38 +0400
From: Andrew Deryabin <andrew@danvd.me>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: LV2 plugins?
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101
        Thunderbird/38.5.0

Hi,

-multi version exposes one stereo output for each channel, so in default setup
you will get 2x16 stereo audio outputs.
ordinal version mixes all channels into one stereo output.


Date: Sun, 27 Dec 2015 22:14:23 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: LV2 plugins?
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

I can't remember the details but last time I setup Qtractor from scratch I
discovered that you don't set a yoshimi per track, but one 'overall' instance,
and then set your tracks to the various part numbers. In pretty much the same
way as standalone.





Date: Mon, 28 Dec 2015 23:02:46 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Eating your own dog food...
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

... can give you indigestion :(

Deciding I needed a break from software, I picked up one of my older
compositions to play around with.

This uses 32 different instruments, so at the time I composed it required two
separate instances of Yoshimi (V1.2.0 I think) although no more than 12 are
ever sounding at the same time. It's also nearly 8 minutes long!

With all the improvements we've made I thought I'd merge all the tracks (in
Rosegarden) switching programs in-line. There were more than I first expected,
as some tracks had to switch instruments, then switch back later on. There were
also quite a few bank changes. However, I now have a file that uses a single
'bare' yoshimi. This is similar to the demo track I did before, but much more
complex as well as much longer.

However, there is a problem - Xruns :(
This is running at 48k with buffer sizes at 128. Strangely my office machine is
slightly *better* than my DAW machine. That really surprised me!

This only occurs on program changes - not bank changes, and not all of them, and
not always the same ones. The current release is slightly better than V1.3.5.
V1.3.2 can't handle it at all and crashes :(


A first run seems to work OK, but it when you go back and re-run the problems
occur. This makes me wonder if it's a memory allocation issue. On first run no
parts have anything more than the basic 'Simple Sound'. Also, if I run other
programs between runs of this file, I seem to get more Xruns - some quite bad.

If I switch jack's buffer to 256, things are much better, and with Yoshimi at
256 as well the problem disappears completely, and I can even run this mail
reader at the same time.

Ho Hum. I really wanted a break from software :(




Date: Mon, 28 Dec 2015 16:39:51 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Copy/Paste bug fixing, improvements
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

On Sun, 27 Dec 2015 22:42:42 +0000
Will Godfrey <willgodfrey@musically.me.uk> wrote:

> > I plan to add system clipboard integration as a ccmake option which is
> > off by default. It is might my personal working style only that I like
> > to see the world trough ssh and vi editor but this minor optional code
> > does not make much confusion.

Actually, I can imagine this would be helpful to blind musicians as well.

Rather than a compile time option, can it be made runtime, with a switch in
'Settings'?

We've slowly been moving all of these across, because compile time options cause
headaches for the distros and confusion for users when people talk about
features they can't see.

For example, although we still have the jack/alsa options, they will be
going soon. These are the latest to be made runtime accessible, albeit with a
restart needed - changes on the fly would be a nice improvement :) 



Date: Tue, 29 Dec 2015 17:05:04 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] XML headers
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

Now that version numbers in these are viewable I guess it was inevitable that
someone would ask the significance!

These numbers are those of the synth that was used to create it. This gives an
indication of what features are likely to be used and you may lose these if you
load a file with *later* version numbers than the program you are actually
running.

For a long time Yoshimi had reported zyn version 1.1 on all these files even
though 2.4 would have been more correct.

We started to include Yoshi versions with 1.3.4 but unfortunately although
the Zyn version was updated in one of the side branches, this never got merged
with master :(

The upshot is that any file with a Yoshi version can be regarded as including
features similar to Zyn 2.4.3.

The current master, and the next release will be tagged with Zyn 2.5 (the Yoshi
version is automatically updated) and has all the features up to Zyn 2.5.2.

This latest update includes just one potential issue when playing old files.
Up to now, the adsynth->voice->filter Q had no effect if the filter type
was 'formant' and the default position for the control was set to 60.
This is now activated and has a dramatic effect. To get the same sound you need
to set it to about 36.

So far I've only come across one instrument file that is affected - one of mine
'Bubbles'.


Right, back to trying to discover why I can't get the command line to update the
part effects gui - system and insertion are fine :(






Date: Tue, 29 Dec 2015 17:40:57 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org, Andrew <andrew@danvd.me>
Subject: [yoshimi] Yoshimi Alsa/Jack
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

Hi Andrew,

Recently I implemented MIDI and Audio saved preferences in the Settings
window, and also making such settings from the command line as saved ones. This
makes the compile-time options redundant and I would like to soon remove them.
In fact, I used hooks that Cal had already put in place.

However, if you start with the wrong settings for any reason, Yoshimi still
bails out (although you can now always correct that from the command line).

In Config.cpp Cal provided no-midi and no-audio as well as the ones I used, but
trying to force-set these results in a bailout again. I feel sure Cal
originally intended to make use of them to provide a safe fallback position,
otherwise why have them?

Is this something you'd be interested in looking at?

I envisage a failed start still with Yoshimi up and running. If (say) MIDI was
OK, you'd see Yoshimi responding but just with no audio out. Whereas if audio
was OK you've be able to use the built-in virtual keyboard to produce sound.

You could then access the settings to correct the problem without having to go
via the command line.

In a perfect world it would be possible to change these and have the changes
activated immediately without needing a restart - I've no idea how practical
that would be.

A further practical option would be for both Jack and ALSA tabs to be disabled
when running as LV2.





Date: Tue, 29 Dec 2015 23:41:15 +0400
From: Andrew Deryabin <andrew@danvd.me>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Yoshimi Alsa/Jack
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101
        Thunderbird/38.5.0

Hi Will,

There was no feedback from me for a long time, though I still stay tuned with
latest changes in yoshimi :).

I try to summarize the list of changes:

1. If both midi and audio are connected at start with saved settings,
everything is ok.
2. If midi fails to connect (it only can be for saved jack binding, I think),
there can be 2 variants:

a) If yoshimi was started with no gui, then try silently to connect to another
backend and warn about it. If this also fails, simply print another warning
and continue with no midi input.
b) If yoshimi was started in normal mode, then show question dialog if user
wants to connect to another midi engine. Regardless of answer just continue to
work.

3. For failed audio the fallback algorithm should do the same sequence.
4. When starting in lv2 mode, just hide jack/alsa menu.

Correct me if I missed something :)





Date: Wed, 30 Dec 2015 13:44:24 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Eating your own dog food...
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

[-- Attachment #1 --]
[-- Type: text/plain, Encoding: 7bit, Size: 2.6K --]

On Mon, 28 Dec 2015 18:19:00 -0500
Chris Ahlstrom <ahlstromcj@gmail.com> wrote:

> Sounds like you built yourself a good test song!
> :-)

Humpf!

Sometimes I think Yoshimi is playing games with me.

Today I did run after run with just 1 (inaudible) Xrun. However, I'm getting
more convinced that this is a memory allocation problem, as I was later able to
produce a lot of them. The sequence of events was as follows.

I started Qjackctl, then Yoshimi, then Rosegarden.
I loaded the problem file into Rosegarden and ran it repeatedly - no Xruns.

With Rosegarden still in place I ran aplaymidi with a midi version of the same
file. In the third run I got my one measly Xrun.

I made a cup of tea - probably highly significant (ask Arthur Dent) :)


I then closed Rosegarden and hit the reset button on Yoshimi.
Next time I ran aplaymidi there were lots of Xruns, the worst of which occurred
when loading patches with a PadSynth component.
Immediately running aplaymidi again produced just 1 Xrun, and the run after than
none at all.

So, here is what I'm guessing.

On the first run the memory map is well ordered. Rosegarden is sitting 'above'
Yoshimi (which will have a full set of default parts). As each part gains a new
patch, memory will be allocated above Rosegarden, as the existing part space
will be too small. Later overwrites of parts will again move up if the new one
is too big for the current space.

Removing Rosegarden then clearing down Yoshimi probably returns parts to the
original space, but now there is a highly fragmented area sitting above it where
Rosegarden was, so when larger blocks are called for, the system has to scramble
to garbage collect.

PadSynth patches require a sizeable block of continuous memory, which would
explain their greater susceptibility.

I could of course be quite wrong :)

If anyone wants to play with this themselves I've attached the midi file. There
are only a few requirements.

In MIDI settings Root Change must be 0, and Bank Change LSB. Program change must
be enabled, as must Enable Part On program Change.

Root Path ID 9 should point to the default set that comes with Yoshimi, and to
get the drum track it needs to be from the latest master. 'Moor Drums' was
never generally available before.

Oh, talking of dogfood, there have been quite a few docs updates Chris :D
Most significantly, Command_Line.txt now actually tries to explain how to use
this instead of just giving a list of (now changed) commands!




Date: Thu, 31 Dec 2015 17:56:22 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Eating your own dog food...
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

On Thu, 31 Dec 2015 10:09:37 +0000
"Tom" <dmarc-noreply@freelists.org> (Redacted sender "madtom1999" for DMARC)
wrote:

> Just a thought but can you tell what causes the xruns - is there any
> data there that tells you what midi data caused it. Is there a debug
> version.setting for jack that will allow you to find out then you may
> have a little clue as to where in yosh its going funny.
> Tom - master of teaching grandma to suck eggs.

Hi Tom,

The sun was out all day today, therefore so was I :)

Yes I know with reasonable precision :(
It's MIDI derived program changes that occur while several parts are sounding.
It's mostly instruments that have a padSynth engine.
It's also most likely to occur on the parts that have switched instruments
several times.

Everything points towards memory management. PadSynth patches have to set up
then fill 8 samples of whatever sample size is set. However, I've made a tiny
improvement by making the Program Change thread lower priority. I use ALSA MIDI
and it used to be at the same level.

Jack reports 'not finished' sometimes with 'running' sometimes 'triggered'. This
is followed by a number of 'process error' messages.

I'm afraid that I'm really not clued up with debug info. Harry used to help me
out a lot here, but he seems to be too busy doing other things these days.





Date: Thu, 31 Dec 2015 00:51:04 +0400
From: Andrew Deryabin <andrew@danvd.me>
To: yoshimi@freelists.org
Subject: [yoshimi] Big MusicClient rewrite :)
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101
        Thunderbird/38.5.0

Hi Will, All,

Just pushed new commit 131ace1.

Don't panic about 8 removed files. If you will ever need them, you can
checkout any previous commit and they will appear again.

Here is a step-by-step explanation of new changes:

I removed 8 files: AlsaJackClient.cpp/h, JackClient.cpp/h,
JackAlsaClient.cpp/h, AlsaJackClient.cpp/h.
Now all combo driver functionality is handled by one class: MusicClient.

Interface became more universal. How it works:

Here is the function newMusicClient in MusicClient class. Before my changes
this function created default audio/midi driver pair and if this had no
success, yoshimi simply failed to start.

Now the behavior is different.
There are 3 drivers for audio: jack_audio, alsa_audio, null_audio
and 3 drivers for midi: jack_midi, alsa_midi, null_midi.
When creating new music client, default driver pair is tested first. If it
fails, then new algorithm tries to open combos in following order:

jack_audio/jack_midi (if is was not the first)
jack_audio/alsa_midi
alsa_audio/alsa_midi
jack_audio/no_midi
alsa_audio/no_midi
no_audio/no_midi

Now yoshimi will never fail it's startup because of new driver 'no_audio'
which is a simple thread, that calls masterAudio at constant intervals
emulating virtual audio device.

Now, if default audio/midi pair fails, no questions are asked and fallback
pairs are probed automatically. Don't know if there is a probability that user
will tap 'No' to question about switching to alternate pair.

--
Regards,
Andrew


Date: Wed, 30 Dec 2015 21:40:12 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Big MusicClient rewrite :)
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

On Thu, 31 Dec 2015 00:51:04 +0400
Andrew Deryabin <andrew@danvd.me> wrote:

> Hi Will, All, ......



That was remarkably quick work.

I've just checked it out. The changes work well but there is a problem.

When using Jack audio the pitch is shifted about a semitone high, and the
startup message says samplerate is 44.1K although I have jack set to 48K.
If I set jack to 44.1K then it's OK. 


[It gets fixed]



ate: Wed, 30 Dec 2015 21:57:29 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Big MusicClient rewrite :)
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

Works fine now. I just tested it on all rates that jack supports from 22000 up
to 192000

Very pleased with this :) :)



Date: Wed, 30 Dec 2015 22:29:57 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Big MusicClient rewrite :)
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

Picked up the LV2 adjustment and updated changelog :)
Pushed to github as well.



Date: Wed, 30 Dec 2015 22:41:36 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: Yoshimi device detection
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

... so you see Chris, even Andrew is making work for you :D

Actually, this is something I've wanted sorted out for a very long time.





Date: Thu, 31 Dec 2015 20:31:55 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Last commit for 2015 :)
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

You can now legitimately have different instances with different backends, no
matter what the main instance is.

If you have three soundcards you could have the first instance of yoshimi
reserving soundcard 2 while soundcard 1 is dedicated to jack with instances 2
and 4 using it, while instance 3 uses your 3rd card.

At the same time instances 1 and 2 could be getting midi via jack while 3 and 4
fetch from alsa.

If you are working under LV2 then the jack and alsa setup tabs will be
deactivated.




Date: Fri, 1 Jan 2016 18:03:43 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Priorities!
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

Today I had the bright idea of running htop - something I should have done some
time ago.

There's jackd right at the top, and directly beneath it three yoshimi threads.
One that just seems to be sitting doing nothing, one with just occasional small
bursts of activity that are obviously the program changes, and another with
considerable fairly steady CPU demand - the main audio thread.

Well, so what? It took a few minutes to realise that the program thread
was *above* the audio one! Changing the priority decrease value for the program
thread to 7 completely got rid of the Xruns, and it now also runs Xrun free
with a buffer size of 64... and while running this email reader :)

With hindsight, it's jack that determines the priority of the audio thread so
maybe we need to find a way of discovering this, and keeping everything else
below it.

I've still no idea what the more-or-less dormant thread is doing {shrug}



But... there's more!

I've know for some time there is a flag used to mute audio while an instrument
is being loaded and set up, and always thought this was for just that part, but
in fact the entire audio output is muted, which seems quite wrong. I don't know
why I've never noticed this but it must potentially create silent gaps.

Obviously you don't want the audio thread trying to access a part that's in an
undefined state but I thought maybe there was another mechanism we could use.
Well there *is* a flag that is per part, but not within the part structure, and
it's what partonoff() uses. This is the sequence I tried.

Take copy of part status
Turn part off
Perform program change
if 'enable part on program change' is set
  enable part
else
  restore part to saved state

My reasoning is that if this flag is set outside the audio mutex, then as the
parts are scanned this one will be passed over. Once the mutex has been set,
the flag can't change so the ringbuffer just waits until the mutex clears. A
worst case jitter of one period on a program change really isn't going to
matter at all!

This seems to work quite correctly. I'll give it some more trials before
pushing it out though, and if anyone can see a logic issue hidden in there let
me know!

So there you go. Hopefully a promising start to 2016 :)





Date: Sat, 2 Jan 2016 08:31:58 +0000 (UTC)
From: John Fox <dmarc-noreply@freelists.org>
To: "yoshimi@freelists.org" <yoshimi@freelists.org>
Subject: [yoshimi] Hardware Recomendations For Portable System

Gday Everyone...
My name is John. I'm looking to build a portable synth, which will be yoshimi
running off a 12v battery.. I've had a little bit of sucesss with an Atom D525 @
1.80GHz with 2G RAM through the on board intel sound card on a fan-less low power 
machine. However I'm sure the much more room for improvement... Do you guys have
any suggestion for suitable hardware / interface configurations for a project like
this? I was thinking of using a 37 Key controller from Sythesizers.com too. I'd be
interested to hear your ideas, especially on what kind of specs yoshimi really
likes.



Date: Sat, 2 Jan 2016 11:30:54 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Hardware Recomendations For Portable System
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

On Sat, 2 Jan 2016 08:31:58 +0000 (UTC)
"John Fox" <dmarc-noreply@freelists.org> (Redacted sender "sirjohndfox" for
DMARC) wrote:

Hi John,

Just over a year ago I got a very compact fanless computer from Scan
Computers. This was intended as an 'office' machine where small size and
quietness were the priorities. It has a dual core Intel i5 processor. However, I
found that if I disable the internal sound and connect a KA6 I get *very* good
performance, sometimes exceeding that of my dedicated DAW!
've heard of people doing the same with i5 based laptops. Many laptops use a
19V external power supply, but if you hunt around you can get DC-DC converters
that take 9-18 in and push out exactly 18V. This is ideal for a battery supply
and fine for the laptop.

However be wary of hyperthreaded machines, they tend to be bad news as
they share a floating point unit between cores. Yoshimi uses almost entirely
floating point calculations so a quad core hyperthreaded processor can
actually perform worse than a standard dual core one.

I also recommend using a very lightweight window manager such as xfce.

When using any USB devices, from a terminal window type 'lsusb' to see what
devices are on what Bus then experiment with swapping what you have plugged in
so that your sound stuff has the minimum contention (ideally none). A MIDI
keyboard/controller is less critical, but if you have the ports
available it's worth the effort.




ate: Sat, 2 Jan 2016 11:35:25 -0600
From: Jonathan Brickman <jeb@ponderworthy.com>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Hardware Recomendations For Portable System

John, that is a remarkable question you have there.  Obviously you mean
"portable" to a much larger extent than my box is!  I'll suggest that
Yoshimi likes a very wide variety of hardware, depending entirely on what
you're doing with it.  My synth runs three Yoshimis with two tones each,
plus an additional, and several other components also including a few Calf
chains for postprocessing; I could probably go twelve-volt-portable if I
bought a Tesla and drove it everywhere :-)

But you're clearly building something closer to a backpackable rig.  Very
interesting project.  A few thoughts.

On-board sound is very likely to save you power, as I imagine you have
already thought.  If your Atom is giving you enough computational power, I
will think that one of the higher-end Raspberry Pi compatibles is likely to
do you better, if you can find one with enough computational, because a
great many of them are being explicitly made for home-theatre devices,
which means audio quality.  I do not know how your Atom compares with any
of the very different ARM chips, but someone must have done a comparison?
ARM is very stingy indeed with power.

It is true that the last time I tried audio on my RPI2 it was challenging
enough that I went on to other things :-)  But lots of people are reporting
great success and high quality, and a better device explicitly made for
home theatre will have specific instructions on the supplier / developer
web site, which instructions I never found for my hardware combo.

You can also reduce power usage a whole lot by using SSD or USB stick as
storage.  If you do this, set up the machine to depend as much as possible
on storage running BTRFS with all of the SSD special settings in fstab, to
avoid wearing out the SSD or USB very quickly, and be careful with backups
too.  If you use an RPI2 or something like, you can keep the OS in default
fashion on the bundled microSSD, and then put everything which changes a
lot (working data, logs) on the BTRFS device.  My own current RPI2 joy is
discussed here
<http://notes.ponderworthy.com/a-raspberry-pi-2-makes-a-great-roll-your-own-dropbo
x-server>,
though it is not an audio project.

MIDI may possibly give different problems.  I still sometimes see better 
reliability of MIDI-DIN than MIDI-USB.  Obviously MIDI-USB will save you
power, because there is no signal converter between your synth and the
keyboard, so I would try that first and if it's good you're in; otherwise I
can heartily recommend the Yamaha UX-16
<http://usa.yamaha.com/products/music-production/accessories/usb-midi/ux16/>,
I have never had a failure of one of these, and I have three, one of them
more than ten years old.  But the larger issue that keeps me on my toes in
this, is USB ports and cables wearing out.  USB-A was never designed for
unplug/replug very often.  But my box is a big mid-tower, and so it is easy
for me to replace ports, and so I do.  If I were you, I would choose your 
next box for replaceability of USB ports, which in small-portable means (a)
pin-header USBs on its little motherboard and (b) some generic form of 
panel USB ports.

I do not know if there is an equivalent of the ATX standard for
very-small-form-factor specifying a front port panel and a set of
manufacturers which will supply USB front panel ports, but I would look for
this next.  An ARM minimicroATX standard with good manufacturer support may
well exist at this point -- the home-theatre market is huge, though
possibly mostly outside of the U.S. if my web research results are
indicative -- but it also may not, and if it doesn't, I would find a
home-theatre-oriented smallest-ATX Atom motherboard, and a case convenient
for you (a handle is nice), and use ATX.  That way you will avoid a lot of
pain and expense!  And do keep spare USB cables, USB ports, et cetera, in
your travel bag.  When USB goes out it sometimes gives warning -- sometimes
a reseat will make things work the first five or six times -- but sometimes
it gives no warning at all, and you will find yourself frantically checking
every cable over and over again trying to figure out what is going on :-) 


One thing I would very much like to do, is to use microUSB on the synth
side, as microUSB was designed for phones and has the highest rated
durability of any port except the historic quarter-inch mono phone jack.
But I have yet to find a PCI or PCI-E microUSB adapter card, and I have
done a lot of looking and asking.  I have more hope with USB-C, but some
USB-C ports are being rated considerably less than microUSB...although some
are rated the same.  So this is a probable future for me, whenever my
current ports wear out :-)

J.E.B.




Date: Sat, 2 Jan 2016 21:10:39 +0000
From: Gilles <blondingilles@hotmail.com>
To: "yoshimi@freelists.org" <yoshimi@freelists.org>
Subject: [yoshimi] Re: Hardware Recomendations For Portable System

Hi everybody, I have been running Yoshimi on an ARM device without any issues for
over a year now. It's an Odroid quad core that uses 5vdc and is running on a
Ubuntu Studio 13.10 ARM version called Smooth Groove. I will often be running
Yoshimi, Qsynth, Hydrogen, Seq24, Jack and Ardour3 all together with a Behringer
UMX610 keyboard and two control surfaces without a glitch. And now that Will has
graciously implemented the CC2 Breath control feature in Yoshimi I'm looking into
running it monitor-less off a 5vdc battery pack on my belt with a USB wireless
keyboard for Command mode and a bluetooth dongle to send the sound to an
amplifying system so I can play my EWI USB on stage without being attached to a
cable.




ate: Sun, 3 Jan 2016 00:08:18 +0000
From: Gilles <blondingilles@hotmail.com>
To: "yoshimi@freelists.org" <yoshimi@freelists.org>
Subject: [yoshimi] Re: Hardware Recomendations For Portable System

The EWI USB as it's name suggests uses a USB port instead of MIDI and is handled
by Jack very nicely. As for bluetooth I haven't decided what to do yet. Go for a
transmitter/receiver kit hooked up to a regular amplifier and speakers which I
already own or use a dongle and get a set of professional bluetooth self powered
speakers. Not sure but I'll be shopping soon now.




Date: Sat, 2 Jan 2016 23:46:31 +0000
From: Gilles <blondingilles@hotmail.com>
To: "yoshimi@freelists.org" <yoshimi@freelists.org>
Subject: [yoshimi] Re: Hardware Recomendations For Portable System

It's the Odroid U3


* 1.7GHz Quad-Core processor and 2GByte RAM

* 10/100Mbps Ethernet with RJ-45 LAN Jack
* 3 x High speed USB2.0 Host ports
* Audio codec with headphone jack on board
* GPIO/UART/I2C ports
* XUbuntu 13.10 or Android 4.x  Operating System
* Size : 83 x 48 mm, Weight : 48g including heat sink
Ordered the case along with it and no cooling fan is needed


It's been discontinued but replaced with the U4 model going for $75.00. I'll be
testing with the Orange Pi next week. At $15.00 a crack if it's as good as the
Odroid it's a steal. Technology moves up and prices go down. What a wonderful
world.




Date: Sat, 2 Jan 2016 17:29:07 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Yoshimi 1.3.8
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

Wait for it! Not quite yet :)

I'm intending to release this about the middle of the month (I may have
mentioned this before) to catch the next ubuntu long term release.

If anyone is seeing problems please double-check against the current master,
and if they persist let us know!

I'm not expecting to do anything dramatic between now and then, but will
probably continue to pootle about with the command line.

Pootle - an arcane term known only to those steeped in the art of [REDACTED]







Date: Sun, 3 Jan 2016 11:37:27 +0100
From: Frank Neumann <beachnase@web.de>
To: yoshimi@freelists.org
Subject: [yoshimi] Slightly irritating startup behaviour with "&"
X-Mailer: Sylpheed 3.4.1 (GTK+ 2.24.23; x86_64-pc-linux-gnu)
Organization: Disorganized, kind of.


Hi all,

with the recent advent of the command line interface, I found something that's
"just slightly" confusing for me and might be for others too:

I am used to start my programs (including yoshimi) on the command line instead
of double-clicking, just so I can see any suspicious console output.
Also, I am used to detaching it from the shell via "yoshimi &" to have the
shell available for additional commands.

However, this collides with the command line interface of Yoshimi:

franky@silence:~> yoshimi &
[1] 6990
franky@silence:~> Yoshimi is starting

Yay! We're up and running :-)
/home/franky/.yoshimi_history: No such file or directory


[1]+  Stopped                 yoshimi

Ok, so what happens is that I get to see the splash screen, but the
GUI doesn't come up. If I use "fg" to "foreground" the detached shell job,
it continues fine.

The "&" is likely conflicting with the command line interface which wants to
read from stdin - which is getting suspended here.

A suggestion: Add a new parameter "-cmd" or such, and only when it's given,
activate the interactive command line.

Greetings (oh, and a late happy new year too ;-),
Frank

Response:

It's already here, but is shorter: '-c' :).
Just checked - with command line disabled yoshimi starts in background w/o
problems.



Date: Sun, 3 Jan 2016 11:13:41 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Slightly irritating startup behaviour with "&"
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)



I wonder if this should be the other way round. At the moment you use the -c
option of you *don't* want to send commands to a running Yoshimi, although I've
no strong feelings on the matter myself.

As a point of interest, having Settings->Send Reports set to 'Console' will give
you reporting of all non-fatal errors in the 'Reports' window, and with the
latest improvements, fatal ones are far less likely.




Date: Sun, 3 Jan 2016 12:27:05 +0100
From: Frank Neumann <beachnase@web.de>
To: yoshimi@freelists.org
Cc: Will Godfrey <willgodfrey@musically.me.uk>
Subject: [yoshimi] Re: Slightly irritating startup behaviour with "&"
X-Mailer: Sylpheed 3.4.1 (GTK+ 2.24.23; x86_64-pc-linux-gnu)
Organization: Disorganized, kind of.


Hi again,

hm..one more finding:

> > It's already here, but is shorter: '-c' :).
> > Just checked - with command line disabled yoshimi starts in background
> > w/o problems.

Ok, that works, but at least in my case (starting Yoshimi with "yoshimi -c &"),
quitting Yoshimi via the close widget in the main window's top right (or left,
depending on WM) corner is delayed until I press "fg" once more in my
controlling shell/xterm.

	[It's a bug]

I guess this means that command line interface and GUI are living in the same
thread, and one can suspend the other. Having the CLI in a separate thread might
fix it, but perhaps the easy solution would really be to simply make "console
disabled" the default mode - someone working exclusively with the console (like
a blind musician) would also use the console to quit it (btw - there is no "quit" 
command in the console at this point?), and someone using it mostly
interactively would perhaps not care about command line a lot.

   [The command line is in a separate thread when active and then you have
     an 'exit'  command as well as gui closure. That setup seems to work
      completely correctly.]





Date: Thu, 7 Jan 2016 13:52:42 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org, Frank Neumann <beachnase@web.de>
Subject: [yoshimi] Yoshimi command line with '&'
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

Hi Frank,

Hopefully this is now resolved in the current master. It works correctly for me
although the exit isn't quite as neat as I would have liked. You don't
immediately see the original prompt and there's an extra message on the next
line whether it is a newline or a complete command.

Please give it a try and let me know:

        yoshimi -c &



Date: Thu, 7 Jan 2016 14:04:15 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] The Swan - Yoshimi 1.3.8
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

Up to now we've never used codenames but I think this is appropriate.

We're still on target for a release this month although there is an issue with
changing between alsa & jack that I want resolved first.

The command line has been re-ordered a bit and 'help' is now context sensitive.

Program Change behaviour has been improved and is more robust.

A rare bug-ette in SubSynth has been squashed.

appdata and desktop files have been updated which should help those using gnome
or other environments that use these files (I don't).

P.S.
Watch a swan on a lake :)





Date: Sat, 9 Jan 2016 17:40:26 -0500
From: Rob Couto <dbtx11@gmail.com>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: The Swan - Yoshimi 1.3.8

Hi, sorry to report it's all working fine for me, too...

On 1/9/16, Jonathan Brickman <jeb@ponderworthy.com> wrote:
> Is there a log I can send up that will help?

Yes, could you start from zero again, and instead of ccmake <dir>, run
cmake <dir> to just set up with all defaults, and then post the
console output and attach CMakeFiles/CMakeOutput.log? btw if you run

ldd `which cmake`

it will show you the list of run time dependencies, and any one of
those libraries being recently updated to a dodgy build could result
in this. If you run
gdb --ex run --args `which cmake` <dir>
then when it crashes it should at least show the filename that brought
in the function where it died though TBH it might not even be the
culprit.




ate: Sun, 10 Jan 2016 12:53:29 -0500
From: Rob Couto <dbtx11@gmail.com>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: The Swan - Yoshimi 1.3.8

On 1/10/16, Will Godfrey <willgodfrey@musically.me.uk> wrote:
> So, backpedaling a bit. Did you say the same version of cmake you compiled
> yourself worked correctly?

You mean 3.4.1? To be precise, that's compiled and installed by
portage more or less automatically and yes, it still works. There are
also patches that come in and wouldn't be in Debian, and you can find
them in

https://github.com/funtoo/ports-2012/tree/funtoo.org/dev-util/cmake/files

and the ones that this version actually uses will be listed in PATCHES here:

https://github.com/funtoo/ports-2012/blob/funtoo.org/dev-util/cmake/cmake-3.4.1.eb
uild

Can't say whether any of that matters-- hadn't quite gotten to
comparing that ebuild with Debian's own info and patches. A while ago
I started "apt-get source --compile cmake cmake-curses-gui cmake-data"
but the virtual disk is too small and filled up too soon. That was
just to see if rebuilding in Debian's own way with an updated
environment would help, and to get the files it uses.

It's easy to type "emerge cmake" and check back in a while ;)

For Debian-based distros (especially if this is limited to it and
them), I'd say people should just downgrade cmake like I did, until
either of those bugs gets fixed & closed. For Sparky I duplicated the
lines in /etc/apt/sources.list changing testing to stable (but they
would probably want to place the new lines in
/etc/apt/sources.list.d/something.list). It can reach old and new but
it will always try to run the newest and so pull everything from
testing anyway-- except where they specify with 'apt-get install
cmake=3.0.2-1 cmake-data=3.0.2-1 cmake-curses-gui=3.0.2-1'. Then
they'd want to 'apt-mark hold' that version. Later on when 3.4.x
works, they would unhold, maybe move that something.list file, update,
and upgrade.

Although I recently finished customizing a Raspbian image, Debian and
derivatives aren't my thing. So if anything there is wrong, now you
know why. I know I'll need to be testing on more of them soon, so it's
just as well to start playing with one now.

So, I'm back to trying out apt-get source --compile again. HTH




Date: Thu, 14 Jan 2016 21:04:10 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] The Swan has been released
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

lets hope it really flies :)

Just had a though. Do any of you get into social media, Twitter etc? If so,
fancy giving us a bit of a plug?


Just to remind you of all that's been happening:

Yoshimi 1.3.8 highlights

We have our first code name: The Swan

MIDI program changes have always been pretty clean from the time Cal first
introduced them, but now GUI changes are just as clean. While it is generally
best to change a program when the part is silent, even if a part is sounding
there is usually barely a click. There is no interference at all with any other
sounding parts.

Sometimes MIDI CCs don't seem to give the results you expect. Well, there is
now a setting that will report all incoming CCs so you can discover what
Yoshimi actually sees (which may not be what you were expecting).

At the request of one of our users, we have now implemented CC2, Breath Control.

The 'Humanise' feature has had more interest so it's been upgraded. It's now a
slider and it's setting can be saved in patch sets. It provides a tiny per-note
random detune to an *entire* part (all engines in all kits), but only to that
part.

Audio & Midi preferences have been improved. If you set (say) ALSA MIDI and
JACK audio, either from the GUI or the command line, the setting can be saved
and will be reinstated on the next run. These settings are per-instance so if
you have multiple sound cards you can make full use of them.

Barring major system failures, there are now no circumstances where Yoshimi
will fail to start.

There is greater control of your working environment. You can have just the
GUI, just a CLI or both, and these settings can be saved. If you try to disable
both you will get a polite warning and will be left with just the CLI.

The CLI can now access almost all top level controls as well as the 'main page'
part ones and can select any effect and effect preset, but can't yet deal with
the individual effects controls. It can be used to set up Vector Control much
more quickly and easily than using NRPNs.

It is also context sensitive, which along with careful choice of command names
and abreviations allows very fast access with minimal typing.


Yoshimi's parser is case insensitive to commands (but not filenames etc.) and
accepts the shortest unambiguous abbreviation. However it is quite pedantic,
and expects spelling to be correct regardless of length. Apart from the 'back'
commands, it is word-based so spaces are significant.

Some examples:

s p 4 pr 6 (set part 4 program 6)
This sets part 4 to the instrument with ID 6 from the current bank. It also
then leaves you at part context level and pointed to part 4. Additionally, it
will activate that part if it was off (and the config setting is checked). In
most cases the words 'program' and 'instrument' are interchangable.

s ef 1 ty rev
This moves you up to part effects context level and sets that part's effect
number 1 to effect type 'reverb'.

s pre 2
Sets preset number 2 (we use numbers there as most preset names repeat the
effect type).

..s 6 v 80
Drops you back to part level, switches you to part 6 and sets its volume to 80
(but doesn't actually enable it).

/s ve cc 93
Goes back to the top level and sets vector control for channel 0, X axis to
respond to CC 93 leaving you in the vector context.

Whenever intermediate values are omitted default or last used will be assumed,
and all counting starts from zero.

The CLI prompt always shows what level you are on, and the help lists are also
partly context sensitive so you don't get a lot of irrelevent clutter.

There is more, and a lot more to come!


While doing all this work, we've also ensured that Yoshimi instrument patches
are still fully compatible with Zyn ones, and have now ported across the new 
refinements with thanks.


Finally a (slightly updated) car analogy:

A sample player is a drive along a straight, wide, almost new highway with only
2 other cars in sight, on a lightly overcast summer's day in a Ford Fiesta at
around 40 MPH.

Yoshimi is a white-knuckle trip over a Swiss mountain pass in a blizzard, at
night, facing donkeys, trucks and bandits, while driving an open-frame kit car
doing 90 +

In recent times we've been able to dispose of the donkeys, and the bandits are
on the run :)






Date: Fri, 22 Jan 2016 09:17:52 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: The Swan has been released
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

On Thu, 21 Jan 2016 14:46:14 +0000
Adam Huffman <bloch@verdurin.com> wrote:

> On Fri, Jan 15, 2016 at 10:42:11PM +0000, Will Godfrey wrote:
> > On Thu, 14 Jan 2016 21:04:10 +0000
> > Will Godfrey <willgodfrey@musically.me.uk> wrote:
> >
> > > lets hope it really flies :)
> >
> > Well it tried!
> >
> > 26 hours and there's a bugfix version already :(
> >
> > sprintf in the command line code without a format string {sigh}
> >
> > I must work out how to set up my system so it reports these.
> >
>
> I've submitted an update to 1.3.8.1 for Fedora 23. It's available for
> testing here:
>
> https://bodhi.fedoraproject.org/updates/FEDORA-2016-c3eab4387c

Thanks Adam, much appreciated.

For those using debian testing there is V 1.3.8.2 to get round the cmake
segfault problem. You only need to upgrade to this if you have this issue. It
seems to be specific to the December 2015 build of cmake 3.4.1




Date: Sun, 17 Jan 2016 22:00:43 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] More to be going on with
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

Well with The Swan having a slightly shaky start but swimming serenely now,
there is new development on-going.

Csaba has supplied a couple of patches, which are now in master.

The first fixes a bug in presets that was only recently discovered (although I
suspect it's been there a long time). You could save an AddSynth voice preset,
but then couldn't re-load it as the code didn't recognise the extra 'n'.

Also, not a bug, but the store presets no longer show their extension. This
makes the names easier to recognise, but you do have to keep an eye on the
heading. It doesn't currently exactly shout at you.

Csaba is looking through the whole of the presets code, and has already
identified other inconsistencies.


On the CLI I've hit a bit of a speed bump. While working through effects I
realised I was duplicating code that's in the GUI - code that really should not
be in either, but in the effects themselves!

At the moment I'm thinking that each effect should have its text name, the
names of all its presets, the number of presets, and the number of controls it
has. The effects manager would then point any queries to the *current* preset,
and provide a call for *any* external interface to interrogate.

Done right, if the effects manager also supplies the number of effects this
would also allow new effects to be painlessly added at a later date.

I haven't worked out how to implement any of this yet, so all thoughts are
welcome!


Yoshimi's config file has grown enormously, but has done so in the manner of a
bramble patch :(

There are settings that should be common to all instances mixed with ones that
logically should be per-instance, with a huge dollop of roots and banks for
good measure. I've already moved the roots and banks to the end of the file
(I wonder if anyone noticed). However I'm thinking the whole thing should be
split up as below:

1) yoshimi.config - a much reduced common settings - interfaces, sample rate.
2) yoshimi.instance(n) - current root/bank, MIDI settings, preferred engines.
3) yoshimi.history - recent patch sets, and why not recent instruments & scales.
4) yoshimi.banks - the biggie.

1 - a single file every instance can read but only the first one can write.

2 - totally independent files.

3 - a single file every instance can read and write (would need to sort out GUI
sync)

4 - this really should be similar to 3, but presents real sync issues.
Currently each instance takes its own copy of the actual files as it starts up.
However, they can all save, delete and/or rename the *actual* files without
talking to the other instances, so you can move a file in one instance then try
(and fail) to access it from another.

This doesn't have to be sorted out tomorrow - yesterday will do :p - but if
anyone has a point on view on this, or would like to take it on, lets hear.





Date: Thu, 21 Jan 2016 14:33:32 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Splitting up config
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

I've taken the first step for this in the current master.

At startup *after* all the configuration is complete there is now a call to a
new function SynthEngine::installBanks.cpp

On a per instance basis, the first thing this does is look for a
yoshimi(-n).banks file, if it can't, find that it then hunts for a
yoshimi(-n).config file and if that fails it does a rescan for banks. In this
way it should be completely backward compatible with any previous config files.

The banks file is then saved every time there is a normal exit, so your last
used root and bank IDs will always match what that instance thinks is there.
The problem with changed actual files will have to be addressed another time :p

Conversely, the main config file *doesn't* get saved when you start a new
(unkown) instance, but the config changed flag is set, so you have control
over whether any settings are saved.

So now, if anything goes wrong with the config files they won't corrupt your
carefully organised bank files, and vice-versa.

Before splitting the config file up further I need to develop some more XML
routines, otherwise I'll be duplicating a lot of initialising and file
search code. Also, at some point I'm going to have to take a look at the XML
wrapper files, as we are now getting a lot of redundant data saved.

Currently, no compression is used on any of these files, but I think
eventually, they should follow the main config setting.
 




Date: Tue, 26 Jan 2016 19:10:18 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Splitting up config
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

Recent patch sets are now no longer stored in the main .config file, but in a
new .history one. This will later be extended to include other useful recent
sets.

I haven't provided any facility to copy across old settings. There are only a
maximum of 25, and it's not worth the effort of the extra code. You'll soon
refill it anyway :)

The file is loaded at startup and saved at a normal close. There didn't seem to
be any point making it resave when new items appear. At worst, you'd only lose
those few list entries should Yoshimi fail for some reason.





Date: Thu, 28 Jan 2016 16:29:19 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Bash, zenity, yoshimi state file selection upon startup
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

On Wed, 27 Jan 2016 22:23:26 +0100
Lorenzo Sutton <lorenzofsutton@gmail.com> wrote:

> Hi all,
>
> I'm working on a project where I am (will) be creating quite a few state
> files which eventually I need to quickly load upon yoshimi startup.
> I came up with this small script which also uses zenity [1]. It's
> actually quite a time-saver compared to starting yoshimi and then
> selecting load etc...
>
> Maybe it can be useful/of interest for other users on the list so why
> not share :-)
>
> http://paste.fedoraproject.org/315484/raw/
>
> Lorenzo.
>



>
> I will be adding 'recent saved states' to the history file in the same style
> as 'recent patch sets'. Maybe that would be useful in connection with the above 
> for generating a menu list.
>

That's definitely a neat feature and might fill the use case for quite a few
cases... My script is just a hack really, and is used in conjuction with other
script(s) to automate a bunch of launching... I am guilty of really never
looking at session management which could also helo when dealing with multiple
applications :)

Lorenzo.






Automated launching is not easy to do reliably.  I have a lot that gets
launched automatically; I am using mostly Python:

http://lsn.ponderworthy.com/doku.php/concurrent_patch_management

J.E.B.





Date: Thu, 28 Jan 2016 14:03:31 -0600
From: Jonathan Brickman <jeb@ponderworthy.com>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Sample Rates
User-Agent: Mozilla/5.0 (Windows NT 6.3; WOW64; rv:38.0) Gecko/20100101
        Thunderbird/38.5.1


>> Sorry, 96k is as high as I go at the moment :-)
> Thanks for replying Jonathan. I rather suspect there are few, if any people
> who have such a top-end card. Actually, I hardly ever use even 96k.
I am not convinced that most people need 96k.  However, I find that for gentle
whisper overtones and elimination of a screech problem in the higher registers
in my Maximum Strings
(http://lsn.ponderworthy.com/doku.php/towards_maximum_strings) patch, I really
do have to have it.  So I have to run the whole rig at 96k, and thus I am
deeply grateful for your testing of Yoshimi thusly too!




Date: Fri, 29 Jan 2016 17:31:52 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Scales & State
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

I dimly remember someone saying they used quite a lot of different scale
settings. Well whoever you are I have good news for you :)

In the current master, up to 25 recently used scales are now stored in the new
history file, and can be quickly reinstalled with a mini browser in exactly the
same was as patch sets.

Recent states are also implemented but with a caveat. Some system settings will
be ignored as they can't be changed in a running yoshimi. Some day I'd like to
be able to change that.







Date: Fri, 29 Jan 2016 09:02:57 +0400
From: Andrew Deryabin <andrew@danvd.me>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Sample Rates
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101
        Thunderbird/38.5.1

Hi All,

I tested yoshimi with 24/192 setup and everything seems to work fine. Here are
the startup messages:

[andrew@andrew-desktop ~]$ /opt/yoshimi/bin/yoshimi -J -a -K -c
Yoshimi is starting
Using jack_audio for audio and alsa_midi for midi
Yoshimi 1.3.8 M
Clientname: yoshimi
Config: Audio: jack -> 'default'
Midi: alsa -> 'default'
Oscilsize: 512
Samplerate: 192000
Period size: 1024

Yay! We're up and running :-)
Registered jack port 0



Date: Sun, 31 Jan 2016 16:49:43 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] config reorganisation - almost complete
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

At the bottom of this email is the current *much* reduced .config file

The first thing you'll notice is that the doctype is no longer ZynAddSubFX.
This is because it is not now compatible in any meaningful sense of the word.
However, this is not an issue. The config is always going to be specific to one
machine and working modus so I can't see anyone wanting to copy it across even
to another yoshimi environment.

The other files that now have a Yoshimi doctype are the new history and banks
files as these have no equivalent in Zyn. Also, state should always have been
Yoshim as Zyn doesn't have that facility.

The ones that still *do* have ZynAddSubFX doctype are instruments, patch sets,
presets & scales. All these are directly compatibile, with the proviso that
things like audio destination are not available in Zyn.

The final stage of splitting up .config will be the system wide settings and
instance ones. My thinking is that the split should take place just after the
preset directories. However there are three settings I'm not quite sure about.

The first is the ALSA sample rate. If you have different cards directly
controlled by different instances would you *really* want them running at
different rates. I don't think it's likely myself, but can anyone think of a
reasonable use-case?

Next is sound buffer size. Once again, can anyone see a need for it to be
per-instance? I can't.

Finally, we have the AddSynth oscillator size. Is there a use-case for it it be
per-instance?


Once everything is settled I'll go about fixing the system wide stuff (not too
sure of the details yet). .config will be readable by all instances, but
writeable only by the main instance. The relevant controls will be greyed out in
the other instances.

The history will be a single buffer and file, readable and writeable by all
instances. This is actually quite interesting as there can never be a conflict.
It is impossible to have two browser lists open at the same time (try it!) and 
the lists are always rebuilt from memory every time they are opened. Similarly,
the histories are added too every time a new recognised file is loaded or
saved and you can't physically do two at the same time - even if you could it
would simply mean that one very briefly waited for the other, which is not an
issue as they are not in the RT thread.

The entire config set should then be.
.config
.instance[n]
.history
.banks (this is currently per instance - much more thought needed here)

.windows is specific to the gui so doesn't figure in this scheme at all.



<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Yoshimi-data>
<Yoshimi-data Yoshimi-author="Alan Ernest Calvert" Yoshimi-major="1"
Yoshimi-minor="3">
<INFORMATION>
<string name="XMLtype">Config</string>
</INFORMATION>
<BASE_PARAMETERS>
<par name="max_midi_parts" value="16" />

<par name="max_kit_items_per_instrument" value="16" />
<par name="max_system_effects" value="4" />
<par name="max_insertion_effects" value="8" />
<par name="max_instrument_effects" value="3" />
<par name="max_addsynth_voices" value="8" />
</BASE_PARAMETERS>
<CONFIGURATION>
<par name="gzip_compression" value="3" />
<par name="enable_gui" value="1" />
<par name="enable_CLI" value="1" />
<par name="single_row_panel" value="1" />
<par name="reports_destination" value="0" />
<par name="hide_system_errors" value="0" />
<par name="report_XMLheaders" value="0" />
<par name="virtual_keyboard_layout" value="1" />
<par name="sample_rate" value="48000" /> 
<par name="sound_buffer_size" value="128" />
<par name="oscil_size" value="512" />
<PRESETSROOT id="0">
<string name="presets_root">/home/will/.config/yoshimi/presets</string>
</PRESETSROOT>
<PRESETSROOT id="1">
<string name="presets_root">/usr/local/share/yoshimi/presets</string>
</PRESETSROOT>
<par name="interpolation" value="0" />
<par name="audio_engine" value="1" />
<par name="midi_engine" value="2" />
<string name="linux_alsa_audio_dev">hw:PCH</string>
<string name="linux_alsa_midi_dev">Hua Xing</string>
<string name="linux_jack_server">default</string>
<string name="linux_jack_midi_dev"></string>
<par name="midi_bank_root" value="0" />
<par name="midi_bank_C" value="32" />
<par name="midi_upper_voice_C" value="128" />
<par name="ignore_program_change" value="0" />

<par name="enable_part_on_voice_load" value="1" />
<par name="check_pad_synth" value="1" />
</CONFIGURATION>
</Yoshimi-data>





Date: Fri, 12 Feb 2016 20:23:42 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Hmmm.
X-Mailer: Claws Mail 3.11.1 (GTK+ 2.24.25; x86_64-pc-linux-gnu)

Our 'state' file consists of the entire setup from basic config settings to
currently loaded instrument sets. However, on investigating some session
managers it looks like they don't want (or can't use) most of the config stuff
because they are expecting to be able to change state in *running* instances.

I never use session management so I'm a bit unclear on this. If and when I get
around to splitting the 'instance' data from the main config, then a lot of
this can be resolved buy only saving the 'true' config stuff locally, and to
'our' state save.

However, the 'instance' data will include things like alsa/jack settings so I
don't know what we should do about that. Currently we can't change these live
(although it would be nice if we could), but would anyone want to do so from a
session manager?

Is anyone using any of these? If so, what would you like to be able to set
session-wise, and what would you consider as fixed?





Date: Mon, 22 Feb 2016 19:55:20 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Yoshimi 1.3.9 rc1 - more details
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.29; x86_64-pc-linux-gnu)

Now we seem to be in the clear (hopefully) there is a small adjustment I made
to the CLI recently.

The 'paths' command no longer exists. Instead we have 'add' & 'remove', so
instead of 'path add' it's 'add root'. Also you can now add and remove banks
using the same structure. 'paths show' has now been moved into lists as 'list
roots'.

These changes make roots/banks/instruments more consistent.

However, at the moment it requires a full path to be used, and doesn't offer to
create it. There are a few other places in the code where this happens, so what
I'm considering is a new function in MiscFuncs that will build up the directory
structure as required. Also, I'll probably arrange it so that if you don't put
a leading '/' on the search string it will assume '/home/{user}/'.

Something I'm less sure about is whether we should make 'banks' compulsory for
the last part of a root path. It has been optional up to now, although everyone
seems to accept it as the norm. If it is compulsory it actually simplifies some
of the code and makes it more regular.

In any case, I won't do this before the new release - too tempting for Murphy to
throw in a bug or two!

--

HELP!!!!!!!!!!!!!!!!!!!!!!



Date: Tue, 23 Feb 2016 20:26:10 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: yoshimi@freelists.org
Subject: [yoshimi] Re: Yoshimi 1.3.9 rc1 - more details
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.29; x86_64-pc-linux-gnu)

I'll try to add to the information in 'doc' through this week - while also
checking for bugs - with the intention of a release on Sunday or Monday. The
latest changes I made to the CLI, were the result of an ill thought out
decision at the start. Hopefully I won't need to change anything else, but just
add to what is there.

The levels that currently exist are:

top level
system effects
insertion effects
part
part effects
vector

Ones that I'm pretty sure will be added are:

scales (microtonal)
controllers
addsynth
addsynth voice
subsynth
padsynth harmonics
padsynth envelopes

?????
In the GUI, harmonics are the default window for padsynth, but for the CLI I'll
probably reverse that. Once the sound has been set up. you are more likely to
want to play with the envelopes, and throughout the CLI I'm trying to make the
most used controls have the highest priority (and shortest abbreviations).
?????


Any level that has a direct numerical content will be changeable simply with
"set {n}" once you are at that level.

eg. you can have 0-15 vector channels, so from top level:

"set vector" -or- "s ve"
will return the default 0 (or last used one)

"set 5" -or- "s 5"
will then switch to vector channel 5.
However, at the start you could have gone straight there with:

"set vector 5" -or- "s ve 5"

Does that clarify things more?


With the built-in help system I'm trying to provide enough information as a
reminder, while not stuffing the terminal with acres of text.






Date: Sun, 28 Feb 2016 23:04:11 +0000
From: Will Godfrey <willgodfrey@musically.me.uk>
To: Chris Ahlstrom <ahlstromcj@gmail.com>
Subject: Re: Yoshimi doc
X-Mailer: Claws Mail 3.13.2 (GTK+ 2.24.29; x86_64-pc-linux-gnu)

On Sun, 28 Feb 2016 16:08:05 -0500
Chris Ahlstrom <ahlstromcj@gmail.com> wrote:

> Okay, I added your updates to the cja branch, plus fixed a
> number of other things.  Merged into master.
>
> I remember you had got a pink noise patch from Zyn, so I added
> new material for that.  Any other GUI/engine changes?

Can't think of any at them moment - but it's getting late :)

> My next big question for you is how the command line section is.
> Does my description match the current commands?
>
> Thanks!
>
> Chris

Looking through yoshimi-user-manual.tex

line 301
"\texttt{s 6 v 80}":
should be
"\texttt{..s 6 v 80}":


In yum_command_line.tex
line 85
"yoshimi part 4 FX 0 rever >"
should now be
"yoshimi part 4 FX 0 rever-0 >

Note miscellany below!

Line 197
what is unclear?

Lines 222 - 248
appears to be duplication?

Line 270

===========================
should also have:
"load instrument"
"save instrument"
===========================

note grouping is now
load
load
save
save
save

Line 291
"list current" is now "list parts" - makes more sense!

===========================
line 300
"set reports" now has 4 options:
gui/stderr - determines the destination
show/hide - determines whether to hide non-fatal errors.
===========================


I'm actually unclear on how these files work. There seems to be groups of
duplication which might be some form of version history. Is that so?



A bit of extra clarification on config files.

The 'banks' file is saved every time roots, banks or instruments are changed,
and again on a normal exit to catch current root and bank (which don't
otherwise trigger a save).

The 'history' file is only saved on a normal exit, as it is comparatively
unimportant.

The 'config' file is only saved when you specifically call for it to be saved.


Miscellaneous clarfication :)

At the CLI prompt, when effects are being managed, the preset number is also
shown on the prompt so you'll typically see something like:

yoshimi part 2 FX 1 Rever-7 >

"list effects all" will list every effect and all its presets along with the
preset number.

Yoshim is now verified as being able to use 192000 Hz sample rate in both ALSA
and Jack - if you have a suitable soundcard! Woo :)


Will now has to go to bed :(


 
